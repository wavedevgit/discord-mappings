[{"code":"()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:t=>{for(var n of $.pathRefs(e))ec.transform(n,t);for(var r of $.pointRefs(e))ep.transform(r,t);for(var i of $.rangeRefs(e))eE.transform(i,t);var a,o,u=s.get(e)||[],d=l.get(e)||new Set,f=e=>{if(e){var t=e.join(\",\");o.has(t)||(o.add(t),a.push(e))}};if(el.operationCanTransformPath(t))for(var p of(a=[],o=new Set,u))f(el.transform(p,t));else a=u,o=d;for(var _ of e.getDirtyPaths(t))f(_);s.set(e,a),l.set(e,o),eW.transform(e,t),e.operations.push(t),$.normalize(e,{operation:t}),\"set_selection\"===t.type&&(e.marks=null),c.get(e)||(c.set(e,!0),Promise.resolve().then(()=>{c.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},addMark:(t,n)=>{var{selection:r,markableVoid:i}=e;if(r){var a=(t,n)=>{if(!eT.isText(t))return!1;var[r,i]=$.parent(e,n);return!e.isVoid(r)||e.markableVoid(r)},o=eg.isExpanded(r),s=!1;if(!o){var[l,u]=$.node(e,r);if(l&&a(l,u)){var[d]=$.parent(e,u);s=d&&e.markableVoid(d)}}if(o||s)eW.setNodes(e,{[t]:n},{match:a,split:!0,voids:!0});else{var f=h(h({},$.marks(e)||{}),{},{[t]:n});e.marks=f,c.get(e)||e.onChange()}}},deleteBackward:t=>{var{selection:n}=e;n&&eg.isCollapsed(n)&&eW.delete(e,{unit:t,reverse:!0})},deleteForward:t=>{var{selection:n}=e;n&&eg.isCollapsed(n)&&eW.delete(e,{unit:t})},deleteFragment:t=>{var{selection:n}=e;n&&eg.isExpanded(n)&&eW.delete(e,{reverse:\"backward\"===t})},getFragment:()=>{var{selection:t}=e;return t?ei.fragment(e,t):[]},insertBreak:()=>{eW.splitNodes(e,{always:!0})},insertSoftBreak:()=>{eW.splitNodes(e,{always:!0})},insertFragment:t=>{eW.insertFragment(e,t)},insertNode:t=>{eW.insertNodes(e,t)},insertText:t=>{var{selection:n,marks:r}=e;if(n){if(r){var i=h({text:t},r);eW.insertNodes(e,i)}else eW.insertText(e,t);e.marks=null}},normalizeNode:t=>{var[n,r]=t;if(!eT.isText(n)){if(z.isElement(n)&&0===n.children.length){var i={text:\"\"};eW.insertNodes(e,i,{at:r.concat(0),voids:!0});return}for(var a=!$.isEditor(n)&&z.isElement(n)&&(e.isInline(n)||0===n.children.length||eT.isText(n.children[0])||e.isInline(n.children[0])),o=0,s=0;s<n.children.length;s++,o++){var l=ei.get(e,r);if(!eT.isText(l)){var c=n.children[s],u=l.children[o-1],d=s===n.children.length-1,f=eT.isText(c)||z.isElement(c)&&e.isInline(c);if(f!==a)eW.removeNodes(e,{at:r.concat(o),voids:!0}),o--;else if(z.isElement(c)){if(e.isInline(c))if(null!=u&&eT.isText(u)){if(d){var p={text:\"\"};eW.insertNodes(e,p,{at:r.concat(o+1),voids:!0}),o++}}else{var _={text:\"\"};eW.insertNodes(e,_,{at:r.concat(o),voids:!0}),o++}}else null!=u&&eT.isText(u)&&(eT.equals(c,u,{loose:!0})?(eW.mergeNodes(e,{at:r.concat(o),voids:!0}),o--):\"\"===u.text?(eW.removeNodes(e,{at:r.concat(o-1),voids:!0}),o--):\"\"===c.text&&(eW.removeNodes(e,{at:r.concat(o),voids:!0}),o--))}}}},removeMark:t=>{var{selection:n}=e;if(n){var r=(t,n)=>{if(!eT.isText(t))return!1;var[r,i]=$.parent(e,n);return!e.isVoid(r)||e.markableVoid(r)},i=eg.isExpanded(n),a=!1;if(!i){var[o,s]=$.node(e,n);if(o&&r(o,s)){var[l]=$.parent(e,s);a=l&&e.markableVoid(l)}}if(i||a)eW.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var u=h({},$.marks(e)||{});delete u[t],e.marks=u,c.get(e)||e.onChange()}}},getDirtyPaths:e=>{switch(e.type){case\"insert_text\":case\"remove_text\":case\"set_node\":var{path:t}=e;return el.levels(t);case\"insert_node\":var{node:n,path:r}=e;return[...el.levels(r),...eT.isText(n)?[]:Array.from(ei.nodes(n),e=>{var[,t]=e;return r.concat(t)})];case\"merge_node\":var{path:i}=e;return[...el.ancestors(i),el.previous(i)];case\"move_node\":var{path:a,newPath:o}=e;if(el.equals(a,o))return[];var s=[],l=[];for(var c of el.ancestors(a)){var u=el.transform(c,e);s.push(u)}for(var d of el.ancestors(o)){var f=el.transform(d,e);l.push(f)}var p=l[l.length-1],_=o[o.length-1];return[...s,...l,p.concat(_)];case\"remove_node\":var{path:h}=e;return[...el.ancestors(h)];case\"split_node\":var{path:m}=e;return[...el.levels(m),el.next(m)];default:return[]}},shouldNormalize:e=>{var{iteration:t,initialDirtyPathsLength:n}=e,r=42*n;if(t>r)throw Error(\"Could not completely normalize the editor after \".concat(r,\" iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\"));return!0}};return e}"}]