[{"code":"function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return\"\".concat(e,\":\").concat(null!=t?t:\"\",\":\").concat(null!=n?n:\"\")}"},{"code":"(e,t)=>(0,a.e7)([l.Z],()=>{if(null==e||!t)return null;let n=l.Z.getGiftCode(e);return null==n||\"\"===n?null:n})"},{"code":"e=>{var t;return(null==e?void 0:e.type)===h.uaV.CUSTOM_GIFT&&(null==e||null==(t=e.embeds)?void 0:t.length)===1&&(null==e?void 0:e.embeds[0].type)===h.hBH.GIFT}"},{"code":"function $(e){let t=e.trim().split(\"/\").pop().match(x);if(null==t)return null;let[n,r,i]=t;return null==i?null:i.replace(RegExp(L,\"g\"),\"\")}"},{"code":"function z(e,t,n){let{isCustomGift:r}=n;switch(e){case h.wZ8.ERROR:return g.intl.string(g.t.w19zb6);case h.wZ8.SUCCESS:if(__OVERLAY__)return g.intl.string(g.t.zW87EM);if(t.isSubscription)return g.intl.string(g.t.ex5TKr);return g.intl.string(g.t.OOkjql);case h.wZ8.OPEN:return g.intl.string(g.t.F8ktci);case h.wZ8.CONFIRM:default:if(null!=r&&r)return g.intl.string(g.t.n6I6k4);if(null!=t.giftStyle)return t.isClaimed?g.intl.string(g.t.OgpR0c):g.intl.string(g.t[\"2BWscv\"]);return t.isSubscription?g.intl.string(g.t.wQ1FHy):g.intl.string(g.t.OgpR0c)}}"},{"code":"(e,t)=>i.tq||i.Em?0:null!=e||t?2:1"},{"code":"function V(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",n=window.GLOBAL_ENV.GIFT_CODE_HOST;return null!=n?e=\"/\".concat(t):(n=location.host,e=\"/gifts/\".concat(t)),\"\".concat(location.protocol,\"//\").concat(n).concat(e)}"},{"code":"function et(e,t){switch(e.code){case h.evJ.INVALID_GIFT_SELF_REDEMPTION:return g.intl.string(g.t.wa9h7F);case h.evJ.INVALID_GIFT_REDEMPTION_EXHAUSTED:return g.intl.string(g.t.Iw2TUW);case h.evJ.INVALID_GIFT_REDEMPTION_OWNED:return g.intl.string(g.t.mdLtb5);case h.evJ.UNKNOWN_GIFT_CODE:return g.intl.string(g.t.roztIr);case h.evJ.INVALID_GIFT_REDEMPTION_SUBSCRIPTION_INCOMPATIBLE:return g.intl.formatToPlainString(g.t[\"4YTHKw\"],{planName:(0,f.M5)(t,m.PremiumTypes.TIER_2)?g.intl.string(g.t.lG6a5x):g.intl.string(g.t.FSOz78)});case h.evJ.INVALID_GIFT_REDEMPTION_SUBSCRIPTION_MANAGED:return g.intl.string(g.t[\"9i1J30\"]);case h.evJ.INVALID_GIFT_REDEMPTION_INVOICE_OPEN:return g.intl.string(g.t[\"U26WX+\"]);case h.evJ.INVALID_GIFT_REDEMPTION_FRAUD_REJECTED:return g.intl.string(g.t.ypuSd8);case h.evJ.BILLING_NON_REFUNDABLE_PAYMENT_SOURCE:return g.intl.string(g.t.mXMmWE);default:return g.intl.string(g.t[\"s9+XlB\"])}}"},{"code":"e=>{let t;if(null==e)return[];let n=new Set;for(;null!=(t=S.exec(e))&&n.size<O;)n.add(Z(t[1]));for(;null!=(t=T.exec(e))&&n.size<O;)n.add(Z(t[t.length-1]));return Array.from(n)}"},{"code":"function W(e,t,n){let{error:r,accepted:i,accepting:a,opened:o,isCustomGift:s}=n;return null==r&&(i||a||null==e)?!s||o||i||a?i&&(t.isSubscription||null!=e)?h.wZ8.SUCCESS:h.wZ8.CONFIRM:h.wZ8.OPEN:h.wZ8.ERROR}"},{"code":"function G(e){let[t,n,r]=e.split(\":\");return{skuId:t,subscriptionPlanId:\"\"===n?null:n,giftStyle:\"\"!==r&&null!=r?Number.parseInt(r):void 0}}"},{"code":"async function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=(await (0,_.Kb)({url:h.ANM.GIFT_CODE_RESOLVE(e),query:{with_application:t,with_subscription_plan:n},oldFormErrors:!0,rejectWithError:!1})).body;return u.default.track(h.rMx.GIFT_CODE_RESOLVED,{resolved:!0,gift_code:r.code,gift_code_max_uses:r.max_uses,sku_id:r.store_listing.sku.id,sku_type:r.store_listing.sku.type,application_id:r.store_listing.sku.application_id,store_title:r.store_listing.sku.name},{flush:!0}),r}catch(t){throw u.default.track(h.rMx.GIFT_CODE_RESOLVED,{resolved:!1,gift_code:e}),new o.Z(t)}}"},{"code":"function Y(e,t){u.default.track(h.rMx.GIFT_CODE_COPIED,b({},(0,s.Z)(t,!1,!1),e.analyticsData))}"},{"code":"function K(e,t,n){switch(e){case h.wZ8.ERROR:return g.intl.formatToMarkdownString(g.t.JUvC0s,{});case h.wZ8.SUCCESS:return t.isSubscription?g.intl.formatToPlainString(g.t[\"1C2BG/\"],{skuName:n.name}):g.intl.string(g.t[\"+BNMcF\"]);case h.wZ8.CONFIRM:default:return t.isSubscription?g.intl.formatToPlainString(g.t[\"2VN4N9\"],{skuName:n.name}):g.intl.string(g.t.RmamAI)}}"},{"code":"function X(e,t,n,r,i){let a=n||r?void 0:e,o=g.intl.format(g.t[\"5zyz9y\"],{onGoToLibrary:i});return null!=a?o:null==t?null:et(t,c.default.getCurrentUser())}"},{"code":"function Q(e){let{step:t,sku:n,libraryApplication:r,error:i,accepted:a,accepting:o,onGoToLibrary:s,subscriptionPlan:l=null}=e;switch(t){case h.wZ8.ERROR:return X(r,i,a,o,s);case h.wZ8.SUCCESS:if(null!=l)return q(l);return g.intl.formatToPlainString(g.t[\"3CPsbo\"],{skuName:n.name});case h.wZ8.CONFIRM:default:if(null!=l){let e=l.interval===m.rV.MONTH?g.t.P9eTKt:g.t.d8rUdy;return g.intl.format(e,{skuName:n.name,intervalCount:l.intervalCount})}return g.intl.formatToPlainString(g.t.l6Ea4Z,{skuName:n.name})}}"},{"code":"e=>0!==M(e)"},{"code":"function J(e,t,n){let r=t.applicationId,i=e.length>0?e:[r],a=i.map(e=>n.getLibraryApplication(r,e,!0)).filter(d.lm);return a.length===i.length?a[0]:null}"}]