[{"code":"function G(e){var t,n;let G,{activity:Z,embeddedActivity:F,user:B,onGameJoin:V,onClose:H,location:Y,supportsAskToJoin:W=!0}=e,{analyticsLocations:K}=(0,E.ZP)(null!=Y?Y:[]),[z,q]=r.useState(!1),Q=null!=(t=null==F?void 0:F.applicationId)?t:null==Z?void 0:Z.application_id,X=null!=F||(0,m.Z)(Z),J=(0,i.e7)([w.default],()=>w.default.getCurrentUser()),$=B.id===(null==J?void 0:J.id),ee=(0,p.Z)({channelId:(0,f.p)(null==F?void 0:F.location),userId:B.id,activity:Z}),et=(0,i.e7)([C.Z,O.Z,x.Z,S.Z],()=>X||null!=Q&&(0,j.t)({LibraryApplicationStore:C.Z,LaunchableGameStore:O.Z,DispatchApplicationStore:x.Z,ConnectedAppsStore:S.Z,applicationId:Q})),en=(0,i.e7)([c.ZP],()=>Array.from(c.ZP.getSelfEmbeddedActivities().values()).some(e=>{let{applicationId:t,location:n}=e;return(t===(null==Z?void 0:Z.application_id)||t===(null==F?void 0:F.applicationId))&&(0,f.p)(n)===ee})),er=(0,i.e7)([D.Z],()=>null!=Z&&null!=Z.application_id&&D.Z.getState(Z.application_id,M.mFx.JOIN)===M.OcF.LOADING),ei=(0,b.q)(Q),ea=(0,y.A)(ei),eo=(0,_.s5)({userId:B.id,activity:Z,channelId:ee,application:ei}),es=(0,i.e7)([v.Z,T.Z,I.Z,N.Z,P.Z,R.Z,A.Z],()=>null!=F?eo===_.Fw.CAN_JOIN:(0,d.Z)({user:B,activity:Z,application:ei,channelId:ee,currentUser:J,isEmbedded:X,ChannelStore:v.Z,GuildStore:T.Z,GuildMemberCountStore:I.Z,RelationshipStore:N.Z,SelectedChannelStore:P.Z,VoiceStateStore:R.Z,PermissionStore:A.Z})),el=(0,i.e7)([c.ZP],()=>{if(Array.from(c.ZP.getSelfEmbeddedActivities().values()).some(e=>e.applicationId===(null==F?void 0:F.applicationId)&&e.location.id===(null==F?void 0:F.location.id)))return!0;let e=c.ZP.getCurrentEmbeddedActivity();return null!=e&&e.applicationId===(null==Z?void 0:Z.application_id)}),ec=(0,l.O)();if(X&&null==F&&(null==Z||!(0,h.Z)(Z,M.xjy.CONTEXTLESS)))return null;let eu=!L.isPlatformEmbedded;if(!((0,h.Z)(Z,M.xjy.JOIN)||X)||null==Q)return null;let ed=!$||X&&!el,ef=ed&&(eu||et)&&!z&&!en;ed?eu||et||null==Z||(G=U.intl.formatToPlainString(U.t.SqJBnN,{name:Z.name})):G=U.intl.string(U.t[\"0OiwfH\"]);let ep=null!=(n=null==F?void 0:F.launchId)?n:null==Z?void 0:Z.session_id,e_=async(e,t)=>{if(null==ep||null==Q)return;let n=(0,h.Z)(t,M.xjy.EMBEDDED),r=P.Z.getVoiceChannelId(),i=v.Z.getChannel(r);if(await o.Z.join({userId:e.id,sessionId:ep,applicationId:Q,channelId:r,messageId:null,intent:k.Ws.PLAY,embedded:n,locationObject:ec.location,analyticsLocations:K}),!n){var a;(0,g.Z)({type:M.q5t.JOIN,userId:e.id,guildId:null==i?void 0:i.guild_id,channelId:r,channelType:null==i?void 0:i.type,applicationId:Q,partyId:null!=t?null==t||null==(a=t.party)?void 0:a.id:\"\",locationObject:ec.location,analyticsLocations:K})}},eh=async()=>{let e=!1;async function t(){let e;q(!0),null!=Z&&(e=await a.Z.sendActivityInviteUser({type:M.mFx.JOIN_REQUEST,userId:B.id,activity:Z,location:M.Sbl.USER_ACTIVITY_ACTIONS})),null!=e&&s.default.selectPrivateChannel(e.id)}if(X&&!ea){if(null==Q)return;if(!es)return t();if(e=await (0,u.Z)({applicationId:Q,activityChannelId:ee,locationObject:ec.location,analyticsLocations:K})){null==H||H();return}}if(!e){if(es){null==V||V(),e_(B,Z),null==H||H();return}await t()}};if(!es&&!W||!ef&&null==G)return null;let em=es?U.intl.string(U.t.VJlc0S):U.intl.string(U.t.OKsSCR);return el&&(em=U.intl.string(U.t.DPfdsq)),{buttonCTA:em,tooltip:G,handleJoinRequest:eh,isEnabled:ef,isJoining:er,isEmbedded:X}}"}]