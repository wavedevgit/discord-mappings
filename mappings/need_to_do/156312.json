[{"code":"function t(){let t=i.useContext(e);if(null==t)throw Error(\"Context was used outside of defined provider.\");return t}"},{"code":"function en(e){var t,n,s,N;let{loadId:X,activeSubscription:Q,stepConfigs:ee,breadcrumbs:et=[],skuIDs:en,isGift:er=!1,children:ei,defaultPlanId:ea,purchaseType:es=K.VVm.SUBSCRIPTION,applicationId:eo,referralCode:el,paymentGateway:ec,excludeSubscriptionPlansBySKU:eu=!1,excludeSKUPurchasePreviews:ed=!1,wasTier2PremiumBeforePurchase:ef=!1,referralTrialOfferId:ep}=e,e_=(0,H.A)(),eh=(0,m.H)(),em=(0,j.A)(),eg=en[0],eE=(0,u.bG)([T.A],()=>T.A.get(eg),[eg]),eb=null==eE?void 0:eE.eligiblePaymentGateways,{paymentSources:ey,hasPaymentSources:eO,paymentSourceId:eA,setPaymentSourceId:ev,hasFetchedPaymentSources:eS}=(0,M.A)({isGift:er,activeSubscription:Q,eligiblePaymentGateways:eb}),eI=i.useRef(eO),{hasFetchedSubscriptionPlans:eT,priceOptions:eC,setCurrency:eN,currencyLoading:eR,currencies:ew}=(0,L.A)({activeSubscription:Q,skuIDs:en,paymentSourceId:eA,isGift:er,excludeSubscriptionPlansBySKU:eu}),eP=(0,V.A)(),[eD,ex]=i.useState(!1),{step:eL,setStep:ej,steps:eM,breadcrumbsData:ek,previousStepRef:eU}=(0,B.A)({stepConfigs:ee,breadcrumbs:et}),[eG,eV]=(0,G.A)(eL),{paymentError:eF,paymentAuthenticationState:eB}=(0,k.A)(),{purchaseError:eH,purchaseErrorBlockRef:eY,setPurchaseError:eW}=(0,U.A)(),eK=(0,d.A)(()=>{let e=null!=X?X:(0,l.A)();return w.A.addBreadcrumb({message:\"Checkout session ID: \".concat(e)}),{loadId:e,startTime:Date.now()}}),{selectedSkuId:ez,selectedPlan:eq,selectedPlanNotification:eX,setSelectedSkuId:eZ,setSelectedPlanId:eQ,setSelectedPlanNotification:e$}=(0,P.A)(),[eJ,e0]=(0,u.yK)([S.A],()=>[S.A.purchaseTokenAuthState,S.A.purchaseTokenHash]),[e1,e2,e3,e6]=(0,u.yK)([Y.A],()=>[Y.A.browserCheckoutState,Y.A.loadId,Y.A.skuId,Y.A.planId]),[e4,e5]=i.useState(null),[e7,e8]=i.useState(null),[e9,te]=i.useState(null),[tt,tn]=i.useState(null),[tr,ti]=i.useState(null),[ta,ts]=i.useState(void 0),[to,tl]=i.useState([]),[tc,tu]=i.useState([]),td=i.useMemo(()=>null==eq||(0,R.ys)(eq.id),[eq]),tf=i.useRef(null!=Q?Q.planId:null);i.useEffect(()=>{null==tf.current&&null!=Q&&(tf.current=Q.planId)},[Q]);let{endsAt:tp}=(0,g.A)({forceFetch:!1,excludeReverseTrial:!0}),t_=i.useRef(tp.isSame(o()(0))?null:tp);i.useEffect(()=>{null!=t_.current||tp.isSame(o()(0))||(t_.current=tp)},[tp]);let th=i.useMemo(()=>({paymentSourceId:eA,paymentGateway:ec,loadId:X}),[eA,ec,X]);(0,x.A)(eg,th);let{skusById:tm,hasFetchedSkus:tg,skuPricePreviewsById:tE,previewErrorsById:tb}=(0,F.A)({applicationId:null!=eo?eo:z.tv,skuIDs:en,currentPaymentSourceId:eA,isGift:er,excludeSKUPurchasePreviews:ed}),ty=tm[null!=ez?ez:\"\"],tO=null!=ez?tb[ez]:null,[tA,tv]=i.useState(tO),tS=i.useMemo(()=>{if(null==ez)return null;let e=tE[ez];return null==e?null:e[null!=eA?eA:I.B]},[ez,tE,eA]),{data:tI}=(0,h.YY)(eo),tT=v.Q_.useSetting(),tC=(0,u.bG)([f.A],()=>f.A.getFetchState());i.useEffect(()=>{null!=tI&&(0,c.Lt)(tI.flags,K.gfo.EMBEDDED)&&tT&&null==tC&&(0,p.SE)()},[tI,tT,tC]);let tN=(0,c.Lt)(null!=(t=null==tI?void 0:tI.flags)?t:0,K.gfo.EMBEDDED)&&(0,c.Lt)(null!=(n=null==tI?void 0:tI.flags)?n:0,K.gfo.EMBEDDED_IAP),tR=(0,u.bG)([_.Ay],()=>Array.from(_.Ay.getSelfEmbeddedActivities().values()).find(e=>{let{applicationId:t}=e;return t===eo})),tw=null==tR?void 0:tR.compositeInstanceId,tP=(0,u.bG)([C.A],()=>null!=ez?C.A.getForSKU(ez):null,[ez]),[tD,tx]=i.useState(null),tL=null!=(s=null==Q?void 0:Q.inReverseTrial)&&s&&!er,tj=(0,y.A)({location:\"PaymentModal\"})&&td,{isDisplayingWowMomentConfirmation:tM}=(0,u.cf)([b.A],()=>({isDisplayingWowMomentConfirmation:b.A.isDisplayingWowMomentConfirmation})),tk=tj?q.Ot:void 0,{enabled:tU}=(0,E.Y)({location:\"PaymentContext\"}),tG=(0,D.uR)({location:\"PaymentModal\"}),tV=i.useMemo(()=>{if(tG)return W.uH.APPLE_PAYMENT_LINK},[tG]),tF=i.useMemo(()=>null!=eq&&eq.id===z.gD.PREMIUM_GROUP_MONTH,[eq]),tB=(0,A.V)(null!=ep?ep:void 0),tH=!tF&&!er&&null!=tB&&null!=ez&&z.TP[tB.trial_id].skus.includes(ez),tY=(0,O.O)(),tW=null==tY||null==(N=tY.discount)?void 0:N.plan_ids.some(e=>z.hd[e].skuId===ez),tK=!!(!tF&&!er&&null!=tY&&null!=ez&&tW);return(0,r.jsx)(J.Provider,{value:$(Z({stripe:e_,paymentElementsEnabled:tU,contextMetadata:eK,blockedPayments:eh,activeSubscription:Q,hasFetchedSubscriptions:em,hasFetchedSubscriptionPlans:eT,updatedSubscription:tt,setUpdatedSubscription:tn,subscriptionMetadataRequest:tr,setSubscriptionMetadataRequest:ti,hasFetchedPaymentSources:eS,paymentSources:ey,hasPaymentSources:eO,paymentSourceId:eA,setPaymentSourceId:ev,priceOptions:eC,setCurrency:eN,currencyLoading:eR,currencies:ew},eP),{hasAcceptedTerms:eD,setHasAcceptedTerms:ex,step:eL,setStep:ej,steps:eM,stepConfigs:ee,breadcrumbs:ek,previousStepRef:eU,purchaseState:eG,setPurchaseState:eV,paymentAuthenticationState:eB,paymentError:eF,purchaseError:eH,setPurchaseError:eW,purchasePreviewError:tA,setPurchasePreviewError:tv,purchaseErrorBlockRef:eY,purchaseTokenAuthState:eJ,purchaseTokenHash:e0,browserCheckoutState:e1,browserCheckoutStateLoadId:e2,browserCheckoutStateSkuId:e3,browserCheckoutStatePlanId:e6,bodyNode:e4,setBodyNode:e5,footerNode:e7,setFooterNode:e8,modalOverlayNode:e9,setModalOverlayNode:te,selectedSkuId:ez,selectedSku:ty,selectedStoreListing:tP,selectedPlan:eq,setSelectedSkuId:eZ,setSelectedPlanId:eQ,selectedPlanNotification:eX,setSelectedPlanNotification:e$,readySlideId:ta,setReadySlideId:ts,defaultPlanId:ea,isPremium:td,isGift:er,startingFractionalPremiumEndsAtRef:t_,startedPaymentFlowWithPaymentSourcesRef:eI,startingPremiumSubscriptionPlanIdRef:tf,hasFetchedSkus:tg,skusById:tm,skuPricePreviewsById:tE,selectedSkuPricePreview:tS,application:tI,purchaseType:es,isEmbeddedIAP:tN,activitySessionId:tw,devShelfFetchState:tC,entitlementsGranted:to,setEntitlementsGranted:tl,appliedUserDiscounts:tc,setAppliedUserDiscounts:tu,referralCode:el,invoicePreview:tD,setInvoicePreview:tx,inReverseTrial:tL,enablePremiumBrandRefresh:tj,isDisplayingWowMomentConfirmation:tM,premiumBrandRefreshBackgroundClassName:tk,wasTier2PremiumBeforePurchase:ef,customCheckoutFlow:tV,isPremiumGroupPurchase:tF,isEligibleForTrial:tH,isEligibleForDiscount:tK,userTrialOffer:tB,referralTrialOfferId:ep,discountOffer:tY}),children:(0,r.jsx)(a.Elements,{options:K.XL8,stripe:e_,children:ei})})}"}]