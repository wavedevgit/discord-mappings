[{"code":"function G(e){var t,n;let G,{activity:F,embeddedActivity:V,user:B,onGameJoin:H,onClose:Y,location:W,supportsAskToJoin:K=!0}=e,{analyticsLocations:z}=(0,E.Ay)(null!=W?W:[]),[q,Z]=r.useState(!1),Q=null!=(t=null==V?void 0:V.applicationId)?t:null==F?void 0:F.application_id,X=null!=V||(0,m.A)(F),J=(0,i.bG)([R.default],()=>R.default.getCurrentUser()),$=B.id===(null==J?void 0:J.id),ee=(0,p.A)({channelId:(0,f.H)(null==V?void 0:V.location),userId:B.id,activity:F}),et=(0,i.bG)([T.A,O.A,L.A,A.A],()=>X||null!=Q&&(0,M.A)({LibraryApplicationStore:T.A,LaunchableGameStore:O.A,DispatchApplicationStore:L.A,ConnectedAppsStore:A.A,applicationId:Q})),en=(0,i.bG)([c.Ay],()=>Array.from(c.Ay.getSelfEmbeddedActivities().values()).some(e=>{let{applicationId:t,location:n}=e;return(t===(null==F?void 0:F.application_id)||t===(null==V?void 0:V.applicationId))&&(0,f.H)(n)===ee})),er=(0,i.bG)([D.A],()=>null!=F&&null!=F.application_id&&D.A.getState(F.application_id,j.xL.JOIN)===j.eAD.LOADING),ei=(0,y.h)(Q),ea=(0,b.e)(ei),eo=(0,_.vG)({userId:B.id,activity:F,channelId:ee,application:ei}),es=(0,i.bG)([v.A,S.A,I.A,N.A,w.A,P.A,C.A],()=>null!=V?eo===_.Gy.CAN_JOIN:(0,d.A)({user:B,activity:F,application:ei,channelId:ee,currentUser:J,isEmbedded:X,ChannelStore:v.A,GuildStore:S.A,GuildMemberCountStore:I.A,RelationshipStore:N.A,SelectedChannelStore:w.A,VoiceStateStore:P.A,PermissionStore:C.A})),el=(0,i.bG)([c.Ay],()=>{if(Array.from(c.Ay.getSelfEmbeddedActivities().values()).some(e=>e.applicationId===(null==V?void 0:V.applicationId)&&e.location.id===(null==V?void 0:V.location.id)))return!0;let e=c.Ay.getCurrentEmbeddedActivity();return null!=e&&e.applicationId===(null==F?void 0:F.application_id)}),ec=(0,l.p)();if(X&&null==V&&(null==F||!(0,h.A)(F,j.jUm.CONTEXTLESS)))return null;let eu=!x.isPlatformEmbedded;if(!((0,h.A)(F,j.jUm.JOIN)||X)||null==Q)return null;let ed=!$||X&&!el,ef=ed&&(eu||et)&&!q&&!en;ed?eu||et||null==F||(G=U.intl.formatToPlainString(U.t.SqJBnN,{name:F.name})):G=U.intl.string(U.t[\"0OiwfH\"]);let ep=null!=(n=null==V?void 0:V.launchId)?n:null==F?void 0:F.session_id,e_=async(e,t)=>{if(null==ep||null==Q)return;let n=(0,h.A)(t,j.jUm.EMBEDDED),r=w.A.getVoiceChannelId(),i=v.A.getChannel(r);if(await o.A.join({userId:e.id,sessionId:ep,applicationId:Q,channelId:r,messageId:null,intent:k.W9.PLAY,embedded:n,locationObject:ec.location,analyticsLocations:z}),!n){var a;(0,g.A)({type:j.UqL.JOIN,userId:e.id,guildId:null==i?void 0:i.guild_id,channelId:r,channelType:null==i?void 0:i.type,applicationId:Q,partyId:null!=t?null==t||null==(a=t.party)?void 0:a.id:\"\",locationObject:ec.location,analyticsLocations:z})}},eh=async()=>{let e=!1;async function t(){let e;Z(!0),null!=F&&(e=await a.A.sendActivityInviteUser({type:j.xL.JOIN_REQUEST,userId:B.id,activity:F,location:j.ThZ.USER_ACTIVITY_ACTIONS})),null!=e&&s.default.selectPrivateChannel(e.id)}if(X&&!ea){if(null==Q)return;if(!es)return t();if(e=await (0,u.A)({applicationId:Q,activityChannelId:ee,locationObject:ec.location,analyticsLocations:z})){null==Y||Y();return}}if(!e){if(es){null==H||H(),e_(B,F),null==Y||Y();return}await t()}};if(!es&&!K||!ef&&null==G)return null;let em=es?U.intl.string(U.t.VJlc0S):U.intl.string(U.t.OKsSCR);return el&&(em=U.intl.string(U.t.DPfdsq)),{buttonCTA:em,tooltip:G,handleJoinRequest:eh,isEnabled:ef,isJoining:er,isEmbedded:X}}"}]