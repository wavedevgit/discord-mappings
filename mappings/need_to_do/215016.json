[{"code":"function Z(){let{renderWindow:e}=i.useContext(m.ZP),t=e.document,[n]=i.useState(()=>new c.w(()=>t.createElement(\"img\"),e=>{e.onload=null,e.src=\"\"})),[r]=i.useState(()=>new c.w(()=>{let e=t.createElement(\"video\");return e.className=S.gif,e.autoplay=!0,e.loop=!0,e.muted=!0,e.preload=\"auto\",e.controls=!1,e},e=>{e.src=\"\",e.oncanplay=null;let{parentNode:t}=e;null!=t&&t.removeChild(e)}));return{imagePool:n,videoPool:r}}"},{"code":"function(e){let t=Z();return(0,r.jsx)(G,T({},e,t))}"},{"code":"class U extends i.PureComponent{componentDidMount(){let{props:{format:e,src:t,coords:{width:n,height:r},videoPool:i},ref:a}=this;if(e!==u.EO.VIDEO||null==a)return;let o=i.getElement();o.oncanplay=this.handleCanPlay,o.src=t,o.width=n,o.height=r,a.appendChild(o),this._video=o}componentDidUpdate(e){let{width:t,height:n}=this.props.coords;null!=this._video&&(e.coords.width!==t||e.coords.height!==n)&&(this._video.width=t,this._video.height=n)}componentWillUnmount(){this._mounted=!1;let{_image:e,_video:t}=this,{imagePool:n,videoPool:r}=this.props;null!=e&&(this._image=null,n.poolElement(e)),null!=t&&(this._video=null,r.poolElement(t))}renderGIF(){let{src:e,coords:{width:t,height:n}}=this.props,{loaded:i}=this.state;return i?(0,r.jsx)(\"img\",{src:k(e),width:t,height:n,className:S.gif,alt:\"\"}):null}render(){let{item:e,renderExtras:t,format:n,coords:i,focused:a,selected:o}=this.props,{color:s,loaded:l}=this.state;return(0,r.jsxs)(f.P3F,{tabIndex:-1,innerRef:e=>{this.ref=e},className:S.result,\"data-focused\":a,\"data-selected\":o,onClick:this.handleClick,style:T({backgroundColor:l?void 0:s},i),children:[L(n)?null:this.renderGIF(),null!=t?t(e):null]})}constructor(e){super(e),I(this,\"ref\",null),I(this,\"_video\",null),I(this,\"_image\",null),I(this,\"_mounted\",!0),I(this,\"handleCanPlay\",()=>{this._mounted&&this.setState({loaded:!0})}),I(this,\"handleClick\",()=>{let{onClick:e,item:t,index:n}=this.props;null!=e&&e(t,n)});let{format:t,color:n,imagePool:r}=this.props;this.state={color:null==n?l().sample(C):n,loaded:!1},L(t)||(this._image=r.getElement(),this._image.onload=()=>this.setState({loaded:!0}),this._image.src=e.src)}}"}]