[{"code":"function S(e){let{messageId:t,channelId:n,numOfAttachments:r,numOfExplicitAttachments:i,numOfEmbeds:a,numOfExplicitEmbeds:s}=e;if(null==n)return;let o=u.A.getChannel(n);d.default.track(h.HAw.EXPLICIT_MEDIA_RETROACTIVE_SCAN_COMPLETE,{message_id:t,channel_id:n,channel_type:null==o?void 0:o.type,guild_id:null==o?void 0:o.guild_id,num_of_attachments:r,num_of_explicit_attachments:i,num_of_embeds:a,num_of_explicit_embeds:s})}"},{"code":"function T(e){let{attachments:t,embeds:n}=C(e),r=N(e);return e.merge({attachments:t,embeds:n,messageSnapshots:r})}"},{"code":"function x(e){let{obscure:t}=e;(0,a.$8)()&&d.default.track(h.HAw.EXPLICIT_MEDIA_OBSCURITY_TOGGLE_V2,{toggle_direction:t?\"hide\":\"show\"})}"},{"code":"function P(){let e=(0,o.aX)(r.t.SENSITIVE_CONTENT_SHOW_SETTING),t=(0,c.j)(\"explicit_media_redaction_utils\"),n=e||t,i=(0,a.i2)();return n&&i}"},{"code":"function L(e){var t;return null==(t=e.message_snapshots)?void 0:t.some(e=>{var t,n;return(null==(t=e.message)?void 0:t.attachments)!=null&&e.message.attachments.length>0||(null==(n=e.message)?void 0:n.embeds)!=null&&e.message.embeds.length>0})}"},{"code":"function I(e){let{messageId:t,channelId:n,numOfAttachments:r,numOfSelfHarmAttachments:i,numOfEmbeds:a,numOfGoreAttachments:s,numOfExplicitAttachments:o,numOfSelfHarmEmbeds:l,numOfGoreEmbeds:c,numOfExplicitEmbeds:f}=e,p=o>0||f>0,_=s>0||c>0,m=i>0||l>0;if(null==n||null==t||!p&&!_&&!m)return;let g=u.A.getChannel(n);d.default.track(h.HAw.REDACTABLE_MESSAGE_LOADED,{message_id:t,channel_id:n,channel_type:null==g?void 0:g.type,guild_id:null==g?void 0:g.guild_id,num_of_attachments:r,num_of_gore_attachments:s,num_of_explicit_attachments:o,num_of_self_harm_attachments:i,num_of_embeds:a,num_of_gore_embeds:c,num_of_explicit_embeds:f,num_of_self_harm_embeds:l,has_redactable_explicit:p,has_redactable_gore:_,has_redactable_self_harm:m})}"},{"code":"function v(e){var t,n,r,a;let{channelId:o,messageId:c,attachmentIds:p,embedIds:_}=e;if(null==o||null==c||(null!=(t=null==p?void 0:p.length)?t:0)===0&&(null!=(n=null==_?void 0:_.length)?n:0)===0)return;let g=u.A.getChannel(o);d.default.track(h.HAw.EXPLICIT_MEDIA_SCAN_CLIENT_TIMED_OUT,{channel_id:o,guild_id:null==g?void 0:g.guild_id,message_id:c,embed_ids:_,user_is_underage:(0,l.L)(),scan_timeout_duration:f.MX,attachment_ids_v2:p}),s.A.increment({name:i.K.EXPLICIT_MEDIA_SCAN_CLIENT_TIMED_OUT,tags:[\"metricVersion:\".concat(m)]}),s.A.distribution({name:i.K.EXPLICIT_MEDIA_SCAN_CLIENT_TIMED_OUT_DISTRIBUTION},(null!=(r=null==p?void 0:p.length)?r:0)+(null!=(a=null==_?void 0:_.length)?a:0))}"},{"code":"function w(){let e=(0,o.d6)(r.t.SENSITIVE_CONTENT_SHOW_SETTING),t=(0,c.o)(\"explicit_media_redaction_utils\"),n=e||t,i=(0,a.p9)();return n&&i}"},{"code":"function y(e){let{action:t,channelId:n,messageId:r,context:i}=e;if(null==n||null==r)return;let a=u.A.getChannel(n);d.default.track(h.HAw.EXPLICIT_MEDIA_ACTION,{action:t,guild_id:null==a?void 0:a.guild_id,channel_id:n,message_id:r,user_is_underage:(0,l.L)(),context:i})}"},{"code":"(e,t)=>null!=e&&null!=t&&(e<=_._L||t<=_.jd)"},{"code":"function D(e){return!!P()&&null!=e&&p.tY.has(e)}"},{"code":"function O(e,t){let n=Math.min(Math.floor((Date.now()-e)/1e3),3);s.A.increment({name:i.K.EXPLICIT_MEDIA_SCAN_CLIENT_TIMING,tags:[\"timingBucket:\".concat(n),\"source:\".concat(t),\"metricVersion:\".concat(m)]})}"},{"code":"function A(e){let{channelId:t,numOfAttachments:n,numOfAttachmentsPendingScan:r,numOfEmbeds:a,numOfEmbedsPendingScan:o}=e;if(null==t)return;let l=u.A.getChannel(t);d.default.track(h.HAw.EXPLICIT_MEDIA_REDACTABLE_MESSAGES_LOADED,{channel_id:t,guild_id:null==l?void 0:l.guild_id,num_of_attachments:n,num_of_attachments_pending_scan:r,num_of_embeds:a,num_of_embeds_pending_scan:o});let c=r+o;c>0&&s.A.distribution({name:i.K.EXPLICIT_MEDIA_PENDING_MESSAGE_LOADED_V2},c)}"}]