[{"code":"function y(){var e;return!!c.isPlatformEmbedded&&null!=(e=d.ZP.CanSystemServiceBeInstalled())&&e}"},{"code":"async function w(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(c.isPlatformEmbedded)try{await C(),await d.ZP.UninstallSystemService(),h.info(\"System service uninstalled.\"),N((0,i.createToast)(_.intl.string(_.t.dThS5H),i.ToastType.SUCCESS),t),l.default.track(p.rMx.SYSTEM_SERVICE_UNINSTALL_ATTEMPTED,{success:!0,source:e})}catch(r){let n=A(r);if(null==n&&r instanceof Error){N((0,i.createToast)(_.intl.formatToPlainString(_.t.oHh3oI,{error:r.message}),i.ToastType.FAILURE),t),u.Z.captureMessage(\"Unknown error during system service uninstallation\",{extra:{error:r}}),h.error(\"System service uninstall failed.\",r),l.default.track(p.rMx.SYSTEM_SERVICE_UNINSTALL_ATTEMPTED,{success:!1,source:e,error_message:r.message});return}if(null==n){N((0,i.createToast)(_.intl.formatToPlainString(_.t.oHh3oI,{error:r}),i.ToastType.FAILURE),t),u.Z.captureMessage(\"Really unknown error during system service uninstallation\",{extra:{error:r}}),h.error(\"System service uninstall failed.\",r),l.default.track(p.rMx.SYSTEM_SERVICE_UNINSTALL_ATTEMPTED,{success:!1,source:e,error_message:null==r?void 0:r.toString()});return}l.default.track(p.rMx.SYSTEM_SERVICE_UNINSTALL_ATTEMPTED,{success:!1,source:e,error_code:n.error_code,error_message:n.error_message}),N((0,i.createToast)(_.intl.formatToPlainString(_.t.oHh3oI,{error:n.error_message}),i.ToastType.FAILURE),t),u.Z.captureMessage(\"Error during system service uninstallation\",{extra:{error:n}}),h.error(\"System service uninstall failed.\",n)}}"},{"code":"async function T(e){if(c.isPlatformEmbedded&&E())try{await d.ZP.DoesSystemServiceHaveUpdate()&&await d.ZP.UpdateSystemService(),I(e)}catch(e){throw u.Z.captureMessage(\"Error during system service initialization\",{extra:{error:e}}),h.error(\"System service initialization failed\",e),e}}"},{"code":"function E(){var e;return!!c.isPlatformEmbedded&&null!=(e=d.ZP.IsSystemServiceInstalled())&&e}"},{"code":"function O(){let e=(0,r.e7)([s.ZP],()=>s.ZP.canShowAdminWarning),t=y();return!!c.isPlatformEmbedded&&e&&!E()&&t}"},{"code":"function v(e){return!!c.isPlatformEmbedded&&e.canShowAdminWarning&&!E()&&b()}"},{"code":"async function P(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(c.isPlatformEmbedded&&d.ZP.CanSystemServiceBeInstalled())try{await d.ZP.InstallSystemService(),h.info(\"System service installed.\"),l.default.track(p.rMx.SYSTEM_SERVICE_INSTALL_ATTEMPTED,{success:!0,source:e}),N((0,i.createToast)(_.intl.string(_.t.kQnWby),i.ToastType.SUCCESS),t),I(\"after-install\")}catch(r){let n=A(r);if(null==n&&r instanceof Error){N((0,i.createToast)(_.intl.formatToPlainString(_.t.sdKYCE,{error:r.message}),i.ToastType.FAILURE),t),u.Z.captureMessage(\"Unknown error during system service installation\",{extra:{error:r}}),h.error(\"System service install failed.\",r),l.default.track(p.rMx.SYSTEM_SERVICE_INSTALL_ATTEMPTED,{success:!1,source:e,error_message:r.message});return}if(null==n){N((0,i.createToast)(_.intl.formatToPlainString(_.t.sdKYCE,{error:r}),i.ToastType.FAILURE),t),u.Z.captureMessage(\"Really unknown error during system service installation\",{extra:{error:r}}),h.error(\"System service install failed.\",r),l.default.track(p.rMx.SYSTEM_SERVICE_INSTALL_ATTEMPTED,{success:!1,source:e,error_message:null==r?void 0:r.toString()});return}if(l.default.track(p.rMx.SYSTEM_SERVICE_INSTALL_ATTEMPTED,{success:!1,source:e,error_code:n.error_code,error_message:n.error_message}),n.error_code===m){N((0,i.createToast)(_.intl.string(_.t.xu9k8G),i.ToastType.FAILURE),t),h.error(\"User cancelled system service install.\");return}N((0,i.createToast)(_.intl.formatToPlainString(_.t.sdKYCE,{error:n.error_message}),i.ToastType.FAILURE),t),n.error_code!==g&&u.Z.captureMessage(\"Error during system service installation\",{extra:{error:n}}),h.error(\"System service install failed.\",n)}}"},{"code":"async function C(){c.isPlatformEmbedded&&(d.ZP.InputEventServiceSetAllowed(!1),d.ZP.ToolServiceSetAllowed(!1),await a.Z.dispatch({type:\"SYSTEM_SERVICE_INITIALIZE\",status:{state:\"unknown\"},modules:[\"input-service\"]}),await a.Z.dispatch({type:\"SYSTEM_SERVICE_INITIALIZE\",status:{state:\"unknown\"},modules:[\"tool-service\"]}),h.info(\"System service terminated.\"))}"}]