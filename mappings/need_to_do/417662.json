[{"code":"function p(e,t){let{cmd:n=!1,ctrl:r=!1,alt:i=!1,shift:a=!1}=t;return(null==n||e.metaKey===n)&&(null==r||e.ctrlKey===r)&&(null==i||e.altKey===i)&&(null==a||e.shiftKey===a)}"},{"code":"function _(e){return e.onKeyDown=t=>{var n,r,a,_;let h=e.isMac;switch(t.which){case d.yXg.B:if(!u.bN.isEditorEmpty(e)&&p(t,{ctrl:!h,cmd:h}))return(0,l.py)(e,\"bold\"),!0;break;case d.yXg.I:if(!u.bN.isEditorEmpty(e)&&p(t,{ctrl:!h,cmd:h}))return(0,l.py)(e,\"italics\"),!0;break;case d.yXg.U:if(!u.bN.isEditorEmpty(e)&&p(t,{ctrl:!h,cmd:h}))return(0,l.py)(e,\"underline\"),!0;break;case d.yXg.S:if(!u.bN.isEditorEmpty(e)&&p(t,{ctrl:!h,cmd:h,shift:!0}))return(0,l.py)(e,\"strikethrough\"),!0;break;case d.yXg.TAB:if(null!=e.selection&&p(t,{shift:null})){let[r,i]=u.M8.edges(e.selection),a=u.bN.blocks(e).slice(r.path[0],i.path[0]+1),o=!0;for(let[e]of a)if(\"line\"!==e.type||!(null==(n=e.codeBlockState)?void 0:n.isInCodeBlock)){o=!1;break}if(o){if(!t.shiftKey&&u.M8.isCollapsed(e.selection))return c.Q.insertText(e,f),!0;let n=!t.shiftKey;return s.T.withSingleEntry(e,()=>{var t,r,i,o;let s=null!=(i=null==(t=e.selection)?void 0:t.anchor)?i:u.bN.start(e,[]),l=null!=(o=null==(r=e.selection)?void 0:r.focus)?o:u.bN.end(e,[]);for(let[t,r]of a){let i=t.children[0];if(!u.LC.isText(i))continue;let a=u.C0.child(r,0),o={path:a,offset:0};if(n)c.Q.insertText(e,f,{at:o}),u.C0.equals(s.path,a)&&0!==s.offset&&(s={path:a,offset:s.offset+f.length}),u.C0.equals(l.path,a)&&0!==l.offset&&(l={path:a,offset:l.offset+f.length});else if(i.text.startsWith(f)){let t={path:u.C0.child(r,0),offset:f.length};c.Q.delete(e,{at:{anchor:o,focus:t}}),u.C0.equals(s.path,a)&&(s={path:a,offset:Math.max(0,s.offset-f.length)}),u.C0.equals(l.path,a)&&(l={path:a,offset:Math.max(0,l.offset-f.length)})}}c.Q.select(e,{anchor:s,focus:l})}),!0}}break;case d.yXg.ARROW_LEFT:case d.yXg.ARROW_RIGHT:{let n;if(p(t,{shift:null}))n=\"character\";else if(p(t,{ctrl:!h,alt:h,shift:null}))n=\"word\";else if(h&&p(t,{cmd:!0,shift:null}))return!1;else return!1;let o=e.children[null!=(_=null==(a=e.selection)||null==(r=a.focus)?void 0:r.path[0])?_:0],s=\"rtl\"===i()(u.aj.string(o)),l=t.which===d.yXg.ARROW_LEFT==!s;return c.Q.keyboardMove(e,{reverse:l,unit:n,edge:t.shiftKey?\"focus\":void 0}),!0}case d.yXg.A:if(h&&p(t,{ctrl:!0})){let t=u.bN.getCurrentBlock(e);if(null!=t){let n=u.bN.start(e,t[1]);return c.Q.select(e,{anchor:n,focus:n}),!0}}break;case d.yXg.E:if(h&&p(t,{ctrl:!0})){let t=u.bN.getCurrentBlock(e);if(null!=t){let n=u.bN.end(e,t[1]);return c.Q.select(e,{anchor:n,focus:n}),!0}}break;case d.yXg.BACKSPACE:case d.yXg.DELETE:case d.yXg.K:let m=t.which===d.yXg.BACKSPACE;if((!h&&t.which!==d.yXg.K&&p(t,{ctrl:!0,shift:!0})||h&&t.which!==d.yXg.K&&p(t,{cmd:!0})||h&&t.which===d.yXg.K&&p(t,{ctrl:!0}))&&null!=e.selection){let[t,n]=u.M8.edges(e.selection),[r,i]=u.bN.node(e,[m?t.path[0]:n.path[0]]);if(o()(u.bN.isBlock(e,r),\"Top-most node of selection is not a block\"),m&&!u.Jz.isAtStart(t,[r,i])||!m&&!u.Jz.isAtEnd(n,[r,i]))return m?e.deleteBackward(\"line\"):e.deleteForward(\"line\"),!0}}return!1},e}"}]