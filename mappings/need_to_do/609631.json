[{"code":"class D extends(r=a.Component){formatDimension(e){return this.props.useRawTargetDimensions?e:Math.ceil(e)}nudgeLeftAlignment(e,t,n){let{nudgeAlignIntoViewport:r}=this.props;if(!r)return e;let i=n.offsetWidth,a=e+t.offsetWidth-i+I;return a>0?Math.max(I,e-a):Math.max(I,e)}nudgeRightAlignment(e,t,n){let{nudgeAlignIntoViewport:r}=this.props;if(!r)return 0;let i=t.offsetWidth;return Math.min(n.offsetWidth-e-i-I,0)}getHorizontalAlignmentStyle(e,t,n,r){let{align:i,offset:a=0}=this.props;switch(i){case\"left\":{let i=this.formatDimension(this.nudgeLeftAlignment(e.left+a,t,n)),o=this.formatDimension(e.left+a)-i;return{style:y(E({},r),{left:i}),nudge:o}}case\"right\":{let i=this.formatDimension(n.offsetWidth-e.right-a),o=this.nudgeRightAlignment(i,t,n);return{style:y(E({},r),{right:i+o}),nudge:0}}case\"center\":{let i=e.left+(e.width-t.offsetWidth)/2+a,o=this.formatDimension(this.nudgeLeftAlignment(i,t,n)),s=this.formatDimension(i)-o;return{style:y(E({},r),{left:o}),nudge:s}}default:throw Error(\"Unsupported align: \".concat(i))}}nudgeTopAlignment(e,t,n){let{nudgeAlignIntoViewport:r}=this.props;if(!r)return e;if(e<0)return 0;let i=t.getBoundingClientRect().height,a=e+i-n.offsetHeight+I;return a>0?Math.max(I,e-a):e}nudgeBottomAlignment(e,t,n){let{nudgeAlignIntoViewport:r}=this.props,i=n.offsetHeight,a=i-e;if(!r)return a;let o=a+t.offsetHeight-i+I;return o>0?Math.max(I,a-o):a}getVerticalAlignmentStyle(e,t,n,r){let{align:i,offset:a=0}=this.props;switch(i){case\"top\":{let i=this.formatDimension(this.nudgeTopAlignment(e.top+a,t,n)),o=this.formatDimension(e.top+a)-i;return{style:y(E({},r),{top:i}),nudge:o}}case\"bottom\":{let i=this.formatDimension(this.nudgeBottomAlignment(e.bottom+a,t,n)),o=this.formatDimension(e.bottom+a)-i;return{style:y(E({},r),{bottom:i}),nudge:o}}case\"center\":{let i=e.top+(e.height-t.offsetHeight)/2+a,o=this.formatDimension(this.nudgeTopAlignment(i,t,n)),s=this.formatDimension(i)-o;return{style:y(E({},r),{top:o}),nudge:s}}default:throw Error(\"Unsupported align: \".concat(i))}}calculatePositionStyle(e,t,n,r){let{spacing:i=0}=this.props,a=w(this.props),o=n.getBoundingClientRect(),s=A(a,o.left,o.top);switch(e){case\"top\":return this.getHorizontalAlignmentStyle(s,t,n,{bottom:n.offsetHeight-s.top+i});case\"bottom\":return this.getHorizontalAlignmentStyle(s,t,n,{top:s.bottom+i});case\"left\":return this.getVerticalAlignmentStyle(s,t,n,{right:n.offsetWidth-s.left+i});case\"right\":return this.getVerticalAlignmentStyle(s,t,n,{left:s.right+i});case\"overlap_vertical\":return this.getHorizontalAlignmentStyle(s,t,n,{[r]:0});case\"overlap_horizontal\":return this.getVerticalAlignmentStyle(s,t,n,{[r]:I});case\"center\":return this.getVerticalAlignmentStyle(s,t,n,{left:s.left+s.width/2-t.offsetWidth/2+i});case\"window_center\":return this.getVerticalAlignmentStyle(s,t,n,{left:Math.max((window.innerWidth-t.offsetWidth)/2,0)});default:throw Error(\"Unexpected position: \".concat(e))}}calculateState(){let{position:e,autoInvert:t}=this.props,n=this.elementRef.current;c()(null!=n,\"Unexpected null element\");let r=(0,h.wL)(n),{style:i,nudge:a}=this.calculatePositionStyle(e,n,r),o={position:e,style:i,nudge:a},s=C(e,i,n,r),l=s,u=null,d=0;if(t&&s<0){let t=N(e),i=this.calculatePositionStyle(t,n,r);u=i.style,d=i.nudge;let a=C(t,u,n,r);if(a>s&&(o={position:t,style:u,nudge:d},l=a),s<0&&a<0){let i,a=o.position;if((i=\"top\"===a||\"bottom\"===a?\"overlap_vertical\":\"left\"===a||\"right\"===a?\"overlap_horizontal\":a)!==e&&i!==t){let e=this.calculatePositionStyle(i,n,r,a),t=C(N(a),e.style,n,r);t>l&&(o=E({position:a},e),l=t)}}}return P(l,n,o)}componentDidMount(){var e,t;let{targetRef:n,onMount:r}=this.props;this.setState(E({isPositioned:!0},this.calculateState()));let i=this.elementRef.current;c()(null!=i,\"Missing elementRef\"),null!=n.current&&O.set(i,n.current),null==i||null==(t=i.ownerDocument)||null==(e=t.defaultView)||e.addEventListener(\"resize\",this.updatePosition),null==r||r()}componentDidUpdate(e,t){if(T(e)===T(this.props)&&R(e,this.props)||this.updatePosition(),t.position!==this.state.position){var n,r;null==(n=(r=this.props).onPositionChange)||n.call(r,this.state.position)}}componentWillUnmount(){var e,t,n,r;let i=this.elementRef.current;c()(null!=i,\"Missing elementRef\"),O.delete(i),null==i||null==(t=i.ownerDocument)||null==(e=t.defaultView)||e.removeEventListener(\"resize\",this.updatePosition),null==(n=(r=this.props).onUnmount)||n.call(r)}calculateMaxHeight(){let e=this.elementRef.current;if(null==e)return;let t=(0,h.wL)(e),n=this.state.style;return null!=n.top?Math.max(0,t.offsetHeight-n.top-I):null!=n.bottom?Math.max(0,t.offsetHeight-n.bottom-I):Math.max(0,t.offsetHeight-2*I)}render(){let{id:e,className:t,children:n,fixed:r,disablePointerEvents:a,clickTrap:o=!1}=this.props,{position:l,isPositioned:c,nudge:u}=this.state,_=this.calculateMaxHeight();return(0,i.jsx)(\"div\",{className:s()({[m.clickTrapContainer]:!0,[m.trapClicks]:o}),children:(0,i.jsx)(f.C1,{children:o=>{let{disableAdaptiveTheme:f}=o;return(0,i.jsx)(p.f,{disableAdaptiveTheme:f,children:o=>(0,i.jsx)(\"div\",{id:e,className:s()(t,o,m.layer,{[m.emptyError]:!1,[m.disabledPointerEvents]:a}),style:y(E({position:r?\"fixed\":\"absolute\"},this.state.style),{\"--reference-position-layer-max-height\":null!=_?\"\".concat(_,\"px\"):void 0}),ref:this.elementRef,children:(0,i.jsx)(d.Jc,{containerRef:this.elementRef,children:n({position:l,nudge:u,isPositioned:c},this.updatePosition)})})})}})})}constructor(...e){super(...e),g(this,\"elementRef\",a.createRef()),g(this,\"state\",{style:Object.freeze({}),position:this.props.autoInvert?null:this.props.position,nudge:0,isPositioned:!1}),g(this,\"updatePosition\",()=>{this.setState(this.calculateState())})}}"},{"code":"function S(e,t){if(e.contains(t))return!0;let n=v(t);for(;null!=n;){let t=O.get(n);if(null==t)break;if(e.contains(t))return!0;n=v(t)}return!1}"}]