[{"code":"class g extends i.A{get guildId(){return this.getState().guildId}get channelId(){return this.getState().channelId}computeVoiceFlags(){var e,t,n;let i=0,f=u.Q$.getSetting();i=(0,r.lA)(i,h.Ajs.ALLOW_VOICE_RECORDING,f);let _=(0,o.A)(p.A),m=(0,s.TD)()&&((null==(e=d.A.getCurrentUserActiveStream())?void 0:e.state)===h.XYD.ACTIVE||(null==(t=d.A.getCurrentUserActiveStream())?void 0:t.state)===h.XYD.PAUSED),g=(0,s.Ao)()&&(null==(n=l.Ay.getVisibleGame())?void 0:n.windowHandle)!=null;i=(0,r.lA)(i,h.Ajs.CLIPS_ENABLED,m||g);let{enableViewerClipping:E}=c.A.getCurrentConfig({location:\"computeVoiceFlags\"},{autoTrackExposure:!1}),y=E&&_&&a.A.getSettings().viewerClipsEnabled;return(0,r.lA)(i,h.Ajs.ALLOW_ANY_VIEWER_CLIPS,y)}getInitialState(){return{guildId:null,channelId:null,selfMute:p.A.isSelfMute(),selfDeaf:p.A.isSelfDeaf(),selfVideo:p.A.isVideoEnabled(),preferredRegion:null,preferredRegions:null,videoStreamParameters:null,flags:0}}getNextState(e){let{guildId:t,channelId:n}=e;return{guildId:t,channelId:n,selfMute:p.A.isSelfMute(),selfDeaf:p.A.isSelfDeaf(),selfVideo:p.A.isVideoEnabled(),preferredRegion:_.A.getPreferredRegion(),preferredRegions:_.A.getPreferredRegions(),videoStreamParameters:p.A.getVideoStreamParameters(),flags:this.computeVoiceFlags()}}shouldCommit(){return this.socket.isSessionEstablished()}didCommit(e){var t;let{guildId:n,channelId:r,selfMute:i,selfDeaf:a,selfVideo:o,preferredRegion:s,preferredRegions:l,videoStreamParameters:c,flags:u=0}=e;o&&(null==(t=f.A.getChannel(r))?void 0:t.type)===h.rbe.GUILD_STAGE_VOICE?this.socket.voiceStateUpdate({guildId:n,channelId:r,selfMute:i,selfDeaf:a,selfVideo:o,preferredRegion:s,preferredRegions:l,videoStreamParameters:c,flags:u}):this.socket.voiceStateUpdate({guildId:n,channelId:r,selfMute:i,selfDeaf:a,selfVideo:o,preferredRegion:s,preferredRegions:l,flags:u})}constructor(e){super(),m(this,\"socket\",void 0),this.socket=e}}"}]