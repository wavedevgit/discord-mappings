[{"code":"function P(e,t={}){return w(e)?(t.async=!0,R(e,t).then(e=>Z(e,t))):U(e)?(t.async=!0,G(e).then(e=>Z(e,t))):Z(e,t)}"},{"code":"function V(e,{expanded:t=!1,async:n=!1,includeUnknown:i=!1,domParser:o}={expanded:!1,async:!1,includeUnknown:!1,domParser:void 0}){let C=!1,A={},N=[],{fileType:P,fileDataOffset:w,jfifDataOffset:R,tiffHeaderOffset:D,iptcDataOffset:x,xmpChunks:L,iccChunks:j,mpfDataOffset:M,pngHeaderOffset:k,pngTextChunks:U,pngChunkOffsets:G,vp8xChunkOffset:Z,gifHeaderOffset:F}=s.Z.parseAppMarkers(e,n);if(a.Z.USE_JPEG&&a.Z.USE_FILE&&H(w)){C=!0;let n=u.Z.read(e,w);t?A.file=n:A=(0,r.wB)({},A,n)}if(a.Z.USE_JPEG&&a.Z.USE_JFIF&&Y(R)){C=!0;let n=d.Z.read(e,R);t?A.jfif=n:A=(0,r.wB)({},A,n)}if(a.Z.USE_EXIF&&W(D)){C=!0;let{tags:n,byteOrder:s}=l.Z.read(e,D,i);if(n.Thumbnail&&(A.Thumbnail=n.Thumbnail,delete n.Thumbnail),t?(A.exif=n,K(A)):A=(0,r.wB)({},A,n),a.Z.USE_TIFF&&a.Z.USE_IPTC&&n[\"IPTC-NAA\"]&&!z(x)){let e=f.Z.read(n[\"IPTC-NAA\"].value,0,i);t?A.iptc=e:A=(0,r.wB)({},A,e)}if(a.Z.USE_TIFF&&a.Z.USE_XMP&&n.ApplicationNotes&&!q(L)){let e=p.Z.read((0,r.nZ)(n.ApplicationNotes.value),void 0,o);t?A.xmp=e:(delete e._raw,A=(0,r.wB)({},A,e))}if(a.Z.USE_PHOTOSHOP&&n.ImageSourceData&&n.PhotoshopSettings){let e=_.Z.read(n.PhotoshopSettings.value,i);t?A.photoshop=e:A=(0,r.wB)({},A,e)}if(a.Z.USE_TIFF&&a.Z.USE_ICC&&n.ICC_Profile&&!Q(j)){let e=h.Z.read(n.ICC_Profile.value,[{offset:0,length:n.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?A.icc=e:A=(0,r.wB)({},A,e)}if(a.Z.USE_MAKER_NOTES&&n.MakerNote){if(X(n)){let a=m.Z.read(e,D,n.MakerNote.__offset,s,i);t?A.makerNotes=a:A=(0,r.wB)({},A,a)}else if(J(n)){let a=g.Z.read(e,D,n.MakerNote.__offset,i);t?A.makerNotes=a:A=(0,r.wB)({},A,a)}}n.MakerNote&&delete n.MakerNote.__offset}if(a.Z.USE_JPEG&&a.Z.USE_IPTC&&z(x)){C=!0;let n=f.Z.read(e,x,i);t?A.iptc=n:A=(0,r.wB)({},A,n)}if(a.Z.USE_XMP&&q(L)){C=!0;let n=p.Z.read(e,L,o);t?A.xmp=n:(delete n._raw,A=(0,r.wB)({},A,n))}if((a.Z.USE_JPEG||a.Z.USE_WEBP)&&a.Z.USE_ICC&&Q(j)){C=!0;let t=h.Z.read(e,j,n);t instanceof Promise?N.push(t.then(eo)):eo(t)}if(a.Z.USE_MPF&&$(M)){C=!0;let n=c.Z.read(e,M,i);t?A.mpf=n:A=(0,r.wB)({},A,n)}if(a.Z.USE_PNG&&a.Z.USE_PNG_FILE&&ee(k)){C=!0;let n=E.Z.read(e,k);t?(A.png=A.png?(0,r.wB)({},A.png,n):n,A.pngFile=n):A=(0,r.wB)({},A,n)}if(a.Z.USE_PNG&&et(U)){C=!0;let{readTags:t,readTagsPromise:r}=b.Z.read(e,U,n,i);es(t),r&&N.push(r.then(e=>e.forEach(es)))}if(a.Z.USE_PNG&&en(G)){C=!0;let n=y.Z.read(e,G);t?A.png=A.png?(0,r.wB)({},A.png,n):n:A=(0,r.wB)({},A,n)}if(a.Z.USE_WEBP&&er(Z)){C=!0;let n=O.Z.read(e,Z);t?A.riff=A.riff?(0,r.wB)({},A.riff,n):n:A=(0,r.wB)({},A,n)}if(a.Z.USE_GIF&&ei(F)){C=!0;let n=v.Z.read(e,F);t?A.gif=A.gif?(0,r.wB)({},A.gif,n):n:A=(0,r.wB)({},A,n)}let B=I.Z.get(A,t);B&&(t?A.composite=B:A=(0,r.wB)({},A,B));let ea=(a.Z.USE_JPEG||a.Z.USE_WEBP)&&a.Z.USE_EXIF&&a.Z.USE_THUMBNAIL&&S.Z.get(e,A.Thumbnail,D);if(ea?(C=!0,A.Thumbnail=ea):delete A.Thumbnail,P&&(t?(A.file||(A.file={}),A.file.FileType=P):A.FileType=P,C=!0),!C)throw new T.Z.MetadataMissingError;if(n)return Promise.all(N).then(()=>A);return A;function eo(e){t?A.icc=e:A=(0,r.wB)({},A,e)}function es(e){if(t){for(let t of[\"exif\",\"iptc\"]){let n=`__${t}`;e[n]&&(A[t]=A[t]?(0,r.wB)({},A.exif,e[n]):e[n],delete e[n])}A.png=A.png?(0,r.wB)({},A.png,e):e,A.pngText=A.pngText?(0,r.wB)({},A.png,e):e}else A=(0,r.wB)({},A,e.__exif?e.__exif:{},e.__iptc?e.__iptc:{},e),delete A.__exif,delete A.__iptc}}"}]