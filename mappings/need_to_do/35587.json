[{"code":"function y(){return{promotion:(0,i.bG)([_.A],()=>_.A.bogoPromotion)}}"},{"code":"function E(){let e=(0,i.bG)([_.A],()=>_.A.lastSeenOutboundPromotionStartDate),t=m((0,c.QQ)(),(0,i.bG)([s.A],()=>s.A.hasAnyUnexpiredOffer()),(0,u.d)(),{});return r.useMemo(()=>null==e?t:t.filter(t=>{let{startDate:n}=t;return new Date(n)>new Date(e)}),[t,e]).filter(e=>(0,f.OP)(e))}"},{"code":"function g(){let e=(0,i.bG)([_.A],()=>_.A.lastFetchedActivePromotions),t=(0,i.bG)([o.default],()=>o.default.getCurrentUser()),n=(0,c.QQ)(),g=(0,i.bG)([s.A],()=>s.A.hasAnyUnexpiredOffer()),E=(0,u.d)(),[y,b]=r.useState(!1),[O,v]=r.useState([]);r.useEffect(()=>{(null!=e||E)&&a.h.wait(()=>p.Ay.markOutboundPromotionsSeen())},[e,E]);let A=r.useCallback(e=>{v(t=>t.some(t=>{let{promotion:n}=t;return n.id===e.promotion.id})?t:[...t,e])},[]),I=l.Ay.isPremiumExactly(t,h.PremiumTypes.TIER_2),S=d.m.useExperiment({location:\"useOutboundPromotions\"},{autoTrackExposure:!1,disable:I}).enabled||I;r.useEffect(()=>{a.h.wait(()=>{S&&(null==e||E)&&p.Ay.fetchActivePromotions()})},[e,S,E]),r.useEffect(()=>{a.h.wait(()=>{(0,f.b3)().then(e=>{v(e),b(!0)}).catch(()=>{v([]),b(!0)})})},[]);let T={};for(let{code:e,promotion:t}of O)T[t.id]=e;let C=m(n,g,E,T),N=new Set(C.map(e=>{let{id:t}=e;return t}));return{promotionsLoaded:y&&(!S||null!=e||E),activeOutboundPromotions:C,claimedEndedOutboundPromotions:O.filter(e=>{let{promotion:t}=e;return!N.has(t.id)&&!1===(0,f.HB)({promotionPartner:t.outboundTitle,promotionType:t.promotionType})}).filter(e=>(0,f.OP)(e.promotion)),claimedOutboundPromotionCodeMap:T,addClaimedOutboundPromotionCode:A}}"}]