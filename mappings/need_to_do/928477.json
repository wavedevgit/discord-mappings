[{"code":"function k(e){let{parentChannel:t,parentMessageId:n,threadSettings:i,privateThreadMode:o,location:s,onThreadCreated:c,useDefaultThreadName:d,uploadHandler:f}=e;return r.useCallback(async(e,r,p)=>{var _;let h=null==n,m=L(i,o),g=null!=(_=i.name)?_:\"\";if(\"\"===g&&d){let e=M(t,n);g=\"\"!==e?e:R.intl.string(R.t[\"7Xm5QI\"])}let y=(0,T.WD)(t),O=E.Z.getChannel(S.default.castMessageIdAsChannelId(n)),v=await F(t,[],void 0,()=>{let e=null!=n?P.ANM.CHANNEL_MESSAGE_THREADS(t.id,n):P.ANM.CHANNEL_THREADS(t.id);return a.tn.post({url:e,body:{name:g,type:m?P.d4z.PRIVATE_THREAD:t.type===P.d4z.GUILD_ANNOUNCEMENT?P.d4z.ANNOUNCEMENT_THREAD:P.d4z.PUBLIC_THREAD,auto_archive_duration:y,location:s},rejectWithError:!1})});v!==O&&(l.Z.clearDraft(t.id,b.d.ThreadSettings),l.Z.clearDraft(t.id,b.d.FirstThreadMessage),null==c||c(v),(h||e.length>0||null!=r&&r.length>0||null!=p&&p.length>0)&&Z(v,e,r,p,f)),u.Z.clearAll(t.id,b.d.FirstThreadMessage)},[t,n,i,c,o,s,d,f])}"},{"code":"function M(e,t){var n,r,i,a,o,s,l;let c=null==t?null:y.Z.getMessage(e.id,t),u=null!=(o=null==c||null==(r=c.embeds)||null==(n=r[0])?void 0:n.rawTitle)?o:\"\",d=null!=(s=null==c||null==(a=c.poll)||null==(i=a.question)?void 0:i.text)?s:\"\";if(\"\"!==u)return j(u,40);{if(\"\"!==d)return j(d,80);let t=h.ZP.unparse(null!=(l=null==c?void 0:c.content)?l:\"\",e.id,!0),n=(0,A.Z)(t.split(\"\\n\")[0],!0);n=n.replace(/^[ #-]+/,\"\");let r=[];for(;;){let e=n.match(/(?:\\s|[!@#$%^&*()_\\-+={}[\\]:\";'<>?,./])+/);if(null==e||null==e.index){r.push(n);break}r.push(n.substring(0,e.index)),r.push(e[0]),n=n.substring(e.index+e[0].length)}let i=r[0];for(let e=1;e<r.length;e++){let t=i+r[e];if(t.length>40)break;i=t}return j(i,40)}}"},{"code":"function G(e){let{parentChannel:t,name:n,appliedTags:o,analyticsLocations:s,onThreadCreated:c,upload:d}=e;return r.useCallback(async(e,r,f)=>{let h,m=0,[E,y]=(0,g.Z)(e);E&&(e=y,m=(0,i.pj)(m,P.iLy.SUPPRESS_NOTIFICATIONS));let O=(0,T.WD)(t,null),v=P.ANM.CHANNEL_THREADS(t.id)+\"?use_nested_fields=true\",S={name:n,auto_archive_duration:O,applied_tags:o,message:{content:e,sticker_ids:r,flags:0!==m?m:void 0}};if(null!=f&&f.length>0)try{let e=await d(f);h=e.uploaderFile,S.message.attachments=e.files.map((e,t)=>(0,I.B)(e,t))}catch(i){let{file:e,code:n,reason:r}=i;throw(0,_.A)({file:e,guildId:t.getGuildId(),analyticsLocations:null!=s?s:[],code:n,reason:r}),i}let C=await F(t,s,h,()=>a.tn.post({url:v,body:S,rejectWithError:!1}));return l.Z.clearDraft(t.id,b.d.ThreadSettings),l.Z.clearDraft(t.id,b.d.FirstThreadMessage),u.Z.clearAll(t.id,b.d.FirstThreadMessage),(0,p.Je)({guildId:t.guild_id,channelId:t.id,postId:C.id}),null==c||c(C),C},[t,n,o,c,s,d])}"},{"code":"function U(e,t,n,r,i){return F(e,[],void 0,()=>a.tn.post({url:P.ANM.CHANNEL_THREADS(e.id),body:{name:t,type:n,auto_archive_duration:r,location:i},rejectWithError:!1}))}"},{"code":"function L(e,t){var n;return 3===t||null!=(n=e.isPrivate)&&n}"},{"code":"function x(e){let t=(0,C.NE)(e);return(0,C.Xu)(e)?t?2:3:1}"}]