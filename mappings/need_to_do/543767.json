[{"code":"function S(e){let t=(0,r.useRef)(e);(0,r.useEffect)(()=>{t.current=e});let n=JSON.stringify(e);return v(e,(0,r.useCallback)(()=>O(t.current),[n]))}"},{"code":"function A(e){let t=(0,r.useRef)(e);(0,r.useEffect)(()=>{t.current=e});let n=JSON.stringify(e);return v(e,(0,r.useCallback)(()=>b(t.current),[n]))}"},{"code":"function I(e){if(\"subscriptionId\"in e&&null==e.subscriptionId){let{subscriptionId:t}=e;e=m(e,[\"subscriptionId\"])}let t=(0,r.useRef)(e);(0,r.useEffect)(()=>{t.current=e});let n=JSON.stringify(e),i=(0,r.useCallback)(()=>{let{current:e}=t;return\"subscriptionId\"in e?y(e):\"items\"in e?E(e):null},[n]);return v(e,i)}"},{"code":"async function y(e){let{subscriptionId:t,items:n,paymentSourceId:r,renewal:i,currency:a,applyEntitlements:u=!1,analyticsLocations:f,analyticsLocation:_,userDiscountOfferId:g}=e;null!=n&&(n=(0,c.qn)(n));let E={items:null==n?void 0:n.map(e=>{let{planId:t}=e;return h(p({},m(e,[\"planId\"])),{plan_id:t})}),payment_source_id:r,renewal:i,apply_entitlements:u,currency:a,user_discount_offer_id:g};try{let e=await s.Bo.patch({url:d.Rsh.BILLING_SUBSCRIPTION_PREVIEW(t),query:{location:_,location_stack:f},body:E,oldFormErrors:!0,rejectWithError:!1});return l.A.createInvoiceFromServer(e.body)}catch(e){throw new o.Ey(e)}}"},{"code":"function T(e){let t=e.subscriptionPlanPrice;return e.discounts.forEach(n=>{let r=n.amount/e.quantity;t-=r}),t}"}]