[{"code":"(e,t)=>{var n;let{premiumTrialOffer:r,subscriptionPlan:c,overrideAmount:u,isPrepaidPaymentSource:d,currency:f}=t,p=null!=c?c:s.A.get(e.subscriptionPlanId),_=null==r?void 0:r.subscription_trial;i()(null!=p,\"Missing subscriptionPlan\");let h=y(e,p,d,(0,o.re)({intervalType:null==_?void 0:_.interval,intervalCount:null==_?void 0:_.interval_count})),m=null!=u?u:e.amount,g=(0,l.$g)(m,f),E=d?g:(0,l.CE)(g,p.interval,p.intervalCount),b=null!=(n=e.discounts)?n:[],O=b.find(e=>e.type===a.iS.SUBSCRIPTION_PLAN),v=b.find(e=>e.type===a.iS.PREMIUM_TRIAL),A=b.find(e=>e.type===a.iS.ENTITLEMENT),I=b.reduce((e,t)=>e+t.amount,0);return{label:h,value:E,amount:m,amountWithoutDiscount:e.amount+I,discountAmountOff:I,formattedPrice:g,subscriptionPlan:p,subscriptionTrial:_,trialDiscount:v,subscriptionDiscount:O,entitlementDiscount:A}}"},{"code":"e=>h(_((0,c.Z)(e.invoiceItems)))"},{"code":"(e,t)=>{let n=(0,c.Z)(e.invoiceItems),r=n.find(e=>e.subscriptionPlanId===t.id);i()(null!=r,\"Expected newPlanInvoiceItem\");let s=n.find(e=>!(0,o.z4)(e.subscriptionPlanId)&&e.amount<0),d=n.find(e=>null==e.subscriptionPlanId&&null!=e.discounts&&e.discounts.find(e=>e.type===a.iS.PREMIUM_LEGACY_UPGRADE_PROMOTION)),f=g(r,a.iS.PREMIUM_TRIAL),_=E(r,a.iS.SUBSCRIPTION_PLAN),h=r.quantity*_,m=r.amount+(null!=s?s.amount:0)-h+(null!=d?d.amount:0),y=n.filter(e=>e.subscriptionPlanId===u.gD.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===u.gD.PREMIUM_YEAR_GUILD),b=y.reduce((e,t)=>e+t.amount,0),O=[];return 0===m||f||O.push({id:\"base-plan-adjustment\",label:p.intl.formatToPlainString(p.t.ZSVged,{planName:(0,o.ys)(t.id)?(0,o.RH)(t.id):t.name}),tooltipText:p.intl.string(p.t.JmwQJM),tooltipAriaLabel:\"\",value:(0,l.$g)(m,e.currency),amount:m}),0!==b&&O.push({id:\"guild-subscription-adjustment\",label:p.intl.string(p.t[\"+as5ZZ\"]),tooltipText:p.intl.format(p.t.UDop9c,{}),tooltipAriaLabel:p.intl.string(p.t.P68ePO),value:(0,l.$g)(b,e.currency),amount:b}),{newPlanInvoiceItem:r,basePlanFullAmount:h,basePlanAdjustment:m,guildSubscriptionAdjustment:b,isTrialItem:f,invoiceAdjustmentDisplayItems:O,guildSubscriptionInvoiceItems:y,promotionItem:d,basePlanCreditItem:s}}"}]