[{"code":"(e,t)=>{var n;let{premiumTrialOffer:r,subscriptionPlan:c,overrideAmount:u,isPrepaidPaymentSource:d,currency:f}=t,p=null!=c?c:o.A.get(e.subscriptionPlanId),_=null==r?void 0:r.subscription_trial;i()(null!=p,\"Missing subscriptionPlan\");let h=A(e,p,d,(0,s.re)({intervalType:null==_?void 0:_.interval,intervalCount:null==_?void 0:_.interval_count})),m=null!=u?u:e.amount,g=(0,l.$g)(m,f),E=d?g:(0,l.CE)(g,p.interval,p.intervalCount),y=null!=(n=e.discounts)?n:[],b=y.find(e=>e.type===a.iS.SUBSCRIPTION_PLAN),O=y.find(e=>e.type===a.iS.PREMIUM_TRIAL),v=y.find(e=>e.type===a.iS.ENTITLEMENT),I=y.reduce((e,t)=>e+t.amount,0);return{label:h,value:E,amount:m,amountWithoutDiscount:e.amount+I,discountAmountOff:I,formattedPrice:g,subscriptionPlan:p,subscriptionTrial:_,trialDiscount:O,subscriptionDiscount:b,entitlementDiscount:v}}"},{"code":"(e,t)=>{let n=null!=t?(0,s.Ge)(t):null,{intervalType:r,intervalCount:i}=(0,s.Ge)(e),a=null!=n&&(n.intervalType!==r||n.intervalCount!==i);return y(E((0,c.Z)(e.invoiceItems))).map(e=>g(h({},e),{showGuildSubscriptionAdjustmentTooltip:a&&(e.subscriptionPlanId===u.gD.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===u.gD.PREMIUM_YEAR_GUILD||e.subscriptionPlanId===u.gD.PREMIUM_3_MONTH_GUILD||e.subscriptionPlanId===u.gD.PREMIUM_6_MONTH_GUILD)}))}"},{"code":"(e,t)=>{let n=(0,c.Z)(e.invoiceItems);return{subscriptionPlanInvoiceItem:n.find(e=>e.subscriptionPlanId===t.id),coalescedInvoiceItems:n}}"},{"code":"(e,t)=>{let{subscriptionPlanInvoiceItem:n,coalescedInvoiceItems:r}=S(e,t);i()(null!=n,\"Expected newPlanInvoiceItem\");let o=r.find(e=>!(0,s.z4)(e.subscriptionPlanId)&&e.amount<0),c=r.find(e=>null==e.subscriptionPlanId&&null!=e.discounts&&e.discounts.find(e=>e.type===a.iS.PREMIUM_LEGACY_UPGRADE_PROMOTION)),d=O(n,a.iS.PREMIUM_TRIAL),f=v(n,a.iS.SUBSCRIPTION_PLAN),_=n.quantity*f,h=n.amount+(null!=o?o.amount:0)-_+(null!=c?c.amount:0),m=r.filter(e=>e.subscriptionPlanId===u.gD.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===u.gD.PREMIUM_YEAR_GUILD),g=m.reduce((e,t)=>e+t.amount,0),E=[];return 0===h||d||E.push({id:\"base-plan-adjustment\",label:p.intl.formatToPlainString(p.t.ZSVged,{planName:(0,s.ys)(t.id)?(0,s.RH)(t.id):t.name}),tooltipText:p.intl.string(p.t.JmwQJM),tooltipAriaLabel:\"\",value:(0,l.$g)(h,e.currency),amount:h}),0!==g&&E.push({id:\"guild-subscription-adjustment\",label:p.intl.string(p.t[\"+as5ZZ\"]),tooltipText:p.intl.format(p.t.UDop9c,{}),tooltipAriaLabel:p.intl.string(p.t.P68ePO),value:(0,l.$g)(g,e.currency),amount:g}),{newPlanInvoiceItem:n,basePlanFullAmount:_,basePlanAdjustment:h,guildSubscriptionAdjustment:g,isTrialItem:d,invoiceAdjustmentDisplayItems:E,guildSubscriptionInvoiceItems:m,promotionItem:c,basePlanCreditItem:o}}"}]