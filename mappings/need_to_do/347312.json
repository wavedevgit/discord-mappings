[{"code":"function G(e){let{className:t,waveform:n,currentTime:a,duration:s,played:l,playing:d,onDrag:f,onDragStart:_,onDragEnd:m}=e,{ref:g,width:E}=(0,c.ZP)(),b=i.useMemo(()=>w(s),[s]),y=i.useRef(void 0),O=j(n,E),v=i.useRef(l),I=i.useRef(d),C=i.useRef(null),N=window.devicePixelRatio,{lastBackgroundFillColor:P,backgroundFillColor:R,lastActiveFillColor:D,activeFillColor:M,lastInactiveFillColor:G,inactiveFillColor:Z}=k(l,d),F={currentTime:a,duration:s,played:l},B=i.useRef(F);i.useEffect(()=>{B.current=F}),i.useEffect(()=>{let{currentTime:e,duration:t,played:n}=B.current,r=x({showAll:!n,currentTime:e,duration:t,numSegments:O.length});y.current=O.map((e,t)=>new p.Z(t<r?e:0))},[O]),i.useEffect(()=>{let e=y.current;if(null==e)return;let t=x({showAll:!l,currentTime:a,duration:s,numSegments:O.length});for(let n=0;n<e.length;n++){let r=e[n];if(n<t){r.animateTo(O[n]);continue}r.reset()}},[O,a,s,l]),i.useEffect(()=>{let e=null;function t(n){let r=g.current,i=null==r?void 0:r.getContext(\"2d\"),a=y.current;if(null==r||null==i||null==a)return;let o=!1;(v.current!==l||I.current!==d)&&(v.current=l,I.current=d,C.current=n),null!=C.current&&n>C.current+A&&(C.current=null);let s=r.height/N;i.clearRect(0,0,r.width,r.height),i.beginPath();let[c,u]=U(P,R,n,C.current);o=o||u,i.fillStyle=c;for(let e=0;e<O.length;e++)L({context:i,devicePixelRatio:N,canvasHeight:s,segmentValue:O[e],segmentIndex:e,constrainMin:!0});i.fill();let[f,p]=U(G,Z,n,C.current);o=o||p;let[_,h]=U(D,M,n,C.current);o=o||h;for(let e=0;e<a.length;e++){let t=a[e],n=Math.max(t.getCurrentValue(),O[e]-.1);i.beginPath(),i.fillStyle=t.isReset?f:_,L({context:i,devicePixelRatio:N,canvasHeight:s,segmentValue:n,segmentIndex:e,constrainMin:!t.isReset}),o=o||t.isAnimating(),i.fill()}o&&(e=requestAnimationFrame(t))}return e=requestAnimationFrame(t),()=>{null!=e&&cancelAnimationFrame(e)}},[g,N,O,E,a,s,l,d,P,R,D,M,G,Z]);let[,V]=(0,u.Z)({ref:g,onDrag:f,onDragStart:_,onDragEnd:m});return(0,r.jsx)(\"canvas\",{onMouseDown:V,className:o()(h.canvas,t),style:{width:b},ref:g,height:(S+2*T)*window.devicePixelRatio,width:(null!=E?E:0)*window.devicePixelRatio})}"}]