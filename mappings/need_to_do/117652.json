[{"code":"e=>{let{handleStepChange:t,handleClose:n}=e,{customGiftMessage:s=\"\",setCustomGiftMessage:l,giftRecipientError:_,setGiftRecipientError:E,validatingGiftRecipient:y,giftRecipient:A,recommendedGiftSkuIds:N,giftingOrigin:L,setValidatingGiftRecipient:j}=(0,T.wD)(),{selectedSkuId:M,setSelectedSkuId:k,selectedSkuPricePreview:U,paymentSourceId:G,skuPricePreviewsById:B,skusById:V}=(0,C.JL)(),H=(0,i.e7)([O.default],()=>O.default.getCurrentUser()),{enabled:Y,giftRecommendationAlgorithm:W}=h.G.useExperiment({location:\"CollectiblesPaymentModalGiftCustomizationStep\"},{autoTrackExposure:!1}),K=(0,p.Z)(),z=Y&&L===w.Wt.DM_CHANNEL,q=W===h.u.POPULAR?R.intl.string(R.t.Kwgrrr):R.intl.string(R.t.r1huYR),Q=async(e,t)=>{j(!0),null!=_&&E(),await (0,c.B1)(e.id,t)||E(R.intl.string(R.t[\"4kgVqQ\"])),j(!1)};(0,o.ZP)(()=>{null!=M&&null!=A&&(L!==w.Wt.DM_CHANNEL_WISHLIST&&S.default.track(P.rMx.COLLECTIBLES_GIFTING_SHOP_ITEM_CLICKED,{sku_id:M}),Q(A,M))});let X=e=>{L!==w.Wt.DM_CHANNEL_WISHLIST&&S.default.track(P.rMx.COLLECTIBLES_GIFTING_SHOP_ITEM_CLICKED,{sku_id:e}),null!=A&&Q(A,e),k(e)},J=e=>{let t=B[e],n=null;if(null!=t){var i;n=null!=G&&null!=(i=t[G])?i:t[v.c]}if(null==n)return;let a=(0,I.T4)(n.amount,n.currency);return(0,r.jsx)(d.Z,{skuId:e,price:a,isSelected:e===M,onSelect:e=>X(e),className:D.recommendedGiftPreview},e)},$=()=>(0,r.jsx)(m.Z,{onTextChange:e=>null==l?void 0:l(e),pendingText:s,currentText:s,disableThemedBackground:!0,className:D.customGiftMessageWrapper,innerClassName:D.customGiftMessage});return{renderLeftColumn:()=>z?(0,r.jsxs)(\"div\",{className:D.bodyColumnLeft,children:[(0,r.jsx)(a.Text,{variant:\"text-xs/bold\",color:\"text-default\",className:D.selectGiftTitle,children:q.toLocaleUpperCase()}),N.map(e=>J(e)),(0,r.jsx)(Z,{handleClose:n})]}):(0,r.jsx)(\"div\",{className:D.bodyColumnMiddle,children:(0,r.jsx)(g.q,{isShopGift:!0})}),renderRightColumn:()=>{if(z)return(0,r.jsxs)(\"div\",{className:D.bodyColumnRight,children:[(0,r.jsx)(b.s,{giftRecipient:A}),(0,r.jsx)(g.q,{isShopGift:!0,className:x.adjustedGiftMainAnimation,optionsContainerClassName:x.adjustedGiftBoxOptionContainer}),$()]});let e=(0,u.v5)({selectedSkuPricePreview:U,paymentSourceId:G,selectedSkuId:M,skuPricePreviewsById:B,skusById:V,formatPrice:I.T4});return L===w.Wt.USER_PROFILE_WISHLIST||L===w.Wt.DM_CHANNEL_WISHLIST?(0,r.jsxs)(\"div\",{className:D.bodyColumnRight,children:[(0,r.jsx)(b.s,{giftRecipient:A}),$(),null!=e&&null!=M&&(0,r.jsx)(d.Z,{skuId:M,price:e,className:D.wishlistGiftPreview,previewHeaderClassName:D.wishlistGiftPreviewHeader,isSelected:!0,shouldDisplayHeader:!0,hideProfilePreview:!0}),(0,r.jsx)(\"div\",{className:D.wishlistGiftPreviewFooter,children:(0,r.jsx)(F,{handleClose:n,selectedSkuId:M})})]}):(0,r.jsxs)(\"div\",{className:D.bodyColumnRight,children:[(0,r.jsx)(f.Z,{selectedSkuId:M,recipients:K,className:D.sendTo,validateSelectedGift:Q}),$(),null!=e&&(0,r.jsx)(d.Z,{skuId:M,price:e,className:D.giftPreview,isSelected:!0,shouldDisplayHeader:!0})]})},onStepChange:t,onBackClick:n,ctaDisabled:null!=_||null==A||A.id===(null==H?void 0:H.id)||s.length>w.$n,loading:y}}"}]