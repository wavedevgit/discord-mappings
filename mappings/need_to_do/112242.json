[{"code":"function G(e){let{hasLegalTermsFlash:t,legalTermsNodeRef:n,onPaymentSourceChange:a,handlePaymentSourceAdd:E}=e,{application:G,purchaseState:V,paymentSources:F,paymentSourceId:B,setHasAcceptedTerms:H,skusById:Y,skuPricePreviewsById:W,selectedSkuId:K,isEmbeddedIAP:z,purchaseType:q,purchasePreviewError:Z,devShelfFetchState:X,setPurchasePreviewError:Q,hasPaymentSources:J}=(0,R.P5)(),{isGift:$,giftRecipient:ee}=(0,w.Pv)(),et=$&&(0,N.Ik)(ee),{fetched:en,hasAlreadyLinked:er}=(0,g.RD)(G),{defaultPaymentSourceId:ei,hasFetchedPaymentSources:ea}=(0,c.cf)([I.A],()=>({defaultPaymentSourceId:I.A.defaultPaymentSourceId,hasFetchedPaymentSources:I.A.hasFetchedPaymentSources}));s()(null!=K,\"Expected selectedSkuId\");let es=Y[K],eo=null==es?void 0:es.eligiblePaymentGateways,el=W[K],ec=null!=B?B:S.B,eu=null!=el?el[ec]:null;s()(null!=es,\"SKU must exist and be fetched.\"),s()(null!=G,\"Application must exist.\");let ed=(0,c.bG)([m.A,T.A],()=>T.A.inTestModeForApplication(G.id)||m.A.inDevModeForApplication(G.id),[G.id]),ef=(0,c.bG)([v.A],()=>v.A.enabled),ep=o.M.EEA_COUNTRIES.has(A.A.ipCountryCodeWithFallback),e_=V===P.h.PURCHASING||V===P.h.COMPLETED,eh=(0,D.W)(F,B),em=null!=eh?eh.type:null;i.useEffect(()=>{ea&&B===ei&&ei!==S.B&&null==eu&&(0,d.QX)(es.applicationId,es.id,ei,{isGift:$}).then(()=>{Q(null)}).catch(e=>{Q(e)})},[ei,ea,B,es.applicationId,es.id,eu,Q,$]);let eg=null!=eo&&eo.length>0&&(B===S.B||null===em)&&J?b.f.SELECT_PAYMENT_METHOD:void 0,eE=es.productLine===j.EZt.SOCIAL_LAYER_GAME_ITEM,ey=et&&!eE;return(0,r.jsxs)(\"div\",{className:k.Du,children:[(0,r.jsx)(b.j,{paymentRestrictionBannerType:eg}),ed?(0,r.jsx)(p.A,{icon:(0,u.kHD)(C.A),iconSize:p.A.Sizes.SMALL,color:p.A.Colors.WARNING,className:k.QK,children:M.intl.string(M.t.OvMyMd)},\"TEST_MODE\"):null,(0,l.Lt)(G.flags,j.gfo.EMBEDDED)&&X===m.$.ERROR?(0,r.jsx)(p.A,{icon:(0,u.kHD)(C.A),iconSize:p.A.Sizes.SMALL,color:p.A.Colors.ERROR,className:k.QK,children:M.intl.string(M.t.tAmECt)},\"DEV_SHELF_ERROR\"):null,(0,r.jsx)(U,{application:G,sku:es,isEmbeddedIAP:z}),ey&&(0,r.jsx)(x.A,{sku:es}),null!=ee?(0,r.jsx)(O.Z,{giftRecipient:ee}):null,(0,r.jsx)(u.D0$,{label:$?M.intl.string(M.t.PEjaCx):M.intl.string(M.t.sail9P),children:null!=eu?(0,r.jsx)(L.h,{sku:es,skuPricePreview:eu,application:G}):null==Z?(0,r.jsx)(u.y$y,{type:u.y$y.Type.WANDERING_CUBES,className:k.fx}):(0,r.jsx)(L.U,{sku:es,value:\"\"})}),(0,r.jsx)(_.Ay,{label:M.intl.string(M.t[\"mmDvV+\"]),paymentSources:Object.values(F),selectedPaymentSourceId:B,onChange:a,onPaymentSourceAdd:E,hidePersonalInformation:ef,paymentGatewayRestrictions:eo}),(0,r.jsxs)(y.A,{isActive:t,ref:n,children:[(0,r.jsx)(h.A,{onChange:H,forceShow:!0,showWithdrawalWaiver:ep,disabled:e_,subscriptionPlan:null,finePrintClassname:k.im,purchaseType:q,isGift:$,finePrint:(0,r.jsx)(f.A,{paymentSourceType:em,isEmbeddedIAP:z,purchaseType:q,productLine:es.productLine,isGift:$,applicationName:G.name,hasAlreadyLinked:!en||er})}),eE&&en&&!er&&!$&&(0,r.jsx)(\"div\",{className:k.lm,children:(0,r.jsx)(u.wx6,{type:\"warning\",children:M.intl.string(M.t[\"6fBC//\"])})})]})]})}"}]