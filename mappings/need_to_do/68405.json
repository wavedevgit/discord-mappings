[{"code":"function $(e){p.DZ.updateAsync(\"favoriteGifs\",t=>{e in t.gifs?delete t.gifs[e]:delete t.gifs[K(e)],h.default.track(b.rMx.GIF_UNFAVORITED,{total_num_favorited:i().size(t.gifs)})},y.fy.INFREQUENT_USER_ACTION)}"},{"code":"function V(e){let{type:t,index:n,offset:r,limit:i,results:a,totalResults:s,query:l,gifId:d}=e,f=(0,m._2)(_.Z.getAnalyticsID(),t,{offset:r,limit:i,results:a,totalResults:s});if(c.ZP.trackWithMetadata(b.rMx.SEARCH_RESULT_SELECTED,T(S({},f),{index_num:n,source_object:\"GIF Picker\",query:l})),null!=d){let e=(0,u.eE)();o.tn.post({url:b.ANM.GIFS_SELECT,body:{id:d,q:l,provider:e},oldFormErrors:!0,rejectWithError:!0})}}"},{"code":"function Y(){o.tn.get({url:b.ANM.GIFS_TRENDING,query:{provider:(0,u.eE)(),locale:f.default.locale,media_format:_.Z.getSelectedFormat()},oldFormErrors:!0,rejectWithError:!0}).then(e=>{let{body:t}=e,{categories:n,gifs:r}=t;l.Z.dispatch({type:\"GIF_PICKER_TRENDING_FETCH_SUCCESS\",trendingCategories:n,trendingGIFPreview:r[0]})})}"},{"code":"function W(e){let t=Date.now();M(b.wI2.TRENDING_GIFS),o.tn.get({url:b.ANM.GIFS_TRENDING_GIFS,query:{media_format:_.Z.getSelectedFormat(),provider:(0,u.eE)(),locale:f.default.locale,limit:e},oldFormErrors:!0,rejectWithError:!0}).then(n=>{let{body:r}=n;k(r,b.wI2.TRENDING_GIFS,{startTime:t,limit:e}),l.Z.dispatch({type:\"GIF_PICKER_QUERY_SUCCESS\",items:r})},()=>{l.Z.dispatch({type:\"GIF_PICKER_QUERY_FAILURE\"})})}"},{"code":"function H(){let e=(0,a.Z)().replace(P,\"\");c.ZP.trackWithMetadata(b.rMx.SEARCH_OPENED,{search_type:b.aib.GIF,load_id:e}),l.Z.wait(()=>{l.Z.dispatch({type:\"GIF_PICKER_INITIALIZE\",analyticsID:e})})}"},{"code":"function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var{startTime:r}=n,i=C(n,[\"startTime\"]);let a={offset:0,limit:null,totalResults:e.length},o=(0,m._2)(_.Z.getAnalyticsID(),t,T(S({},a,i),{results:e.length})),s=null==r?{}:{load_duration_ms:Date.now()-r};c.ZP.trackWithMetadata(b.rMx.SEARCH_RESULT_VIEWED,T(S({},o,s),{gif_provider:(0,u.eE)()}))}"},{"code":"function K(e){let t=g.Z.toURLSafe(e);return null==t?e:(0,d.MO)(t)?(0,d.q5)(t).toString():e}"},{"code":"function F(e){\"\"!==e&&null!=e&&o.tn.get({url:b.ANM.GIFS_SUGGEST,query:{q:e,provider:(0,u.eE)(),limit:5,locale:f.default.locale},oldFormErrors:!0,rejectWithError:!0}).then(t=>{let n=t.body;l.Z.dispatch({type:\"GIF_PICKER_SUGGESTIONS_SUCCESS\",query:e,items:n})})}"},{"code":"function M(e){let t=null!=e?{[e]:1}:{};c.ZP.trackWithMetadata(b.rMx.SEARCH_STARTED,{search_type:b.aib.GIF,load_id:_.Z.getAnalyticsID(),num_modifiers:Object.keys(t).length,modifiers:t,gif_provider:(0,u.eE)()})}"},{"code":"function J(e){p.DZ.updateAsync(\"favoriteGifs\",t=>{var n;let r=null!=(n=i().max(Object.values(t.gifs).map(e=>e.order)))?n:0,a=q(e),o=z(e)&&Q(a),l=o?X(a):a,c=o?s.EO.IMAGE:e.format;if(t.gifs[K(e.url)]=T(S({},e),{src:l,format:c,order:r+1}),s.wK.toBinary(t).length>y.vY)return E.Z.show({title:O.intl.string(O.t[\"+XYXtZ\"]),body:O.intl.string(O.t.YSDH9n)}),!1;let u=i().size(t.gifs);u>2&&(t.hideTooltip=!0),h.default.track(b.rMx.GIF_FAVORITED,{total_num_favorited:u})},y.fy.INFREQUENT_USER_ACTION)}"},{"code":"function B(){l.Z.dispatch({type:\"GIF_PICKER_QUERY\",query:\"\"})}"},{"code":"function Z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;\"\"===e?B():(l.Z.dispatch({type:\"GIF_PICKER_QUERY\",query:e}),n?U(e,t,r):G(e,t,r))}"}]