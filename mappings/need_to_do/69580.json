[{"code":"function es(e){let{label:t,title:n,subtitle:i,header:a,body:s,actions:l,nextStep:c,appDetails:u,hasContentBackground:d,noPadding:f,modalSize:p}=ec(er({},e)),_=v.w.useExperiment({location:\"oauth2_authorize\"}),h=null!=a||null!=s||null!=u?(0,r.jsxs)(\"div\",{className:et.authorize,children:[a,(0,r.jsxs)(\"div\",{className:et.contentWrapper,children:[(0,r.jsxs)(\"div\",{className:o()(et.content,d?et.contentBackground:null,f?et.noPadding:null),children:[s,null!=c||_.enabled?null:u]}),null==c&&_.enabled?(0,r.jsx)(\"div\",{className:o()(et.content,d?et.contentBackground:null,f?et.noPadding:null),children:u}):null]})]}):null;return(0,r.jsx)(q.j,ea(er({},e),{onClose:()=>{var t;return Promise.resolve(null==(t=e.onClose)?void 0:t.call(e))},size:p,actions:l,title:n,subtitle:i,\"aria-label\":t,children:h}))}"},{"code":"function eo(){let e=(0,s.TH)(),t=i.useMemo(()=>(0,M.y)(e.search),[e.search]);(0,O.Z)();let a=!e.search.includes(\"response_type\"),[o,l]=i.useState(!1),u=i.useRef(!1),[d,f]=i.useState(null),p=!c.tq&&!o&&(a||!x.default.isAuthenticated());if(i.useEffect(()=>{if(c.eL&&a){let t=new URL(\"discord://action/oauth2/authorize\");t.search=e.search,window.open(t.toString(),\"_self\")}else c.tq||!a&&x.default.isAuthenticated()||u.current||(u.current=!0,Promise.resolve().then(n.bind(n,536285)).then(t=>{let{default:n}=t;if(a)n.request(J.Etm.DEEP_LINK,{type:$.jE.OAUTH2,params:{search:e.search}}).then(e=>{f(null!=e&&e)}).catch(()=>f(!1)).then(()=>n.disconnect());else{f(!0);let t=new URLSearchParams(e.search);n.request(J.Etm.AUTHORIZE,{client_id:t.get(\"client_id\"),scope:t.get(\"scope\"),response_type:t.get(\"response_type\"),redirect_uri:t.get(\"redirect_uri\"),code_challenge:t.get(\"code_challenge\"),code_challenge_method:t.get(\"code_challenge_method\"),state:t.get(\"state\"),permissions:t.get(\"permissions\"),guild_id:t.get(\"guild_id\"),channel_id:t.get(\"channel_id\"),prompt:t.get(\"prompt\"),disable_guild_select:t.get(\"disable_guild_select\"),integration_type:t.get(\"integration_type\"),nonce:t.get(\"nonce\")}).then(e=>{let{location:t}=e;t&&(window.location.href=t)}).catch(()=>f(!1)).then(()=>n.disconnect())}}))},[e.search,a]),p&&!1!==d){let e;return e=!0===d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Dx,{children:ee.intl.string(ee.t.csrAMJ)}),(0,r.jsx)(C.DK,{children:a?ee.intl.string(ee.t[\"m1+IBn\"]):ee.intl.string(ee.t.kRzrSO)}),(0,r.jsx)(g.zxk,{onClick:()=>l(!0),variant:\"primary\",text:ee.intl.string(ee.t.fIv16B)})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Dx,{children:ee.intl.string(ee.t[\"Z+hCVU\"])}),(0,r.jsx)(E.$jN,{})]}),(0,r.jsx)(q.G,{removeChildWrapper:!0,children:(0,r.jsx)(\"div\",{className:et.deepLinkContainer,children:e})})}return(0,r.jsx)(q.G,{removeChildWrapper:!0,children:(0,r.jsx)(es,ea(er({transitionState:_.Dvm.ENTERED},t),{showLogout:!0,isExternalStandaloneOAuthPage:!0,hideHeader:!0}))})}"},{"code":"function ep(e){var t;let{hostname:n=\"\",host:r,pathname:i,search:a}=null!=(t=j.Z.toURLSafe(e))?t:{};return null!=i&&null!=a&&(j.Z.isDiscordHostname(n)||r===window.location.host)&&(i.startsWith(\"/api\".concat(J.ANM.OAUTH2_AUTHORIZE))||i.startsWith(J.Z5c.OAUTH2_AUTHORIZE))?(0,M.y)(a):null}"},{"code":"function ef(e,t){(0,m.openModal)(t=>(0,r.jsx)(es,ea(er({},t,e),{cancelCompletesFlow:!1,callback:eu.bind(null,e)})),{onCloseCallback:t})}"},{"code":"function ed(e,t){if((0,P.g)())return void A.Z.openCreateGuildModal({onSuccess:n=>ef(ea(er({},e),{guildId:n}),t)});ef(e,t)}"}]