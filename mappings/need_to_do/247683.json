[{"code":"function(e){let t=V();return(0,r.jsx)(G,S({},e,t))}"},{"code":"function V(){let{renderWindow:e}=i.useContext(m.Ay),t=e.document,[n]=i.useState(()=>new c.R(()=>t.createElement(\"img\"),e=>{e.onload=null,e.src=\"\"})),[r]=i.useState(()=>new c.R(()=>{let e=t.createElement(\"video\");return e.className=A.nX,e.autoplay=!0,e.loop=!0,e.muted=!0,e.preload=\"auto\",e.controls=!1,e},e=>{e.src=\"\",e.oncanplay=null;let{parentNode:t}=e;null!=t&&t.removeChild(e)}));return{imagePool:n,videoPool:r}}"},{"code":"class U extends i.PureComponent{componentDidMount(){let{props:{format:e,src:t,coords:{width:n,height:r},videoPool:i},ref:a}=this;if(e!==u.TL.VIDEO||null==a)return;let s=i.getElement();s.oncanplay=this.handleCanPlay,s.src=t,s.width=n,s.height=r,a.appendChild(s),this._video=s}componentDidUpdate(e){let{width:t,height:n}=this.props.coords;null!=this._video&&(e.coords.width!==t||e.coords.height!==n)&&(this._video.width=t,this._video.height=n)}componentWillUnmount(){this._mounted=!1;let{_image:e,_video:t}=this,{imagePool:n,videoPool:r}=this.props;null!=e&&(this._image=null,n.poolElement(e)),null!=t&&(this._video=null,r.poolElement(t))}renderGIF(){let{src:e,coords:{width:t,height:n}}=this.props,{loaded:i}=this.state;return i?(0,r.jsx)(\"img\",{src:k(e),width:t,height:n,className:A.nX,alt:\"\"}):null}render(){let{item:e,renderExtras:t,format:n,coords:i,focused:a,selected:s}=this.props,{color:o,loaded:l}=this.state;return(0,r.jsxs)(f.DUT,{tabIndex:-1,innerRef:e=>{this.ref=e},className:A.Ke,\"data-focused\":a,\"data-selected\":s,onClick:this.handleClick,style:S({backgroundColor:l?void 0:o},i),children:[L(n)?null:this.renderGIF(),null!=t?t(e):null]})}constructor(e){super(e),I(this,\"ref\",null),I(this,\"_video\",null),I(this,\"_image\",null),I(this,\"_mounted\",!0),I(this,\"handleCanPlay\",()=>{this._mounted&&this.setState({loaded:!0})}),I(this,\"handleClick\",()=>{let{onClick:e,item:t,index:n}=this.props;null!=e&&e(t,n)});const{format:t,color:n,imagePool:r}=this.props;this.state={color:null==n?l().sample(T):n,loaded:!1},L(t)||(this._image=r.getElement(),this._image.onload=()=>this.setState({loaded:!0}),this._image.src=e.src)}}"}]