[{"code":"function y(e){let{analyticsData:t,initialPlanId:n,breadcrumbSteps:r,handleStepChange:l,onReturn:_,continueSessionToInitialStep:h}=e,{contextMetadata:g,step:y,paymentSources:O,paymentSourceId:A,setPaymentSourceId:v,purchaseError:S,setPurchaseError:I,purchaseErrorBlockRef:T,paymentAuthenticationState:C,selectedSkuId:N,activeSubscription:R,previousStepRef:w,setPurchaseState:P,paymentElementsEnabled:D,isPremiumGroupPurchase:x,isEligibleForTrial:L}=(0,u.P5)(),{isGift:j}=(0,c.Pv)(),M=E(m({},(0,s.KP)()),{paymentSources:O,paymentSourceId:A,setPaymentSourceId:v,purchaseError:S,setPurchaseError:I,purchaseErrorBlockRef:T,paymentAuthenticationState:C,selectedSkuId:N,isGift:j}),k=()=>{l(Object.values(O).length<1&&null==n?d.pn.PLAN_SELECT:d.pn.REVIEW,{trackedFromStep:D?d.pn.PAYMENT_ELEMENT:d.pn.PAYMENT_TYPE})},U=null!=_?_:k;i()(y,\"Step should be set here\");let G=(0,a.A)(()=>Date.now(),[y]),V=(0,a.A)(()=>null!=h&&null==w.current?D?d.pn.PAYMENT_ELEMENT:h:D?d.pn.PAYMENT_ELEMENT:d.pn.PAYMENT_TYPE,[h,w.current,D]);return(0,s.Y)({paymentModalArgs:M,initialStep:V,prependSteps:[d.pn.PROMOTION_INFO],appendSteps:[d.pn.REVIEW,d.pn.CONFIRM],breadcrumpSteps:r,currentBreadcrumpStep:y,usePaymentModalStep:!0,analyticsData:t,onReturn:x?void 0:U,onComplete:e=>{d.l_.has(e)?(P(f.h.COMPLETED),l(d.pn.CONFIRM,{trackedFromStep:e})):l(d.pn.REVIEW,{trackedFromStep:e})},onStepChange:e=>{let{currentStep:n,toStep:r}=e,i=Date.now();o.default.track(p.HAw.PAYMENT_FLOW_STEP,E(m({},t),{from_step:n,to_step:r,step_duration_ms:i-G,flow_duration_ms:i-g.startTime}))},isEligibleForTrial:L,allowDesktopRedirectPurchase:b(N,j,R),continueSessionToInitialStep:h})}"}]