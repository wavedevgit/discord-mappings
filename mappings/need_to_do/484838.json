[{"code":"class p extends r.EventEmitter{updateMessagesForExperiment(e,t){let n=this._fetchMessages(e);n instanceof Promise?n.then(n=>{this._applyMessagesForLocale(t(n),e)}):this._applyMessagesForLocale(t(n),e)}setLocale(e){if(this._chosenLocale===e)return;this._requestedLocale=e;let t=this._chosenLocale;this._chosenLocale=e,this.loadPromise=this._loadMessagesForLocale(e),this.emit(\"locale\",this._chosenLocale,t)}setUpdateRules(e){(0,s.Zs)(e)}getLanguages(){return this._languages}getAvailableLocales(){return this._languages.filter(e=>{let{enabled:t}=e;return t}).map(e=>{var t;let{code:n,name:r}=e;return{value:n,name:r,localizedName:null!=(t=this.Messages[n])?t:r}}).sort((e,t)=>{let{name:n}=e,{name:r}=t;return(n=n.toLowerCase())<(r=r.toLowerCase())?-1:+(n>r)})}getLocale(){return this._chosenLocale}getLocaleInfo(){return this._languages.find(e=>e.code===this._chosenLocale)}getDefaultLocale(){var e,t,n;let r=null!=(e=(0,o.c)())?e:c,i=this._languages.filter(e=>{let{enabled:t}=e;return t}).map(e=>{let{code:t}=e;return t});if(i.includes(r))return r;let a=r.split(\"-\");return i.includes(a[0])?a[0]:\"zh\"===a[0]&&a.length>1&&\"Hant\"===a[1]?null!=(n=i.find(e=>\"zh-TW\"===e))?n:c:null!=(t=i.find(e=>e.split(\"-\")[0]===a[0]))?t:c}_loadMessagesForLocale(e){let t=this._fetchMessages(e);return t instanceof Promise?t.then(t=>this._applyMessagesForLocale(t,e)):(this._applyMessagesForLocale(t,e),Promise.resolve())}_applyMessagesForLocale(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._findMessages(c);this._requestedLocale===t&&(this._provider.refresh({messages:e,defaultMessages:n,locale:t}),this.resolveLanguageLoaded())}_findMessages(e){let t=this._fetchMessages(e);if(t instanceof Promise)throw Error(\"Messages are still loading.\");return t}_fetchMessages(e){let t=e===c?()=>{throw Error(\"Error Loading \".concat(c))}:()=>(console.warn(\"Unsupported Locale\",e),-1===e.indexOf(\"-\"))?this._fetchMessages(c):this._fetchMessages(e.split(\"-\")[0]);try{let n=this._getMessages(e);return n instanceof Promise?n.catch(t):n}catch(e){return t()}}constructor({initialLocale:e,getMessages:t,getLanguages:r}){super(),l(this,\"Messages\",void 0),l(this,\"loadPromise\",Promise.resolve()),l(this,\"initialLanguageLoad\",void 0),l(this,\"resolveLanguageLoaded\",()=>{}),l(this,\"_languages\",[]),l(this,\"_provider\",void 0),l(this,\"_chosenLocale\",\"\"),l(this,\"_requestedLocale\",void 0),l(this,\"_getMessages\",void 0),l(this,\"_getParsedMessages\",(e,t,n)=>{let{messages:r,defaultMessages:i,locale:a}=e,o=r[t]||i[t];if(\"object\"==typeof o)return n({messages:o,defaultMessages:i[t],locale:a});try{return(0,s.I4)(o,a)}catch(e){if(console.warn(\"Failed parsing intl key '\".concat(String(t),\"' in locale '\").concat(a,\"' defaulting to English\"),e),\"string\"==typeof(o=i[t]))return(0,s.I4)(o,a)}return\"\"}),l(this,\"_handleNewListener\",e=>{\"locale\"===e&&this.emit(e,this._chosenLocale)}),this.initialLanguageLoad=new Promise((e,t)=>{this.resolveLanguageLoaded=e}),Intl.__addLocaleData&&Intl.__addLocaleData(n(217671)),this._languages=r(),this._provider=null!=window.Proxy?new f(this._getParsedMessages):new d(this._getParsedMessages),this.Messages=this._provider.getMessages(),this._getMessages=t;try{new Intl.NumberFormat(e,{}),this.setLocale(e||this.getDefaultLocale())}catch(e){this.setLocale(this.getDefaultLocale())}this.on(\"newListener\",this._handleNewListener)}}"},{"code":"function h(e){r=p(c.a,e),i=_(c.a)}"}]