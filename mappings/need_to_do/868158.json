[{"code":"function D(){let e=s.Z.database(),t=(0,f.O)()?l.Z.getCommittedVersions():Promise.resolve({});return Promise.all([t,(0,f.O)()?u.Z.getGuildIds():Promise.resolve(new Set),null!=e?c.Z.okAsync(e):Promise.resolve(!1)]).then(e=>{let[t,n,r]=e;return{guildVersions:t,guildChannels:n,databaseOk:r}})}"},{"code":"function M(e,t){var n;let r=E.Z.getGuild(e.id),i=B(e,null==r?void 0:{properties:b.dS(r),roles:g.Z.getRolesSnapshot(r.id),emojis:j(r.id),stickers:null!=(n=h.Z.getRawStickersByGuild().get(r.id))?n:null});return P={guild:e,identifyTime:t},i}"},{"code":"function x(e,t,n){var r,{users:a,relationships:s,private_channels:l,merged_members:c,guilds:u}=e,d=T(e,[\"users\",\"relationships\",\"private_channels\",\"merged_members\",\"guilds\"]);G(n);let f=k(w=o().keyBy(a,e=>e.id),s);null==l||l.forEach(e=>{let t=e.recipient_ids;null!=t&&(e.recipients=t.map(e=>(i()(null!=w[e],\"Missing user in compressed ready payload\"),w[e]))),delete e.recipient_ids});let p=null!=(r=null==u?void 0:u.map((e,t)=>!0===e.unavailable?e:(e.members=k(w,null==c?void 0:c[t]),F(e))))?r:[],_=L(t,u,e=>F(e));return null!=_&&p.push(_),I(v({},d),{users:a,presences:[],relationships:f,guilds:p,private_channels:null!=l?l:[]})}"},{"code":"function B(e,t){var n,r,i,a,o,s,l,c;if(null==t&&(t=U(e.id)),\"partial\"!==e.data_mode)return{id:e.id,guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,lastMessages:e.last_messages,member_count:e.member_count,members:e.members,premium_subscription_count:e.premium_subscription_count,properties:e.properties,roles:e.roles,stage_instances:e.stage_instances,threads:null!=(a=null==(i=e.threads)?void 0:i.map(t=>(0,m.q_)(t,e.id)))?a:[],threadMessages:V(e.threads),presences:e.presences,activity_instances:e.activity_instances,voice_states:e.voice_states,version:e.version,hasThreadsSubscription:e.has_threads_subscription,emojis:{op:\"full_sync\",items:e.emojis},stickers:{op:\"full_sync\",items:e.stickers},channels:{op:\"full_sync\",items:e.channels.map(t=>(t.guild_id=e.id,(0,m.q_)(t,e.id)))}};if(null==t)throw A.log(\"no cache entry for partial guild (guild: \".concat(e.id,\", type: post_ready)\")),Error(\"Guild data was missing from store, but hash was still available.\");return{id:e.id,channels:{op:\"update\",writes:null!=(o=null==(n=e.partial_updates.channels)?void 0:n.map(t=>(0,m.q_)(t,e.id)))?o:[],deletes:null!=(s=e.partial_updates.deleted_channel_ids)?s:[]},channelTimestampUpdates:e.channel_updates,activity_instances:e.activity_instances,emojis:Z(t.emojis,e.partial_updates.emojis,e.partial_updates.deleted_emoji_ids),guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,lastMessages:e.last_messages,member_count:e.member_count,members:e.members,premium_subscription_count:e.premium_subscription_count,presences:e.presences,properties:null!=(l=e.properties)?l:t.properties,roles:(0,y.EO)(e.id,t.roles,e.partial_updates.roles,e.partial_updates.deleted_role_ids),stage_instances:e.stage_instances,stickers:Z(t.stickers,e.partial_updates.stickers,e.partial_updates.deleted_sticker_ids),unableToSyncDeletes:e.unable_to_sync_deletes,threads:null!=(c=null==(r=e.threads)?void 0:r.map(t=>(0,m.q_)(t,e.id)))?c:[],threadMessages:V(e.threads),voice_states:e.voice_states,version:e.version,hasThreadsSubscription:e.has_threads_subscription}}"},{"code":"function R(e,t){var n,{guilds:r,merged_members:i,merged_presences:a}=e,o=T(e,[\"guilds\",\"merged_members\",\"merged_presences\"]);let s=k(w,null==a?void 0:a.friends),l=null!=(n=null==r?void 0:r.map((e,t)=>{let n=k(w,null==a?void 0:a.guilds[t]),r=k(w,null==i?void 0:i[t]);return I(v({},e),{unavailable:void 0===e.voice_states,presences:n,members:r})}))?n:[],c=L(t,r,e=>({id:e.id,members:e.members,presences:e.presences,activity_instances:e.activity_instances,voice_states:e.voice_states,unavailable:!1}));return null!=c&&l.push(c),w={},I(v({},o),{presences:s,guilds:l})}"}]