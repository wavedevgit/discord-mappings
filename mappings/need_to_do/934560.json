[{"code":"class p{start(){let{resolution:e,fps:t}=a.A.getState();this._targetResolution=e,this._targetFPS=t,this._statInterval.start(d,this._sampleStats),this._lastLayoutChanged=(0,r.tB)()}stop(){this._statInterval.stop(),this._streamEnd=(0,r.tB)(),this._incrementLayout(this._lastLayout,(this._streamEnd-this._lastLayoutChanged)/1e3)}autoQualityChange(){this._automaticQualityChanges+=1}layoutChange(e){if(e===this._lastLayout||null!=this._streamEnd)return;let t=(0,r.tB)();this._incrementLayout(this._lastLayout,(t-this._lastLayoutChanged)/1e3),this._layoutChanges++,this._lastLayout=e,this._lastLayoutChanged=t}getLayout(){return this._lastLayout}getStats(){let e={num_layout_changes:this._layoutChanges,duration_layout_fullscreen:f(this._layoutBuckets[s.SO9.FULL_SCREEN]),duration_layout_theatre:f(this._layoutBuckets[s.SO9.THEATRE]),duration_layout_pip:f(this._layoutBuckets[s.SO9.PIP]),duration_layout_popout:f(this._layoutBuckets[s.SO9.POPOUT]),duration_layout_portrait:f(this._layoutBuckets[s.SO9.PORTRAIT]),duration_layout_landscape:f(this._layoutBuckets[s.SO9.LANDSCAPE]),duration_layout_minimized:f(this._layoutBuckets[s.SO9.MINIMIZED])};return this._isSender?u(l({},e),{target_fps:this._targetFPS,target_resolution_height:this._targetResolution,stream_settings_changed:this._streamSettingsChanged,num_auto_quality_changes:this._automaticQualityChanges}):e}constructor(e,t){o(this,\"_statInterval\",void 0),o(this,\"_isSender\",void 0),o(this,\"_streamEnd\",void 0),o(this,\"_targetResolution\",0),o(this,\"_targetFPS\",0),o(this,\"_streamSettingsChanged\",!1),o(this,\"_lastLayout\",void 0),o(this,\"_lastLayoutChanged\",0),o(this,\"_layoutChanges\",0),o(this,\"_layoutBuckets\",void 0),o(this,\"_automaticQualityChanges\",0),o(this,\"_incrementLayout\",(e,t)=>{null==this._layoutBuckets[e]&&(this._layoutBuckets[e]=0),this._layoutBuckets[e]+=t}),o(this,\"_sampleStats\",()=>{let{resolution:e,fps:t}=a.A.getState();this._streamSettingsChanged=e!==this._targetResolution||t!==this._targetFPS}),this._isSender=t,this._statInterval=new i.IX,this._lastLayout=e,this._layoutBuckets={}}}"}]