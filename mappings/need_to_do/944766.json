[{"code":"e=>{let{seats:t,claimedSeat:n,participant:a,participants:g,channel:E,flip:y,handleHover:b,enableAnimations:O=!0}=e,v=i.useRef(null),A=i.useRef(new Set),I=(0,f.A)(a),{setAsset:S,sampleAsset:T,animationState:C,updateAnimationState:N,characterAssets:w}=(0,u.u)(null==I?void 0:I.name),R=i.useMemo(()=>Object.values(null!=w?w:{}).flat(),[w]),P=g.find(e=>e.type===p.lp.USER&&e.user.id===a.userId),D=i.useMemo(()=>g.filter(e=>m(e,a.userId)),[g,a.userId]),x=i.useMemo(()=>D.flatMap(e=>{let n=t.find(t=>t.claimedBy===e.user.id);return null!=n?[n]:[]}),[D,t]),[L,j]=i.useState(!1),[M,k]=i.useState(0),[U,G]=i.useState(0);return i.useEffect(()=>{j(!1)},[I,R]),i.useEffect(()=>{let e=A.current;return()=>{[...e].forEach(e=>window.clearTimeout(e))}},[]),i.useEffect(()=>{if(!O)return;let e=v.current;if(null==e||!0===L)return;let t=T(),n=R.findIndex(e=>e===t);S(t),G(n),[...e.children].forEach((e,t)=>{if(\"VIDEO\"!==e.nodeName)return;let r=e;r.currentTime=0,t===n&&(r.play(),j(!0))})},[L,R,T,S,O]),i.useEffect(()=>{O&&((null==P?void 0:P.speaking)?N(u.f.TALKING):C===u.f.TALKING&&N(u.f.IDLE))},[P,C,N,O]),i.useEffect(()=>{!O||x.some(e=>{switch(n.id){case 1:case 2:case 3:return(null==e?void 0:e.id)<n.id;case 4:case 5:case 6:return(null==e?void 0:e.id)>n.id;default:return!1}})&&M+h<Date.now()&&(N(u.f.HEAD_TURN),k(Date.now()))},[x,n,M,N,O]),(0,r.jsxs)(o.DUT,{className:_.iE,style:{width:I.width,top:I.offset.top,left:y?-I.offset.left:I.offset.left},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:e=>{e.preventDefault(),e.stopPropagation();let t=(a.avatar+1)%d.oo.length;0===t&&(t=1),c.Ay.update(E.id,{avatar:t,seat:null==n?void 0:n.id})},children:[(0,r.jsx)(\"div\",{className:_.Fk,style:{height:1.25*I.height,width:1.25*I.width}}),(null==w?void 0:w.decoration)!=null&&(0,r.jsx)(l.A,{src:w.decoration[0],className:s()(_.GG,{[_.UU]:y}),autoPlay:O,loop:O,style:{width:I.width}}),(0,r.jsx)(\"div\",{ref:v,children:R.map((e,t)=>(0,r.jsx)(l.A,{style:{opacity:+(t===U),width:I.width},src:e,className:s()(_.GG,{[_.UU]:y}),onEnded:()=>{var t,n;if(C===u.f.HEAD_TURN&&(null==w||null==(t=w.headTurn)?void 0:t.includes(e))){N(u.f.HEAD_TURN_BACK);let e=setTimeout(()=>{j(!1),A.current.delete(e)},2e3);A.current.add(e)}else C===u.f.HEAD_TURN_BACK&&(null==w||null==(n=w.headTurnBack)?void 0:n.includes(e))&&N(u.f.IDLE),j(!1)},autoPlay:!1,loop:!1},e))})]})}"}]