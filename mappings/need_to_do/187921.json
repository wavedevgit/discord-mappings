[{"code":"function C(e){let{user:t,guildId:n,channelId:a,sourceType:o,sourceDetails:f,setPopoutRef:p,modalKey:E,onAction:C,onClose:N,entry:R}=e,{resetInteraction:w,setInteractionToast:P}=(0,g.Pq)(),{primaryColor:D}=(0,b.E)(),[x,L]=i.useState(\"\"),[j,M]=i.useState((0,u.x7)(x)),k=i.useRef(!1),U=i.useRef(null),G=i.useCallback(e=>{e.key===O.dh.ESCAPE&&(e.stopPropagation(),w())},[w]);i.useEffect(()=>{null==p||p(null==U?void 0:U.current)},[U,p]);let V=async e=>{if(null==e)return;o===y.dS.AVATAR?C({action:\"SEND_REPLY_AVATAR\"}):o===y.dS.STATUS?C({action:\"SEND_REPLY_CUSTOM_STATUS\"}):C({action:\"SEND_REPLY_ACTIVITY\"});let n=I({input:e,username:h.Ay.getName(t),sourceType:o,sourceDetails:f});P(null);try{await (0,m.p)({userId:t.id,content:n,location:\"UserProfileReplyPopout\",openChannel:!1,whenReady:!1,entry:R})}catch(e){}P(y.AQ.REPLY)},F={[v.h5]:o===y.dS.STATUS,[v.my]:o===y.dS.AVATAR,[v.Eb]:o===y.dS.ACTIVITY};return(0,r.jsx)(l.l,{ref:U,onKeyDown:G,children:(0,r.jsx)(\"div\",{className:s()(v.kL,F,{[v.GE]:null!=D}),children:(0,r.jsx)(d.Ay,{parentModalKey:E,emojiPickerCloseOnModalOuterClick:!0,className:v.hF,innerClassName:v.rn,editorClassName:v.EN,type:c.oU.USER_PROFILE_REPLY,placeholder:A.intl.formatToPlainString(T(o),{username:_.Ay.getName(n,a,t)}),channel:S,textValue:x,richValue:j,onChange:(e,t,n)=>{t!==x&&(L(t),M(n))},focused:k.current,onFocus:()=>{k.current=!0},onSubmit:async e=>{let{value:t}=e,n=t.trim();if(0===n.length)return{shouldClear:!1,shouldRefocus:!1};try{return await V(n),w(),null==N||N(),{shouldClear:!0,shouldRefocus:!1}}catch(e){return{shouldClear:!1,shouldRefocus:!1}}}})})})}"}]