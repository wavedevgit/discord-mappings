[{"code":"function er(e){let{subscriptionTier:t,initialPlanId:n,handleStepChange:a,referralTrialOfferId:o,handleClose:s,continueSessionToInitialStep:c}=e,{activeSubscription:u,blockedPayments:f,hasFetchedSubscriptions:p,hasFetchedSubscriptionPlans:h,currencyLoading:g,selectedSkuId:E,setSelectedPlanId:y,defaultPlanId:b,startedPaymentFlowWithPaymentSourcesRef:O,hasPaymentSources:v}=(0,M.P5)(),{isGift:A}=(0,x.Pv)(),I=O.current,S=(0,V.A)({isGift:A,skuId:E,referralTrialOfferId:o}),[T,C]=i.useState(!0),N=(0,l.bG)([R.A],()=>R.A.applicationIdsFetched.has(K.tv));return(i.useEffect(()=>{C(!p||!h||g)},[g,h,p]),(0,_.A)(\"Payment Modal\",T,5,{hasFetchedSubscriptions:p,hasFetchedSubscriptionPlans:h,currencyLoading:g},{tags:{app_context:ee}}),i.useEffect(()=>{if(N||(0,d.LM)(K.tv),T||f)return;let e=(0,G.vT)({isTrial:S,isGift:A,selectedSkuId:E,startedPaymentFlowWithPaymentSources:I});null!=c?a(j.pn.ADD_PAYMENT_STEPS,{emitPaymentFlowLoadedEvent:!0,trackedFromStep:c}):null!=n?n!==K.gD.PREMIUM_GROUP_MONTH||v?a(j.pn.REVIEW):a(j.pn.ADD_PAYMENT_STEPS):e?(y((0,G.xT)(E,u,b)),a(j.pn.REVIEW)):null!=t?a(j.pn.PLAN_SELECT):a(j.pn.SKU_SELECT)},[c,u,f,N,n,T,a,t,E,y,S,b,A,I,v]),T)?(0,r.jsx)(H.A,{}):f?(0,r.jsx)(m.oO,{onClose:s}):null}"}]