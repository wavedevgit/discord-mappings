[{"code":"function E(e,t){let[n,...a]=[e,t],{streamId:o,paused:l=!1,onReady:c,onResize:f,reportContainerResized:_=!0,className:h}=n,E=d(n,[\"streamId\",\"paused\",\"onReady\",\"onResize\",\"reportContainerResized\",\"className\"]),[b]=a,y=i.useRef(null),O=i.useRef(null),A=i.useRef({width:0,height:0}),v=i.useRef({streamId:o,paused:l,onReady:c,onResize:f,onContainerResized:b});return i.useLayoutEffect(()=>{let{current:e}=y;function t(){var e,t,n,r,i,a;let{width:s,height:o}=A.current,l=null!=(e=null==(n=O.current)?void 0:n.videoWidth)?e:0,c=null!=(t=null==(r=O.current)?void 0:r.videoHeight)?t:0;if(s!==l||o!==c){let e={width:l,height:c};null==(i=(a=v.current).onResize)||i.call(a,e),A.current=e}}function n(){var e,t;p.info(\"handleReady for \".concat(v.current.streamId,\", have onReady callback = \").concat(null!=v.current.onReady)),null==(e=(t=v.current).onReady)||e.call(t)}function r(){if(!v.current.paused){var e;null==(e=O.current)||e.play()}}let i=new ResizeObserver(e=>{if(_)for(let r of e){var t,n;if(r.target!==O.current)continue;let e=window.devicePixelRatio*r.target.clientWidth,i=window.devicePixelRatio*r.target.clientHeight;null==(t=(n=v.current).onContainerResized)||t.call(n,v.current.streamId,e,i)}});if(null!=e){let a=document.createElement(\"video\");a.style.display=\"block\",a.style.width=\"100%\",a.style.height=\"100%\",a.autoplay=!0,a.muted=!0,a.addEventListener(\"pause\",r),a.addEventListener(\"resize\",t),a.addEventListener(\"canplaythrough\",n),p.info(\"create video element for \".concat(v.current.streamId,\", readyState=\").concat(a.readyState)),a.readyState>3&&p.error(\"video element for \".concat(v.current.streamId,\" was ready before attached\")),e.appendChild(a),i.disconnect(),i.observe(a),O.current=a}},[_]),i.useEffect(()=>{v.current.streamId=o,v.current.paused=l,v.current.onReady=c,v.current.onResize=f}),i.useEffect(()=>{let e=O.current;if(null!=e)if(!l)return p.info(\"attaching srcObject for \".concat(o)),e.srcObject=m(o),()=>{g(o),e.srcObject=null};else null!=e.srcObject&&(e.srcObject=null,g(o))},[l,o]),(0,r.jsx)(\"div\",u({className:s()(\"media-engine-video\",h),ref:y},E))}"}]