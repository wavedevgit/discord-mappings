[{"code":"function E(e,t){let[n,...a]=[e,t],{streamId:s,paused:l=!1,onReady:c,onResize:f,reportContainerResized:_=!0,className:h}=n,E=d(n,[\"streamId\",\"paused\",\"onReady\",\"onResize\",\"reportContainerResized\",\"className\"]),[y]=a,b=i.useRef(null),O=i.useRef(null),v=i.useRef({width:0,height:0}),A=i.useRef({streamId:s,paused:l,onReady:c,onResize:f,onContainerResized:y});return i.useLayoutEffect(()=>{let{current:e}=b;function t(){var e,t,n,r,i,a;let{width:o,height:s}=v.current,l=null!=(e=null==(n=O.current)?void 0:n.videoWidth)?e:0,c=null!=(t=null==(r=O.current)?void 0:r.videoHeight)?t:0;if(o!==l||s!==c){let e={width:l,height:c};null==(i=(a=A.current).onResize)||i.call(a,e),v.current=e}}function n(){var e,t;p.info(\"handleReady for \".concat(A.current.streamId,\", have onReady callback = \").concat(null!=A.current.onReady)),null==(e=(t=A.current).onReady)||e.call(t)}function r(){if(!A.current.paused){var e;null==(e=O.current)||e.play()}}let i=new ResizeObserver(e=>{if(_)for(let r of e){var t,n;if(r.target!==O.current)continue;let e=window.devicePixelRatio*r.target.clientWidth,i=window.devicePixelRatio*r.target.clientHeight;null==(t=(n=A.current).onContainerResized)||t.call(n,A.current.streamId,e,i)}});if(null!=e){let a=document.createElement(\"video\");a.style.display=\"block\",a.style.width=\"100%\",a.style.height=\"100%\",a.autoplay=!0,a.muted=!0,a.addEventListener(\"pause\",r),a.addEventListener(\"resize\",t),a.addEventListener(\"canplaythrough\",n),p.info(\"create video element for \".concat(A.current.streamId,\", readyState=\").concat(a.readyState)),a.readyState>3&&p.error(\"video element for \".concat(A.current.streamId,\" was ready before attached\")),e.appendChild(a),i.disconnect(),i.observe(a),O.current=a}},[_]),i.useEffect(()=>{A.current.streamId=s,A.current.paused=l,A.current.onReady=c,A.current.onResize=f}),i.useEffect(()=>{let e=O.current;if(null!=e)if(!l)return p.info(\"attaching srcObject for \".concat(s)),e.srcObject=m(s),()=>{g(s),e.srcObject=null};else null!=e.srcObject&&(e.srcObject=null,g(s))},[l,s]),(0,r.jsx)(\"div\",u({className:o()(\"media-engine-video\",h),ref:b},E))}"}]