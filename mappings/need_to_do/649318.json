[{"code":"function w(e){if(!e.includes(\"a=fingerprint\"))return E.error(\"Remote SDP does not include fingerprint!\"),!1;if(!e.includes(\"a=ice-ufrag\"))return E.error(\"Remote SDP does not include ICE user name!\"),!1;if(!e.includes(\"a=ice-pwd\"))return E.error(\"Remote SDP does not include ICE password!\"),!1;if(!e.includes(\"a=candidate\"))return E.error(\"Remote SDP does not include ICE candidate!\"),!1;if(!e.includes(\"c=\"))return E.error(\"Remote SDP does not include c-line!\"),!1;let t=e.split(\"\\n\").filter(e=>e.startsWith(\"c=\")).join().trim();return!(t.split(\" \").length<3)||(E.error(\"Incorrect c-line: \".concat(t)),!1)}"},{"code":"function T(e){let{type:t,baseSDP:n,direction:r,audioCodec:i,audioPayloadType:a,audioBitRate:o,videoCodec:s,videoPayloadType:l,videoBitRate:c,rtxPayloadType:d,ssrcs:f,extensions:p}=e,_=[];if(E.info(\"generateSessionDescription: \".concat(JSON.stringify(f))),\"Firefox\"===u().name){let e=\"answer\"===t?\"passive\":\"active\";f.forEach(t=>{let[r,u,f,h,m]=t;if(\"video\"===f&&(0===l||0===d))return;let g=\"audio\"===f?i:s,E=\"audio\"===f?a:l,b=\"audio\"===f?o:c;_.push(I({mid:m,type:f,setup:e,direction:h,baseSDP:n,codec:g,payload:E,bitrate:b,ssrcs:v(u,r,\"audio\"===f?\"a\":\"v\"),extensions:p}))})}else{let e=\"answer\"===t?\"passive\":\"actpass\",u=f.filter(e=>{let[t,n,r,i,a]=e;return\"inactive\"!==i&&\"audio\"===r}).map(e=>{let[t,n]=e;return v(n,t,\"a\")});if(_.push(I({mid:\"audio\",type:\"audio\",setup:e,direction:r,baseSDP:n,codec:i,payload:a,bitrate:o,ssrcs:u.flat(),extensions:p})),l>0){let t=f.filter(e=>{let[t,n,r,i,a]=e;return\"inactive\"!==i&&\"video\"===r}).map(e=>{let[t,n]=e;return v(n,t,\"v\")});_.push(I({mid:\"video\",type:\"video\",setup:e,direction:r,baseSDP:n,codec:s,payload:l,bitrate:c,ssrcs:t.flat(),extensions:p,rtxPayload:d}))}}return new RTCSessionDescription({type:t,sdp:S(_)})}"},{"code":"function O(e){switch(e){case\"recvonly\":return\"sendonly\";case\"sendonly\":return\"recvonly\";case\"sendrecv\":return\"sendrecv\";default:return\"inactive\"}}"},{"code":"function N(e,t){let n=d.parse(e).media.reduce((e,n)=>{let r,{type:i,rtp:a,ssrcs:o,fmtp:s,direction:l,mid:c}=n;switch(e.outboundStreams.push({type:i,direction:l,mid:c}),i){case\"audio\":[p.ad.OPUS].forEach((t,n)=>{let r=A(a,s,i,t,n);null!=r&&e.codecs.push(r)}),\"sendrecv\"===l&&null!=(r=null==o?void 0:o.find(e=>\"cname\"===e.attribute))&&(e.audioSSRC=r.id);break;case\"video\":(t?[p.ad.H265,p.ad.H264,p.ad.VP8,p.ad.VP9]:[p.ad.H264,p.ad.VP8,p.ad.VP9]).forEach((t,n)=>{let r=A(a,s,i,t,n);null!=r&&e.codecs.push(r)}),\"sendrecv\"===l&&(null!=(r=null==o?void 0:o.find(e=>\"cname\"===e.attribute))&&(e.videoSSRC=r.id),null!=(r=null==o?void 0:o.findLast(e=>\"cname\"===e.attribute))&&(r.id===e.videoSSRC&&E.warn(\"Unable to find a unique rtx SSRC!\"),e.rtxSSRC=r.id))}return e},{outboundStreams:[],codecs:[],audioSSRC:0,videoSSRC:0,rtxSSRC:0});return n.codecs=l()(n.codecs,o()),n}"},{"code":"function C(e){let{type:t,baseSDP:n,audioCodec:r,audioPayloadType:i,audioBitRate:a,videoCodec:o,videoPayloadType:s,videoBitRate:l,sendingVideo:c,rtxPayloadType:u,ssrcs:d,extensions:f,enableAudioNack:p}=e,_=[],h=\"answer\"===t?\"passive\":\"actpass\";return d.forEach(e=>{let t,{ssrc:d,cname:m,type:g,direction:E,mid:b}=e;\"\"!==m?t=v(m,d,\"audio\"===g?\"a\":\"v\"):(t=[],\"sendonly\"===E?E=\"inactive\":\"sendrecv\"===E&&(E=\"recvonly\"));let y=\"audio\"===g?r:o,O=\"audio\"===g?i:s,S=\"audio\"===g?null:u,T=\"audio\"===g?a:l;_.push(I({mid:b,type:g,setup:h,direction:E,baseSDP:n,codec:y,payload:O,bitrate:T,ssrcs:t,extensions:f,rtxPayload:S,sendingVideo:c,enableAudioNack:p}))}),new RTCSessionDescription({type:t,sdp:S(_)})}"},{"code":"function R(e){return[...new Set(e.split(/\\r\\n/).filter(e=>e.startsWith(\"a=extmap:\")))].map(e=>{let t=e.split(\" \");return{value:parseInt(t[0].split(\"/\")[0].substr(9),10),uri:t[1]}})}"},{"code":"function P(e,t){var n;let{codecs:r}=N(e,t),i=r.find(e=>e.name===p.ad.VP8),a=RegExp(\"^a=ice|a=extmap|a=fingerprint|opus|VP8|\".concat(null!=(n=null==i?void 0:i.rtxPayloadType)?n:0,\" rtx\"),\"i\");return{sdp:[...new Set(e.split(/\\r\\n/).filter(e=>a.test(e)))].join(\"\\n\"),codecs:r}}"}]