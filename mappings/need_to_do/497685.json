[{"code":"function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;\"\"===e?B():(l.h.dispatch({type:\"GIF_PICKER_QUERY\",query:e}),n?U(e,t,r):G(e,t,r))}"},{"code":"function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,[r={}]=[n],{startTime:i}=r,a=T(r,[\"startTime\"]),s={offset:0,limit:null,totalResults:e.length},o=(0,m.QL)(_.A.getAnalyticsID(),t,S(A({},s,a),{results:e.length})),l=null==i?{}:{load_duration_ms:Date.now()-i};c.Ay.trackWithMetadata(y.HAw.SEARCH_RESULT_VIEWED,S(A({},o,l),{gif_provider:(0,u.cf)()}))}"},{"code":"function M(e){let t=null!=e?{[e]:1}:{};c.Ay.trackWithMetadata(y.HAw.SEARCH_STARTED,{search_type:y.I4_.GIF,load_id:_.A.getAnalyticsID(),num_modifiers:Object.keys(t).length,modifiers:t,gif_provider:(0,u.cf)()})}"},{"code":"function B(){l.h.dispatch({type:\"GIF_PICKER_QUERY\",query:\"\"})}"},{"code":"function $(e){p.bW.updateAsync(\"favoriteGifs\",t=>{e in t.gifs?delete t.gifs[e]:delete t.gifs[z(e)],h.default.track(y.HAw.GIF_UNFAVORITED,{total_num_favorited:i().size(t.gifs)})},b.Sb.INFREQUENT_USER_ACTION)}"},{"code":"function Y(){let e=(0,a.A)().replace(w,\"\");c.Ay.trackWithMetadata(y.HAw.SEARCH_OPENED,{search_type:y.I4_.GIF,load_id:e}),l.h.wait(()=>{l.h.dispatch({type:\"GIF_PICKER_INITIALIZE\",analyticsID:e})})}"},{"code":"function K(e){let t=Date.now();M(y.dD.TRENDING_GIFS),s.Bo.get({url:y.Rsh.GIFS_TRENDING_GIFS,query:{media_format:_.A.getSelectedFormat(),provider:(0,u.cf)(),locale:f.default.locale,limit:e},oldFormErrors:!0,rejectWithError:!0}).then(n=>{let{body:r}=n;k(r,y.dD.TRENDING_GIFS,{startTime:t,limit:e}),l.h.dispatch({type:\"GIF_PICKER_QUERY_SUCCESS\",items:r})},()=>{l.h.dispatch({type:\"GIF_PICKER_QUERY_FAILURE\"})})}"},{"code":"function F(e){\"\"!==e&&null!=e&&s.Bo.get({url:y.Rsh.GIFS_SUGGEST,query:{q:e,provider:(0,u.cf)(),limit:5,locale:f.default.locale},oldFormErrors:!0,rejectWithError:!0}).then(t=>{let n=t.body;l.h.dispatch({type:\"GIF_PICKER_SUGGESTIONS_SUCCESS\",query:e,items:n})})}"},{"code":"function H(e){let{type:t,index:n,offset:r,limit:i,results:a,totalResults:o,query:l,gifId:d}=e,f=(0,m.QL)(_.A.getAnalyticsID(),t,{offset:r,limit:i,results:a,totalResults:o});if(c.Ay.trackWithMetadata(y.HAw.SEARCH_RESULT_SELECTED,S(A({},f),{index_num:n,source_object:\"GIF Picker\",query:l})),null!=d){let e=(0,u.cf)();s.Bo.post({url:y.Rsh.GIFS_SELECT,body:{id:d,q:l,provider:e},oldFormErrors:!0,rejectWithError:!0})}}"},{"code":"function W(){s.Bo.get({url:y.Rsh.GIFS_TRENDING,query:{provider:(0,u.cf)(),locale:f.default.locale,media_format:_.A.getSelectedFormat()},oldFormErrors:!0,rejectWithError:!0}).then(e=>{let{body:t}=e,{categories:n,gifs:r}=t;l.h.dispatch({type:\"GIF_PICKER_TRENDING_FETCH_SUCCESS\",trendingCategories:n,trendingGIFPreview:r[0]})})}"},{"code":"function J(e){p.bW.updateAsync(\"favoriteGifs\",t=>{var n;let r=null!=(n=i().max(Object.values(t.gifs).map(e=>e.order)))?n:0,a=Z(e),s=q(e)&&X(a),l=s?Q(a):a,c=s?o.TL.IMAGE:e.format;if(t.gifs[z(e.url)]=S(A({},e),{src:l,format:c,order:r+1}),o.uz.toBinary(t).length>762880)return E.A.show({title:O.intl.string(O.t[\"+XYXtZ\"]),body:O.intl.string(O.t.YSDH9n)}),!1;let u=i().size(t.gifs);u>2&&(t.hideTooltip=!0),h.default.track(y.HAw.GIF_FAVORITED,{total_num_favorited:u})},b.Sb.INFREQUENT_USER_ACTION)}"},{"code":"function z(e){let t=g.A.toURLSafe(e);return null==t?e:(0,d.fr)(t)?(0,d.w6)(t).toString():e}"}]