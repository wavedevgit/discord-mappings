[{"code":"e=>{var t;let{dispatcher:n,actionHandler:a,getFingerprint:u,getSessionId:_=z,TRACKING_URL:y,drainTimeoutOverride:b,waitFor:O,scheduleWhenIdle:q=B,getLaunchSignature:X=()=>null}=e;function Z(e){var t;if(null!=i)return i;let n=null!=(t=e.fingerprint)?t:u();return null!=n?(0,o.d)(n):null}function Q(){return 0!==W.length&&(null!=i?null!=r:null!=u())}function $(e){let{shouldFlushOnNextTick:t=!1}=e;null==K&&Q()&&(K=t?setTimeout(J,0):q(J,{timeout:S}))}function J(){if(K=null,!Q())return Promise.resolve();let e=W.slice();W=[],D=F(D);let t=e.length;x=Math.min(x,t),L=Math.max(L,t),j=F(j,t);let n=ee(e);return n.then(()=>{e.forEach(e=>{var t;null==(t=e.resolve)||t.call(e)}),N=F(N)},t=>{W.unshift(...e),R=F(R);let{message:n}=t.body||t;console.warn(\"[AnalyticsTrackingStore] Track:\",n)}),n}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=Date.now(),i=e.map(e=>h(p({},e),{properties:h(p({},e.properties),{client_send_timestamp:n})})),a={};return k||(G=(0,s.A)(),a[m]=G,k=!0),c.Bo.post({url:t,headers:a,body:{token:r,events:i},retries:3,rejectWithError:!1}).then(e=>{if(a[m]){var t,n;U=null!=(t=null==e||null==(n=e.headers)?void 0:n[m])?t:null}return e})}function et(){let e={type:d.bZ.CLIENT_TELEMETRY,properties:{client_track_timestamp:Date.now(),rpc_success_count:N,rpc_failure_count:R,first_seen_event_sequence_number:w,last_seen_event_sequence_number:T,telemetry_period_start_timestamp:P,telemetry_period_end_timestamp:Date.now(),event_queue_rejection_count:C,event_queue_batch_count:D,event_queue_batch_min_size:x===Number.MAX_SAFE_INTEGER?0:x,event_queue_batch_max_size:L,event_queue_batch_avg_size:D>0?j/D:0,science_request_id:G,science_response:U,launch_signature:X()}};return V(),ee([e],d.mX.CLIENT_TELEMETRY)}function en(){if(null==M)return!1;switch(M.type){case\"timeout\":clearTimeout(M.id);break;case\"interval\":clearInterval(M.id);break;default:M.type}return M=null,!0}function er(){if(null!=M)return;let e=()=>{let t=.1*v;M={type:\"timeout\",id:setTimeout(()=>{et(),e()},Math.max(v+(Math.floor(Math.random()*t*2)-t),A))}};M={type:\"timeout\",id:setTimeout(()=>{et(),e()},Math.floor(Math.random()*(I-A)+A))}}function ei(){if(!en())return}S=null!=b?b:g,Y.handleConnectionOpen=function(e){let{analyticsToken:t,user:n}=e;return null!=t&&(r=t),null!=n.id&&(i=n.id),er(),$({shouldFlushOnNextTick:!1}),!1},Y.handleConnectionClosed=function(){return J(),ei(),r=null,i=null,!1},Y.handleFingerprint=function(){return J(),!1},Y.handleTrack=function(e){let{event:t,properties:n,flush:r,fingerprint:i,resolve:a}=e;return _().then(e=>{let{sessionId:s}=e,o={type:t,fingerprint:i,properties:p({client_track_timestamp:Date.now(),client_heartbeat_session_id:s,event_sequence_number:++T},n),resolve:a},l=Z(o);if(null!=l&&(o.properties.client_uuid=H.generate(l)),W.push(o),W.length>E){let e=W.length-E;C=F(C,e),W=W.slice(-E)}r?$({shouldFlushOnNextTick:!0}):$({shouldFlushOnNextTick:!1})}),!1};class ea extends(t=l.Ay.Store){initialize(){null!=O&&this.waitFor(...O)}constructor(...e){super(...e),f(this,\"submitEventsImmediately\",ee)}}return f(ea,\"displayName\",\"AnalyticsTrackingStore\"),new ea(n,a)}"},{"code":"function i(e){try{return r.from(JSON.stringify(e)).toString(\"base64\")}catch(e){return null}}"},{"code":"function M(e){r=h({},r,e),i=(0,p.q)(r)}"},{"code":"function D(e){let t={};return P.forEach(n=>{let r=v(e,n);r.length>0&&(t[n]=r)}),t}"},{"code":"function T(){let{userAgent:e}=window.navigator;if(/(BlackBerry|PlayBook|BB10)/i.test(e))return\"BlackBerry\";if(/Windows Phone/i.test(e))return\"Windows Phone\";if(/Android/.test(e))return\"Android\";if(/iPhone/.test(e))return\"iPhone\";if(/iPad/.test(e))return\"iPad\";else return\"\"}"},{"code":"function O(){let{userAgent:e}=window.navigator;if(/Windows/i.test(e))return/Phone/.test(e)?\"Windows Mobile\":\"Windows\";if(/(iPhone|iPad|iPod)/.test(e))return\"iOS\";if(/Android/.test(e))return\"Android\";if(/(BlackBerry|PlayBook|BB10)/i.test(e))return\"BlackBerry\";if(/Mac/i.test(e))return null!=window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>2?\"iOS\":\"Mac OS X\";else if(/Linux/i.test(e))return\"Linux\";else return\"\"}"},{"code":"function k(){return r}"},{"code":"function U(){return i}"},{"code":"function h(e){return null!=p[e]&&p[e]>Date.now()}"},{"code":"e=>{let{analyticEventConfigs:t,dispatcher:r,TRACK_ACTION_NAME:a}=e,l=(0,o.x)(r,a);return function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=n.g.isServerRendering&&!0===n.g.isServerRendering)return Promise.resolve();let o=null!=r?r:{},c=t[e];if(\"function\"==typeof c){var u;c=null!=(u=c(o))?u:null}if(null!=c)if(\"throttlePeriod\"in c){let t=[e,...c.throttleKeys(o)].join(\"_\");if(h(t)||\"number\"==typeof c.throttlePercent&&Math.random()>c.throttlePercent)return Promise.resolve();if(c.deduplicate){let e=_[t];if(i()(e,o))return Promise.resolve();_[t]=o}p[t]=Date.now()+c.throttlePeriod}else if(\"throttlePercent\"in c){if(Math.random()>c.throttlePercent)return Promise.resolve()}else s()(!1,\"Unsupported analytics event config: \".concat(c));return l(e,r,a)}}"}]