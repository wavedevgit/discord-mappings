[{"code":"function L(e){let t=(0,T.n)(e);return(0,T.Tb)(e)?t?2:3:1}"},{"code":"function x(e,t){var n;return 3===t||null!=(n=e.isPrivate)&&n}"},{"code":"function U(e,t,n,r,i){return V(e,[],void 0,()=>a.Bo.post({url:w.Rsh.CHANNEL_THREADS(e.id),body:{name:t,type:n,auto_archive_duration:r,location:i},rejectWithError:!1}))}"},{"code":"function j(e,t){var n,r,i,a,o,s,l;let c=null==t?null:b.A.getMessage(e.id,t),u=null!=(n=null==c||null==(a=c.embeds)||null==(i=a[0])?void 0:i.rawTitle)?n:\"\",d=null!=(r=null==c||null==(s=c.poll)||null==(o=s.question)?void 0:o.text)?r:\"\";if(\"\"!==u)return M(u,40);{if(\"\"!==d)return M(d,80);let t=h.Ay.unparse(null!=(l=null==c?void 0:c.content)?l:\"\",e.id,!0),n=(0,C.A)(t.split(\"\\n\")[0],!0);n=n.replace(/^[ #-]+/,\"\");let r=[];for(;;){let e=n.match(/(?:\\s|[!@#$%^&*()_\\-+={}[\\]:\";'<>?,./])+/);if(null==e||null==e.index){r.push(n);break}r.push(n.substring(0,e.index)),r.push(e[0]),n=n.substring(e.index+e[0].length)}let i=r[0];for(let e=1;e<r.length;e++){let t=i+r[e];if(t.length>40)break;i=t}return M(i,40)}}"},{"code":"function k(e){let{parentChannel:t,parentMessageId:n,threadSettings:i,privateThreadMode:o,location:s,onThreadCreated:c,useDefaultThreadName:d,uploadHandler:f}=e;return r.useCallback(async(e,r,p)=>{var _;let h=null==n,m=x(i,o),g=null!=(_=i.name)?_:\"\";if(\"\"===g&&d){let e=j(t,n);g=\"\"!==e?e:P.intl.string(P.t[\"7Xm5QI\"])}let b=(0,S.Gl)(t),O=E.A.getChannel(A.default.castMessageIdAsChannelId(n)),v=await V(t,[],void 0,()=>{let e=null!=n?w.Rsh.CHANNEL_MESSAGE_THREADS(t.id,n):w.Rsh.CHANNEL_THREADS(t.id);return a.Bo.post({url:e,body:{name:g,type:m?w.rbe.PRIVATE_THREAD:t.type===w.rbe.GUILD_ANNOUNCEMENT?w.rbe.ANNOUNCEMENT_THREAD:w.rbe.PUBLIC_THREAD,auto_archive_duration:b,location:s},rejectWithError:!1})});v!==O&&(l.A.clearDraft(t.id,y.C.ThreadSettings),l.A.clearDraft(t.id,y.C.FirstThreadMessage),null==c||c(v),(h||e.length>0||null!=r&&r.length>0||null!=p&&p.length>0)&&F(v,e,r,p,f)),u.A.clearAll(t.id,y.C.FirstThreadMessage)},[t,n,i,c,o,s,d,f])}"},{"code":"function G(e){let{parentChannel:t,name:n,appliedTags:o,analyticsLocations:s,onThreadCreated:c,upload:d}=e;return r.useCallback(async(e,r,f)=>{let h,m=0,[E,b]=(0,g.A)(e);E&&(e=b,m=(0,i.UI)(m,w.pr7.SUPPRESS_NOTIFICATIONS));let O=(0,S.Gl)(t,null),v=w.Rsh.CHANNEL_THREADS(t.id)+\"?use_nested_fields=true\",A={name:n,auto_archive_duration:O,applied_tags:o,message:{content:e,sticker_ids:r,flags:0!==m?m:void 0}};if(null!=f&&f.length>0)try{let e=await d(f);h=e.uploaderFile,A.message.attachments=e.files.map((e,t)=>(0,I.OW)(e,t))}catch(i){let{file:e,code:n,reason:r}=i;throw(0,_.k)({file:e,guildId:t.getGuildId(),analyticsLocations:null!=s?s:[],code:n,reason:r}),i}let T=await V(t,s,h,()=>a.Bo.post({url:v,body:A,rejectWithError:!1}));return l.A.clearDraft(t.id,y.C.ThreadSettings),l.A.clearDraft(t.id,y.C.FirstThreadMessage),u.A.clearAll(t.id,y.C.FirstThreadMessage),(0,p.Lj)({guildId:t.guild_id,channelId:t.id,postId:T.id}),null==c||c(T),T},[t,n,o,c,s,d])}"}]