[{"code":"e=>{let{handleStepChange:t,handleClose:n}=e,{customGiftMessage:s=\"\",setCustomGiftMessage:l,giftRecipientError:_,setGiftRecipientError:E,validatingGiftRecipient:b,giftRecipient:T,recommendedGiftSkuIds:C,giftingOrigin:L,setValidatingGiftRecipient:x}=(0,I.Pv)(),{selectedSkuId:M,setSelectedSkuId:j,selectedSkuPricePreview:k,paymentSourceId:U,skuPricePreviewsById:F,skusById:B}=(0,S.P5)(),H=(0,i.bG)([O.default],()=>O.default.getCurrentUser()),{enabled:Y,giftRecommendationAlgorithm:W}=h.P.useExperiment({location:\"CollectiblesPaymentModalGiftCustomizationStep\"},{autoTrackExposure:!1}),K=(0,p.A)(),z=Y&&L===w.vQ.DM_CHANNEL,q=W===h.J.POPULAR?R.intl.string(R.t.Kwgrrr):R.intl.string(R.t.r1huYR),Z=async(e,t)=>{x(!0),null!=_&&E(),await (0,c.JJ)(e.id,t)||E(R.intl.string(R.t[\"4kgVqQ\"])),x(!1)};(0,o.Ay)(()=>{null!=M&&null!=T&&(L!==w.vQ.DM_CHANNEL_WISHLIST&&A.default.track(N.HAw.COLLECTIBLES_GIFTING_SHOP_ITEM_CLICKED,{sku_id:M}),Z(T,M))});let Q=e=>{L!==w.vQ.DM_CHANNEL_WISHLIST&&A.default.track(N.HAw.COLLECTIBLES_GIFTING_SHOP_ITEM_CLICKED,{sku_id:e}),null!=T&&Z(T,e),j(e)},X=e=>{let t=F[e],n=null;if(null!=t){var i;n=null!=U&&null!=(i=t[U])?i:t[v.B]}if(null!=n)return(0,r.jsx)(d.A,{skuId:e,priceAmount:n.amount,priceCurrency:n.currency,isSelected:e===M,onSelect:e=>Q(e),className:P.Cb},e)},J=()=>(0,r.jsx)(m.A,{onTextChange:e=>null==l?void 0:l(e),pendingText:s,currentText:s,disableThemedBackground:!0,className:P.iX,innerClassName:P.pt});return{renderLeftColumn:()=>z?(0,r.jsxs)(\"div\",{className:P.mT,children:[(0,r.jsx)(a.Text,{variant:\"text-xs/bold\",color:\"text-default\",className:P.B7,children:q.toLocaleUpperCase()}),C.map(e=>X(e)),(0,r.jsx)(G,{handleClose:n})]}):(0,r.jsx)(\"div\",{className:P.qL,children:(0,r.jsx)(g.t,{isShopGift:!0})}),renderRightColumn:()=>{if(z)return(0,r.jsxs)(\"div\",{className:P.Tc,children:[(0,r.jsx)(y.Z,{giftRecipient:T}),(0,r.jsx)(g.t,{isShopGift:!0,className:D.mx,optionsContainerClassName:D.OZ}),J()]});let e=(0,u.pA)({selectedSkuPricePreview:k,paymentSourceId:U,selectedSkuId:M,skuPricePreviewsById:F,skusById:B});return L===w.vQ.USER_PROFILE_WISHLIST||L===w.vQ.DM_CHANNEL_WISHLIST?(0,r.jsxs)(\"div\",{className:P.Tc,children:[(0,r.jsx)(y.Z,{giftRecipient:T}),J(),null!=e&&null!=M&&(0,r.jsx)(d.A,{skuId:M,priceAmount:e.amount,priceCurrency:e.currency,className:P.uW,previewHeaderClassName:P.vX,isSelected:!0,shouldDisplayHeader:!0,hideProfilePreview:!0}),(0,r.jsx)(\"div\",{className:P.fi,children:(0,r.jsx)(V,{handleClose:n,selectedSkuId:M})})]}):(0,r.jsxs)(\"div\",{className:P.Tc,children:[(0,r.jsx)(f.A,{selectedSkuId:M,recipients:K,className:P.uh,validateSelectedGift:Z}),J(),null!=e&&null!=M&&(0,r.jsx)(d.A,{skuId:M,priceAmount:e.amount,priceCurrency:e.currency,className:P.Ng,isSelected:!0,shouldDisplayHeader:!0})]})},onStepChange:t,onBackClick:n,ctaDisabled:null!=_||null==T||T.id===(null==H?void 0:H.id)||s.length>w.Jo,loading:b}}"}]