[{"code":"e=>{let{handleStepChange:t,handleClose:n}=e,{customGiftMessage:o=\"\",setCustomGiftMessage:l,giftRecipientError:_,setGiftRecipientError:E,validatingGiftRecipient:b,giftRecipient:C,recommendedGiftSkuIds:N,giftingOrigin:L,setValidatingGiftRecipient:j}=(0,S.Pv)(),{selectedSkuId:M,setSelectedSkuId:k,selectedSkuPricePreview:U,paymentSourceId:G,skuPricePreviewsById:B,skusById:H}=(0,T.P5)(),Y=(0,i.bG)([O.default],()=>O.default.getCurrentUser()),{enabled:W,giftRecommendationAlgorithm:K}=h.P.useExperiment({location:\"CollectiblesPaymentModalGiftCustomizationStep\"},{autoTrackExposure:!1}),z=(0,p.A)(),q=W&&L===R.vQ.DM_CHANNEL,Z=K===h.J.POPULAR?P.intl.string(P.t.Kwgrrr):P.intl.string(P.t.r1huYR),X=async(e,t)=>{j(!0),null!=_&&E(),await (0,c.JJ)(e.id,t)||E(P.intl.string(P.t[\"4kgVqQ\"])),j(!1)};(0,s.Ay)(()=>{null!=M&&null!=C&&(L!==R.vQ.DM_CHANNEL_WISHLIST&&A.default.track(w.HAw.COLLECTIBLES_GIFTING_SHOP_ITEM_CLICKED,{sku_id:M}),X(C,M))});let Q=e=>{L!==R.vQ.DM_CHANNEL_WISHLIST&&A.default.track(w.HAw.COLLECTIBLES_GIFTING_SHOP_ITEM_CLICKED,{sku_id:e}),null!=C&&X(C,e),k(e)},J=e=>{let t=B[e],n=null;if(null!=t){var i;n=null!=G&&null!=(i=t[G])?i:t[v.B]}if(null==n)return;let a=(0,I.$g)(n.amount,n.currency);return(0,r.jsx)(d.A,{skuId:e,pricePreview:n,isSelected:e===M,onSelect:e=>Q(e),className:D.Cb,fallbackPrice:a},e)},$=()=>(0,r.jsx)(m.A,{onTextChange:e=>null==l?void 0:l(e),pendingText:o,currentText:o,disableThemedBackground:!0,className:D.iX,innerClassName:D.pt});return{renderLeftColumn:()=>q?(0,r.jsxs)(\"div\",{className:D.mT,children:[(0,r.jsx)(a.Text,{variant:\"text-xs/bold\",color:\"text-default\",className:D.B7,children:Z.toLocaleUpperCase()}),N.map(e=>J(e)),(0,r.jsx)(V,{handleClose:n})]}):(0,r.jsx)(\"div\",{className:D.qL,children:(0,r.jsx)(g.t,{isShopGift:!0})}),renderRightColumn:()=>{if(q)return(0,r.jsxs)(\"div\",{className:D.Tc,children:[(0,r.jsx)(y.Z,{giftRecipient:C}),(0,r.jsx)(g.t,{isShopGift:!0,className:x.mx,optionsContainerClassName:x.OZ}),$()]});let e=(0,u.Ee)({selectedSkuPricePreview:U,paymentSourceId:G,selectedSkuId:M,skuPricePreviewsById:B,skusById:H,formatPrice:I.$g}),t=null!=U||null!=e;return L===R.vQ.USER_PROFILE_WISHLIST||L===R.vQ.DM_CHANNEL_WISHLIST?(0,r.jsxs)(\"div\",{className:D.Tc,children:[(0,r.jsx)(y.Z,{giftRecipient:C}),$(),t&&null!=M&&(0,r.jsx)(d.A,{skuId:M,pricePreview:U,className:D.uW,previewHeaderClassName:D.vX,isSelected:!0,shouldDisplayHeader:!0,hideProfilePreview:!0,fallbackPrice:e}),(0,r.jsx)(\"div\",{className:D.fi,children:(0,r.jsx)(F,{handleClose:n,selectedSkuId:M})})]}):(0,r.jsxs)(\"div\",{className:D.Tc,children:[(0,r.jsx)(f.A,{selectedSkuId:M,recipients:z,className:D.uh,validateSelectedGift:X}),$(),t&&(0,r.jsx)(d.A,{skuId:M,pricePreview:U,className:D.Ng,isSelected:!0,shouldDisplayHeader:!0,fallbackPrice:e})]})},onStepChange:t,onBackClick:n,ctaDisabled:null!=_||null==C||C.id===(null==Y?void 0:Y.id)||o.length>R.Jo,loading:b}}"}]