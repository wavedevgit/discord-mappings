[{"code":"function H(e){let{context:t,query:n,fetches:i=!0,pageLimit:a=1/0,entrypoint:c}=e;n.startsWith(\"\".concat(v.GI))&&(n=n.substring(1));let u=c===b._b.VOICE,d=\"channel\"===t.type?t.channel.guild_id:void 0,[f,p]=r.useState(1),_=r.useRef(f);_.current=f;let{fetchState:h,totalPages:E}=(0,l.cj)([g.Z],()=>{var e,t;return{fetchState:g.Z.getFetchState({query:n,guildId:d,page:f,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:u,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}),totalPages:null!=(t=null==(e=g.Z.getSearchResults({query:n,guildId:d,page:f,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:u,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}))?void 0:e.totalPages)?t:0}},[n,d,f,u]),y=r.useMemo(()=>Array.from({length:h===g.M.FETCHED||h===g.M.ERROR?f:f-1},(e,t)=>{var r,i;return null!=(i=null==(r=g.Z.getSearchResults({query:n,guildId:d,page:t+1,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:u,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}))?void 0:r.results)?i:[]}),[h,d,n,f,u]),O=r.useCallback(()=>{let e=y.length;h===g.M.FETCHED&&e===_.current&&e>0&&e<E&&e<a&&y[e-1].length>0&&(_.current++,p(e=>e+1))},[h,a,y,E]),S=r.useCallback(e=>{let{query:t,page:n,guildId:r}=e;m.yC({query:t,guildId:r,options:{page:n,integrationType:o.Y.USER_INSTALL,minUserInstallCommandCount:1,excludeAppsWithCustomInstallUrl:!0,excludeNonEmbeddedApps:u,excludeEmbeddedAppsWithoutPrimaryEntryPointAppCommand:!0,source:s.F.APP_LAUNCHER}})},[u]);return r.useEffect(()=>{i&&S({query:n,page:f,guildId:d})},[n,d,S,f,i]),r.useEffect(()=>{p(1)},[d,n]),{fetchState:h,applicationResults:y.flat(),fetchNextPage:O}}"},{"code":"function V(e){let{context:t,query:n,commandLimit:i,applicationLimit:o,searchesCommands:s=!0,searchesBots:l=!0,searchesActivities:c=!0}=e;n.startsWith(\"\".concat(v.GI))&&(n=n.substring(1));let{commands:d,commandSectionMap:f,loading:p}=I({context:t,includeBuiltIn:!0}),{apps:_}=S({context:t,onlyWithCommands:!0,includeBuiltIn:!0,includeEmbeddedApps:c,includeNonEmbeddedApps:l}),h=(0,u.Z)({guildId:\"channel\"===t.type?t.channel.guild_id:null}),m=r.useMemo(()=>s?(0,E.N)(d,{limit:i,filterPredicates:[x(t)],bucketPredicates:L(n),sortComparers:Z({channel:\"channel\"===t.type?t.channel:void 0})}):[],[s,d,i,t,n]),g=r.useMemo(()=>{if(0===m.length)return[];let e=new Map(_.map(e=>[e.id,e]));return a().compact(m.map(t=>{var n;let r=e.get(t.applicationId);if(null==r)return null;let i=null!=(n=f[t.id])?n:null;return{command:t,application:r,section:i}}))},[_,m,f]),b=r.useMemo(()=>{let e=[];if(c){let t=new Set(_.map(e=>{let{id:t}=e;return t}));e.push(..._),e.push(...h.filter(e=>{let{application:{id:n}}=e;return!t.has(n)}).map(e=>{let{application:t}=e;return t}))}else l&&(e=_);return(0,E.N)(e,{limit:o,filterPredicates:[T(t)],bucketPredicates:C(n),sortComparers:[R,D]})},[l,c,o,t,n,_,h]),y=g.length>0,O=b.length>0,A=!y&&!O;return{commandResults:g,hasCommandResults:y,applicationResults:b,hasApplicationResults:O,isEmptyState:A,loading:p&&s}}"}]