[{"code":"function A(e){let{user:t,guildId:n,channelId:a,sourceType:s,sourceDetails:f,setPopoutRef:p,modalKey:E,onAction:A,onClose:N,entry:P}=e,{resetInteraction:w,setInteractionToast:R}=(0,g.Xo)(),{primaryColor:D}=(0,b.z)(),[x,L]=i.useState(\"\"),[j,M]=i.useState((0,u.JM)(x)),k=i.useRef(!1),U=i.useRef(null),G=i.useCallback(e=>{e.key===O.vn.ESCAPE&&(e.stopPropagation(),w())},[w]);i.useEffect(()=>{null==p||p(null==U?void 0:U.current)},[U,p]);let Z=async e=>{if(null==e)return;s===y.n_.AVATAR?A({action:\"SEND_REPLY_AVATAR\"}):s===y.n_.STATUS?A({action:\"SEND_REPLY_CUSTOM_STATUS\"}):A({action:\"SEND_REPLY_ACTIVITY\"});let n=T({input:e,username:h.ZP.getName(t),sourceType:s,sourceDetails:f});R(null);try{await (0,m.Z)({userId:t.id,content:n,location:\"UserProfileReplyPopout\",openChannel:!1,whenReady:!1,entry:P})}catch(e){}R(y.P.REPLY)},F={[S.status]:s===y.n_.STATUS,[S.avatar]:s===y.n_.AVATAR,[S.activity]:s===y.n_.ACTIVITY};return(0,r.jsx)(l.V,{ref:U,onKeyDown:G,children:(0,r.jsx)(\"div\",{className:o()(S.container,F,{[S.customProfileTheme]:null!=D}),children:(0,r.jsx)(d.ZP,{parentModalKey:E,emojiPickerCloseOnModalOuterClick:!0,className:S.input,innerClassName:S.inputInner,editorClassName:S.editor,type:c.Ie.USER_PROFILE_REPLY,placeholder:v.intl.formatToPlainString(C(s),{username:_.ZP.getName(n,a,t)}),channel:I,textValue:x,richValue:j,onChange:(e,t,n)=>{t!==x&&(L(t),M(n))},focused:k.current,onFocus:()=>{k.current=!0},onSubmit:async e=>{let{value:t}=e,n=t.trim();if(0===n.length)return{shouldClear:!1,shouldRefocus:!1};try{return await Z(n),w(),null==N||N(),{shouldClear:!0,shouldRefocus:!1}}catch(e){return{shouldClear:!1,shouldRefocus:!1}}}})})})}"}]