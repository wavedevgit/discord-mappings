[{"code":"function S(e){let{activityItem:t,context:n,locationObject:r,onActivityItemSelected:i,embeddedActivitiesManager:o,assetNames:s=[\"embedded_cover\"],backgroundResolution:l=I,launchingComponentId:c,commandOrigin:d,source:f}=e,{application:p,activity:h}=t,E=h.client_platform_config[(0,m.A)((0,u.getOS)())],y=Date.now(),O=null!=E.label_until&&y<Date.parse(E.label_until)&&null!=E.label_from&&y>Date.parse(E.label_from),v=(0,b.A)({applicationId:p.id,size:l,names:s,format:\"webp\"}),A=null!=h.activity_preview_video_asset_id?(0,g.A)(p.id,h.activity_preview_video_asset_id):null,S=(0,_.Ay)(\"channel\"===n.type?n.channel:void 0).find(e=>{let{embeddedActivity:t}=e;return p.id===t.applicationId}),w=C({context:n,applicationId:p.id}),R=N({application:t.application,context:n,locationObject:r,embeddedActivitiesManager:o,onActivityItemSelectedProp:i,launchingComponentId:c,commandOrigin:d,source:f}),P=T(p,t.activity);return{imageBackground:v,videoUrl:A,joinableEmbeddedApp:S,activityAction:w,onActivityItemSelected:R,labelType:O?E.label_type:a.Hr.NONE,staffReleasePhase:P}}"},{"code":"function C(e){let{context:t,applicationId:n,fetchesApplication:r=!0}=e,i=0,a=\"channel\"===t.type?t.channel:void 0,o=(0,E.A)(),l=(0,y.A)({fetchesApplication:r}),c=(0,s.h)(n,r),u=(0,_.Ay)(a).find(e=>{let{embeddedActivity:t}=e;return null!=c&&c.id===t.applicationId});if(null==c)return i;let d=(0,h.H)(null==o?void 0:o.location);return null!=a&&d===a.id&&(null==l?void 0:l.id)===c.id?i=2:null!=u&&(i=1),i}"},{"code":"function T(e,t){var n;let i=null!=(n=e.flags)?n:0;if(!((0,r.Lt)(i,v.gfo.EMBEDDED_RELEASED)||(0,r.Lt)(i,v.gfo.EMBEDDED_FIRST_PARTY)))return;let a=t.client_platform_config[(0,m.A)((0,u.getOS)())].release_phase;return O.qG.includes(a)?a.replace(\"_\",\" \").replace(/(^\\w|\\s\\w)/g,e=>e.toUpperCase()):void 0}"},{"code":"function N(e){var t;let{application:n,botUserIdForAppDM:r,context:a,locationObject:s,embeddedActivitiesManager:u,onActivityItemSelectedProp:_,launchingComponentId:h,commandOrigin:m,sectionName:g,source:y,fetchesApplication:b=!0,customId:O,referrerId:v,onConfirmActivityLaunchChecksAlertOpen:A}=e,I=null!=(t=null==n?void 0:n.id)?t:\"\",S=C({context:a,applicationId:I,fetchesApplication:b}),{analyticsLocations:T}=(0,o.Ay)(),N=(0,E.A)(),w=(0,c.e)(n);if(null==n)return()=>{null==_||_({applicationId:\"\"})};switch(S){case 0:return async()=>{if(w){try{await l.A.launchFrame({applicationId:I}),null==_||_({applicationId:I})}catch(e){}return}let e=\"channel\"===a.type?a.channel.id:void 0;if(null!=r)try{e=await i.A.openPrivateChannel({recipientIds:r,navigateToChannel:!0})}catch(e){return}await (0,p.A)({targetApplicationId:I,locationObject:s,channelId:e,analyticsLocations:T,componentId:h,commandOrigin:m,sectionName:g,source:y,customId:O,referrerId:v,onConfirmActivityLaunchChecksAlertOpen:A}).then(e=>e&&(null==_?void 0:_({applicationId:I})))};case 1:return async()=>{d.Ay.isLaunchingActivity()||await (0,f.A)({applicationId:I,activityChannelId:\"channel\"===a.type?a.channel.id:void 0,locationObject:s,analyticsLocations:T,componentId:h,sectionName:g,source:y,customId:O,referrerId:v}).then(e=>e&&(null==_?void 0:_({applicationId:I})))};case 2:return()=>{d.Ay.isLaunchingActivity()||(null!=N&&u.leaveActivity({location:N.location,applicationId:I}),null==_||_({applicationId:I}))}}}"}]