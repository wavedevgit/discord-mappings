[{"code":"function D(e){let{selectionMode:t,readOnly:n,autoFocus:a,clearable:_,fullWidth:I,closeOnSelect:T=!0,shouldFocusWrap:w,placeholder:D=v.intl.string(O.default[\"A+pfVR\"]),name:M,form:j,autoComplete:k,maxOptionsVisible:U=5,options:G,formatOption:F,onSelectionChange:V,value:B,wrapTags:H=!1}=e,Y=N(e,[\"selectionMode\",\"readOnly\",\"autoFocus\",\"clearable\",\"fullWidth\",\"closeOnSelect\",\"shouldFocusWrap\",\"placeholder\",\"name\",\"form\",\"autoComplete\",\"maxOptionsVisible\",\"options\",\"formatOption\",\"onSelectionChange\",\"value\",\"wrapTags\"]),W=i.useRef(null),{fieldProps:K}=(0,l.n)(Y),{id:z,required:q,label:Z,disabled:Q}=K,{isOpen:X,setIsOpen:J,refs:$,floatingStyles:ee,getReferenceProps:et,getFloatingProps:en,transitionStyles:er}=(0,y.G)(),ei=i.useId(),{options:ea,loading:eo}=(0,E.K)({active:X,options:G,renderOption:F}),es=i.useRef(null),el=i.useRef(null),ec=null!=T?T:\"multiple\"!==t,eu=Array.isArray(B)?B.length>0:null!=B,ed=Q||n,{measuredWidth:ef,itemsForMeasurement:ep}=L(ea,t),e_=i.useCallback(()=>{ed||J(!X)},[ed,J,X]),eh=i.useCallback(()=>{var e;J(!1),null==(e=es.current)||e.focus()},[J]),em=i.useCallback(()=>{var e;!1!==_&&(\"multiple\"===t?V([]):V(null),null==(e=es.current)||e.focus())},[V,t,_]);i.useEffect(()=>{if(a){var e;null==(e=es.current)||e.focus()}},[a]);let eg=i.useCallback(e=>{var t,n,r,i,a,o;if(!ed)switch(e.key){case\"ArrowDown\":e.preventDefault(),J(!0);break;case\"ArrowLeft\":e.preventDefault(),null==(n=W.current)||null==(t=n.firstChild)||t.focus();break;case\"ArrowRight\":e.preventDefault(),null==(i=W.current)||null==(r=i.lastChild)||r.focus();break;case\"Backspace\":eu&&(e.preventDefault(),null==(o=W.current)||null==(a=o.lastChild)||a.focus());break;case\"Escape\":eu&&_&&(e.preventDefault(),e.stopPropagation(),em())}},[em,eu,_,J,ed]),eE=i.useMemo(()=>{let e=Array.isArray(B)?B:[B];return ea.filter(t=>(0,b.fI)(t.value,e))},[B,ea]),ey=i.useMemo(()=>{if(!I)return\"\".concat(Math.max(null!=ef?ef:200,200)*(\"multiple\"===t?1.5:1)+!!_*R+P+12,\"px\")},[I,ef,t,_]),eb=i.useCallback(e=>{if(ed)return;let n=Array.from(e);if(\"multiple\"===t&&n.length<1)V([]);else if(\"multiple\"===t)V(n.map(e=>e.value));else{var r;V(null==(r=n[0])?void 0:r.value)}ec&&X&&eh()},[ed,t,V,ec,eh,X]),eO=\"multiple\"===t&&eE.length>0,ev=i.useRef(null);i.useEffect(()=>{clearTimeout(ev.current),eO&&!H&&(ev.current=setTimeout(()=>{var e,t;null==(t=W.current)||null==(e=t.lastElementChild)||e.scrollIntoView({behavior:\"smooth\",inline:\"end\",block:\"end\"})},10))},[eE,eO,H]);let eA=(0,s.A)(el,$.setReference),eI=i.useCallback(e=>{if(ed)return;let t=Array.from(e)[0],n=eE.filter(e=>e.id!==t);if(eb(n),0===n.length){var r;null==(r=es.current)||r.focus()}},[eb,eE,ed]),eS=Math.max(ea.findIndex(e=>{var t;return e.id===(null==(t=eE[eE.length-1])?void 0:t.id)}),0),eT=i.useRef(null);i.useEffect(()=>(!eo&&X&&(eT.current=setTimeout(()=>{var e;return null==(e=document.getElementById((0,b.ZN)(ei,eS)))?void 0:e.focus()},10)),()=>{null!=eT.current&&clearTimeout(eT.current)}),[eo,ei,X,eS]);let eC=(0,p.rdh)(f.A.modules.select.MAX_WIDTH),eN=i.useMemo(()=>({horizontalControlColumnWidth:\"min(\".concat(eC,\"px, auto)\")}),[eC]);function ew(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.p,C(S({ref:eA,disabled:Q,readOnly:n,loading:eo,clearable:_,fullWidth:I,isOpen:X,isInert:ed,hasValue:eu,hasError:(null==e?void 0:e.errorMessageId)!=null,handleToggle:e_,handleClear:em},et()),{children:(0,r.jsxs)(d.sqX,{\"aria-label\":Z,buttonRef:es,buttonProps:C(S({},null!=z?{id:z}:{}),{style:{marginLeft:-4}}),focusProps:{ringTarget:el},className:o()(A.L5,{[A.kj]:H,[A.M8]:\"multiple\"===t}),onClick:e_,onKeyDown:eg,\"aria-expanded\":X,\"aria-busy\":eo,\"aria-haspopup\":\"listbox\",\"aria-controls\":ei,\"aria-describedby\":null==e?void 0:e.describedById,\"aria-errormessage\":null==e?void 0:e.errorMessageId,\"aria-invalid\":(null==e?void 0:e.errorMessageId)!=null,children:[(0,r.jsxs)(c.A,{children:[Z,\", \"]}),(0,r.jsx)(x,{tagGroupRef:W,placeholder:D,selectionMode:t,selectedItems:eE,onRemove:eI})]})})),(0,r.jsx)(h.H,{name:M,form:j,disabled:ed,autoComplete:k,selectionMode:t,selectedItems:eE,onSelectionChange:eb,listItems:ea}),!I&&ep,!ed&&X&&(0,r.jsx)(\"div\",C(S({ref:$.setFloating,className:A.S_},en()),{style:S({},ee,er),children:(0,r.jsx)(d.lGe,{children:(0,r.jsx)(u.q,{id:ei,required:q,items:ea,selectionMode:t,selectedItems:eE,onSelectionChange:eb,shouldFocusWrap:w,renderListItem:e=>(0,r.jsx)(m.c,S({},e)),maxVisibleItems:U,loading:eo,typeahead:!0})})}))]})}return(0,r.jsx)(l.D,C(S({},K),{\"data-mana-component\":\"select\",layoutConfig:eN,children:e=>(0,r.jsx)(\"div\",{style:{width:I?\"100%\":\"minmax(\".concat(ey,\"px, 100%)\")},children:ew(e)})}))}"}]