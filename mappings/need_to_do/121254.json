[{"code":"function P(e,t){var n;let[r,...i]=[e,t],{guilds:a,merged_members:s,merged_presences:o}=r,l=S(r,[\"guilds\",\"merged_members\",\"merged_presences\"]),[c]=i,u=k(w,null==o?void 0:o.friends),d=null!=(n=null==a?void 0:a.map((e,t)=>{let n=k(w,null==o?void 0:o.guilds[t]),r=k(w,null==s?void 0:s[t]);return I(v({},e),{unavailable:void 0===e.voice_states,presences:n,members:r})}))?n:[],f=L(c,a,e=>({id:e.id,members:e.members,presences:e.presences,activity_instances:e.activity_instances,voice_states:e.voice_states,unavailable:!1}));return null!=f&&d.push(f),w={},I(v({},l),{presences:u,guilds:d})}"},{"code":"function B(e,t){var n,r,i,a,s,o,l,c;if(null==t&&(t=U(e.id)),\"partial\"!==e.data_mode)return{id:e.id,guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,lastMessages:e.last_messages,member_count:e.member_count,members:e.members,premium_subscription_count:e.premium_subscription_count,properties:e.properties,roles:e.roles,stage_instances:e.stage_instances,threads:null!=(l=null==(c=e.threads)?void 0:c.map(t=>(0,m.UE)(t,e.id)))?l:[],threadMessages:H(e.threads),presences:e.presences,activity_instances:e.activity_instances,voice_states:e.voice_states,version:e.version,hasThreadsSubscription:e.has_threads_subscription,emojis:{op:\"full_sync\",items:e.emojis},stickers:{op:\"full_sync\",items:e.stickers},channels:{op:\"full_sync\",items:e.channels.map(t=>(t.guild_id=e.id,(0,m.UE)(t,e.id)))}};if(null==t)throw C.log(\"no cache entry for partial guild (guild: \".concat(e.id,\", type: post_ready)\")),Error(\"Guild data was missing from store, but hash was still available.\");return{id:e.id,channels:{op:\"update\",writes:null!=(n=null==(s=e.partial_updates.channels)?void 0:s.map(t=>(0,m.UE)(t,e.id)))?n:[],deletes:null!=(r=e.partial_updates.deleted_channel_ids)?r:[]},channelTimestampUpdates:e.channel_updates,activity_instances:e.activity_instances,emojis:V(t.emojis,e.partial_updates.emojis,e.partial_updates.deleted_emoji_ids),guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,lastMessages:e.last_messages,member_count:e.member_count,members:e.members,premium_subscription_count:e.premium_subscription_count,presences:e.presences,properties:null!=(i=e.properties)?i:t.properties,roles:(0,b.ly)(e.id,t.roles,e.partial_updates.roles,e.partial_updates.deleted_role_ids),stage_instances:e.stage_instances,stickers:V(t.stickers,e.partial_updates.stickers,e.partial_updates.deleted_sticker_ids),unableToSyncDeletes:e.unable_to_sync_deletes,threads:null!=(a=null==(o=e.threads)?void 0:o.map(t=>(0,m.UE)(t,e.id)))?a:[],threadMessages:H(e.threads),voice_states:e.voice_states,version:e.version,hasThreadsSubscription:e.has_threads_subscription}}"},{"code":"function D(){let e=o.A.database();return Promise.all([(0,f.O)()?l.A.getCommittedVersions():Promise.resolve({}),(0,f.O)()?u.A.getGuildIds():Promise.resolve(new Set),null!=e?c.A.okAsync(e):Promise.resolve(!1)]).then(e=>{let[t,n,r]=e;return{guildVersions:t,guildChannels:n,databaseOk:r}})}"},{"code":"function M(e,t){var n;let r=E.A.getGuild(e.id),i=B(e,null==r?void 0:{properties:y.yN(r),roles:g.A.getRolesSnapshot(r.id),emojis:j(r.id),stickers:null!=(n=h.A.getRawStickersByGuild().get(r.id))?n:null});return R={guild:e,identifyTime:t},i}"},{"code":"function x(e,t,n){var r;let[a,...o]=[e,t,n],{users:l,relationships:c,private_channels:u,merged_members:d,guilds:f}=a,p=S(a,[\"users\",\"relationships\",\"private_channels\",\"merged_members\",\"guilds\"]),[_,...h]=o,[m]=h;G(m);let g=k(w=s().keyBy(l,e=>e.id),c);null==u||u.forEach(e=>{let t=e.recipient_ids;null!=t&&(e.recipients=t.map(e=>(i()(null!=w[e],\"Missing user in compressed ready payload\"),w[e]))),delete e.recipient_ids});let E=null!=(r=null==f?void 0:f.map((e,t)=>!0===e.unavailable?e:(e.members=k(w,null==d?void 0:d[t]),F(e))))?r:[],y=L(_,f,e=>F(e));return null!=y&&E.push(y),I(v({},p),{users:l,presences:[],relationships:g,guilds:E,private_channels:null!=u?u:[]})}"}]