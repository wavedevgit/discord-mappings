[{"code":"function U(e){let{className:t,waveform:n,currentTime:a,duration:s,played:l,playing:d,onDrag:f,onDragStart:h,onDragEnd:m}=e,{ref:g,width:E}=(0,c.Ay)(),y=i.useMemo(()=>w(s),[s]),b=i.useRef(void 0),O=x(n,E),A=i.useRef(l),S=i.useRef(d),C=i.useRef(null),N=window.devicePixelRatio,{lastBackgroundFillColor:R,backgroundFillColor:P,lastActiveFillColor:M,activeFillColor:U,lastInactiveFillColor:G,inactiveFillColor:V}=j(l,d),F={currentTime:a,duration:s,played:l},B=i.useRef(F);i.useEffect(()=>{B.current=F}),i.useEffect(()=>{let{currentTime:e,duration:t,played:n}=B.current,r=D({showAll:!n,currentTime:e,duration:t,numSegments:O.length});b.current=O.map((e,t)=>new p.A(t<r?e:0))},[O]),i.useEffect(()=>{let e=b.current;if(null==e)return;let t=D({showAll:!l,currentTime:a,duration:s,numSegments:O.length});for(let n=0;n<e.length;n++){let r=e[n];if(n<t){r.animateTo(O[n]);continue}r.reset()}},[O,a,s,l]),i.useEffect(()=>{let e=null;function t(n){let r=g.current,i=null==r?void 0:r.getContext(\"2d\"),a=b.current;if(null==r||null==i||null==a)return;let o=!1;(A.current!==l||S.current!==d)&&(A.current=l,S.current=d,C.current=n),null!=C.current&&n>C.current+T&&(C.current=null);let s=r.height/N;i.clearRect(0,0,r.width,r.height),i.beginPath();let[c,u]=k(R,P,n,C.current);o=o||u,i.fillStyle=c;for(let e=0;e<O.length;e++)L({context:i,devicePixelRatio:N,canvasHeight:s,segmentValue:O[e],segmentIndex:e,constrainMin:!0});i.fill();let[f,p]=k(G,V,n,C.current);o=o||p;let[_,h]=k(M,U,n,C.current);o=o||h;for(let e=0;e<a.length;e++){let t=a[e],n=Math.max(t.getCurrentValue(),O[e]-.1);i.beginPath(),i.fillStyle=t.isReset?f:_,L({context:i,devicePixelRatio:N,canvasHeight:s,segmentValue:n,segmentIndex:e,constrainMin:!t.isReset}),o=o||t.isAnimating(),i.fill()}o&&(e=requestAnimationFrame(t))}return e=requestAnimationFrame(t),()=>{null!=e&&cancelAnimationFrame(e)}},[g,N,O,E,a,s,l,d,R,P,M,U,G,V]);let[,H]=(0,u.A)({ref:g,onDrag:f,onDragStart:h,onDragEnd:m});return(0,r.jsx)(\"canvas\",{onMouseDown:H,className:o()(_.J,t),style:{width:y},ref:g,height:(v+2*I)*window.devicePixelRatio,width:(null!=E?E:0)*window.devicePixelRatio})}"}]