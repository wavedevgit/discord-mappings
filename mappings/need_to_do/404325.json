[{"code":"function U(e){let{className:t,waveform:n,currentTime:a,duration:o,played:l,playing:d,onDrag:f,onDragStart:h,onDragEnd:m}=e,{ref:g,width:E}=(0,c.Ay)(),b=i.useMemo(()=>R(o),[o]),y=i.useRef(void 0),O=L(n,E),v=i.useRef(l),I=i.useRef(d),C=i.useRef(null),N=window.devicePixelRatio,{lastBackgroundFillColor:w,backgroundFillColor:P,lastActiveFillColor:j,activeFillColor:U,lastInactiveFillColor:G,inactiveFillColor:V}=M(l,d),F={currentTime:a,duration:o,played:l},B=i.useRef(F);i.useEffect(()=>{B.current=F}),i.useEffect(()=>{let{currentTime:e,duration:t,played:n}=B.current,r=D({showAll:!n,currentTime:e,duration:t,numSegments:O.length});y.current=O.map((e,t)=>new p.A(t<r?e:0))},[O]),i.useEffect(()=>{let e=y.current;if(null==e)return;let t=D({showAll:!l,currentTime:a,duration:o,numSegments:O.length});for(let n=0;n<e.length;n++){let r=e[n];if(n<t){r.animateTo(O[n]);continue}r.reset()}},[O,a,o,l]),i.useEffect(()=>{let e=null;function t(n){let r=g.current,i=null==r?void 0:r.getContext(\"2d\"),a=y.current;if(null==r||null==i||null==a)return;let s=!1;(v.current!==l||I.current!==d)&&(v.current=l,I.current=d,C.current=n),null!=C.current&&n>C.current+T&&(C.current=null);let o=r.height/N;i.clearRect(0,0,r.width,r.height),i.beginPath();let[c,u]=k(w,P,n,C.current);s=s||u,i.fillStyle=c;for(let e=0;e<O.length;e++)x({context:i,devicePixelRatio:N,canvasHeight:o,segmentValue:O[e],segmentIndex:e,constrainMin:!0});i.fill();let[f,p]=k(G,V,n,C.current);s=s||p;let[_,h]=k(j,U,n,C.current);s=s||h;for(let e=0;e<a.length;e++){let t=a[e],n=Math.max(t.getCurrentValue(),O[e]-.1);i.beginPath(),i.fillStyle=t.isReset?f:_,x({context:i,devicePixelRatio:N,canvasHeight:o,segmentValue:n,segmentIndex:e,constrainMin:!t.isReset}),s=s||t.isAnimating(),i.fill()}s&&(e=requestAnimationFrame(t))}return e=requestAnimationFrame(t),()=>{null!=e&&cancelAnimationFrame(e)}},[g,N,O,E,a,o,l,d,w,P,j,U,G,V]);let[,H]=(0,u.A)({ref:g,onDrag:f,onDragStart:h,onDragEnd:m});return(0,r.jsx)(\"canvas\",{onMouseDown:H,className:s()(_.J,t),style:{width:b},ref:g,height:(A+2*S)*window.devicePixelRatio,width:(null!=E?E:0)*window.devicePixelRatio})}"}]