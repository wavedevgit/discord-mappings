[{"code":"function U(e){return e.hasFlag(y.iLy.EPHEMERAL)&&e.type!==y.uaV.IN_GAME_MESSAGE_NUX}"},{"code":"function P(e){var t,n,r,i,a,o,l,d;let _,h,{reactions:b,interactionData:O}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=N(e),T=null!=(i=null==(t=e.mentions)?void 0:t.map(e=>e.id))?i:[],P=null!=(a=e.mention_roles)?a:[],w=null!=(o=e.mention_channels)?o:[],R=null!=(l=e.mention_games)?l:[],D=e.message_reference,L=C(e),k=null,U=null==e?void 0:e.gift_info,G=e.gifting_prompt,Z=null!=e.interaction?c.Z.createFromServer(e.interaction):null,F=e.type===y.uaV.THREAD_STARTER_MESSAGE?null==(r=e.referenced_message)||null==(n=r.author)?void 0:n.id:void 0,B=e.content;return new u.ZP((e.type===y.uaV.PREMIUM_REFERRAL&&(_=g.default.isProbablyAValidSnowflake(e.content)?e.content:void 0,B=\"\"),e.type===y.uaV.PREMIUM_GROUP_INVITE&&(h=g.default.isProbablyAValidSnowflake(e.content)?e.content:void 0,B=\"\"),A(e))?I(v({},k),{id:e.id,channel_id:e.channel_id,type:y.uaV.DEFAULT,author:L,timestamp:S.timestamp,isUnsupported:!0}):I(v({},e,k,S.toJS()),{author:L,webhookId:e.webhook_id,blocked:p.Z.isBlockedForMessage(e)||null!=F&&p.Z.isBlocked(F),ignored:p.Z.isIgnoredForMessage(e)||null!=F&&p.Z.isIgnored(F),mentionEveryone:e.mention_everyone,mentions:T,mentionRoles:P,mentionChannels:w,mentionGames:R,messageReference:D,mentioned:(0,E.Sz)({userId:f.default.getId(),channelId:e.channel_id,mentionEveryone:null!=(d=e.mention_everyone)&&d,mentionUsers:T,mentionRoles:P,mentionGames:R.map(e=>e.id)}),giftCodes:(0,m.Fp)(e)?(0,m.Q_)(null==e?void 0:e.embeds[0].url):(0,m.Q_)(e.content),content:B,referralTrialOfferId:_,premiumGroupInviteId:h,call:x(e.call,S.timestamp),messageSnapshots:M(e),reactions:j(null!=b?b:e.reactions,e.poll),interaction:Z,interactionData:null!=O?O:e.interaction_data,interactionMetadata:e.interaction_metadata,roleSubscriptionData:e.role_subscription_data,purchaseNotification:e.purchase_notification,poll:null==e.poll?void 0:(0,s.Z)(e.poll),sharedClientTheme:e.shared_client_theme,giftInfo:null==U?void 0:U,giftingPrompt:G}))}"},{"code":"function w(e,t){return null!=t.edited_timestamp?I(v({},t),{reactions:e.reactions,interaction_data:e.interaction_data}):v({},e,t)}"},{"code":"e=>0===(0,l.cv)(e).length||\"\"!==e.content"},{"code":"function R(e,t){if(null!=t.edited_timestamp)return P(t,{reactions:e.reactions,interactionData:e.interactionData});let n=e,r=!1;if(null!=t.call&&(n=n.set(\"call\",x(t.call,e.timestamp))),null!=t.attachments&&(n=n.set(\"attachments\",D(t))),null!=t.application&&(n=n.set(\"application\",t.application)),null!=t.activity&&(n=n.set(\"activity\",t.activity)),null!=t.content&&\"\"!==t.content&&(n=n.set(\"content\",t.content)),null!=t.embeds&&(n=n.set(\"embeds\",L(t))),null!=t.message_snapshots&&(n=n.set(\"messageSnapshots\",M(t))),t.pinned!==n.pinned&&(n=n.set(\"pinned\",t.pinned)),null!=n.webhookId&&null!=t.author&&(n=n.set(\"author\",new d.Z(t.author))),null!=t.flags&&t.flags!==n.flags&&(n=n.set(\"flags\",t.flags)),null!=t.components&&(n=n.set(\"components\",(0,o.uZ)(t.components))),null!=t.role_subscription_data&&(n=n.set(\"roleSubscriptionData\",t.role_subscription_data)),null!=t.reactions){var i;n=n.set(\"reactions\",j(null!=(i=e.reactions)?i:t.reactions))}return null!=t.poll&&(n=n.set(\"poll\",(0,s.Z)(t.poll))),null!=t.mentions&&(n=n.set(\"mentions\",t.mentions.map(e=>e.id)),r=!0),null!=t.mention_games&&(n=n.set(\"mentionGames\",t.mention_games),r=!0),null!=t.mention_everyone&&(n=n.set(\"mentionEveryone\",t.mention_everyone),r=!0),null!=t.mention_roles&&(n=n.set(\"mentionRoles\",t.mention_roles),r=!0),r&&(n=n.set(\"mentioned\",(0,E.ZP)({message:n,userId:f.default.getId()}))),n}"}]