[{"code":"function w(e){let{user:t,guildId:a,channelId:m,onClose:O,disableAutoFocus:T=!1,upsell:A=!1}=e,{newestAnalyticsLocation:w,analyticsLocations:R}=(0,u.ZP)(),{trackUserProfileAction:D}=(0,E.KZ)(),[x,L]=i.useState(\"\"),[j,M]=i.useState((0,f.JM)(x)),k=i.useRef(!1),U=i.useRef(null),G=i.useRef(null),{Component:Z}=(0,s.V)(),F=i.useMemo(()=>N(C({},d.Ie.USER_PROFILE),{disableAutoFocus:T}),[T]),B=i.useCallback(async()=>{(0,h.PV)(t.id),await c.Z.openPrivateChannel({recipientIds:[t.id]}),(0,l.ZDy)(async()=>{let{default:e}=await n.e(\"5890\").then(n.bind(n,171793));return t=>(0,r.jsx)(e,N(C({},t),{giftIntentType:v.hX.FRIEND_ANNIVERSARY,analyticsLocationHistory:R}))})},[t.id,R]),V=i.useCallback(()=>(0,r.jsxs)(\"div\",{className:I.buttons,children:[(0,r.jsx)(l.hU,{size:\"sm\",variant:\"icon-only\",icon:Z,\"aria-label\":S.intl.string(S.t.I61IsE),onClick:B}),(0,r.jsx)(y.Z,{user:t,analyticsLocations:R})]}),[Z,B,t,R]);return(0,r.jsx)(p.ZP,{className:o()(I.container,{[I.upsell]:A}),editorClassName:I.editor,type:F,placeholder:S.intl.formatToPlainString(S.t[\"0ZQw/X\"],{name:g.ZP.getName(a,m,t)}),channel:P,textValue:x,richValue:j,onChange:(e,t,n)=>{t!==x&&(L(t),M(n))},focused:k.current,onFocus:()=>{k.current=!0},onBlur:()=>{k.current=!1},onSubmit:async e=>{let{value:n}=e,r=n.trim();if(\"\"===r)return{shouldClear:!1,shouldRefocus:!0};(U.current!==r||null==G.current)&&(U.current=r,G.current=(0,_.r)());try{var i;return D({action:\"SEND_DIRECT_MESSAGE\"}),await (0,b.Z)({userId:t.id,content:r,openChannel:!0,whenReady:!0,location:w,nonce:null!=(i=G.current)?i:void 0}),U.current=null,G.current=null,null==O||O(),{shouldClear:!0,shouldRefocus:!1}}catch(e){return{shouldClear:!1,shouldRefocus:!1}}},renderButtons:A?V:void 0})}"}]