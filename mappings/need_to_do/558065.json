[{"code":"function E(e,t){var{streamId:n,paused:a=!1,onReady:s,onResize:l,reportContainerResized:c=!0,className:f}=e,_=d(e,[\"streamId\",\"paused\",\"onReady\",\"onResize\",\"reportContainerResized\",\"className\"]);let h=i.useRef(null),E=i.useRef(null),b=i.useRef({width:0,height:0}),y=i.useRef({streamId:n,paused:a,onReady:s,onResize:l,onContainerResized:t});return i.useLayoutEffect(()=>{let{current:e}=h;function t(){var e,t,n,r,i,a;let{width:o,height:s}=b.current,l=null!=(n=null==(e=E.current)?void 0:e.videoWidth)?n:0,c=null!=(r=null==(t=E.current)?void 0:t.videoHeight)?r:0;if(o!==l||s!==c){let e={width:l,height:c};null==(i=(a=y.current).onResize)||i.call(a,e),b.current=e}}function n(){var e,t;p.info(\"handleReady for \".concat(y.current.streamId,\", have onReady callback = \").concat(null!=y.current.onReady)),null==(e=(t=y.current).onReady)||e.call(t)}function r(){if(!y.current.paused){var e;null==(e=E.current)||e.play()}}let i=new ResizeObserver(e=>{if(c)for(let r of e){var t,n;if(r.target!==E.current)continue;let e=window.devicePixelRatio*r.target.clientWidth,i=window.devicePixelRatio*r.target.clientHeight;null==(t=(n=y.current).onContainerResized)||t.call(n,y.current.streamId,e,i)}});if(null!=e){let a=document.createElement(\"video\");a.style.display=\"block\",a.style.width=\"100%\",a.style.height=\"100%\",a.autoplay=!0,a.muted=!0,a.addEventListener(\"pause\",r),a.addEventListener(\"resize\",t),a.addEventListener(\"canplaythrough\",n),p.info(\"create video element for \".concat(y.current.streamId,\", readyState=\").concat(a.readyState)),a.readyState>3&&p.error(\"video element for \".concat(y.current.streamId,\" was ready before attached\")),e.appendChild(a),i.disconnect(),i.observe(a),E.current=a}},[c]),i.useEffect(()=>{y.current.streamId=n,y.current.paused=a,y.current.onReady=s,y.current.onResize=l}),i.useEffect(()=>{let e=E.current;if(null!=e)if(!a)return p.info(\"attaching srcObject for \".concat(n)),e.srcObject=m(n),()=>{g(n),e.srcObject=null};else null!=e.srcObject&&(e.srcObject=null,g(n))},[a,n]),(0,r.jsx)(\"div\",u({className:o()(\"media-engine-video\",f),ref:h},_))}"}]