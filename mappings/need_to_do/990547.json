[{"code":"e=>{var t;let{dispatcher:n,actionHandler:a,getFingerprint:u,getSessionId:_=K,TRACKING_URL:b,drainTimeoutOverride:y,waitFor:O,scheduleWhenIdle:z=B,getLaunchSignature:q=()=>null}=e;function Q(e){var t;if(null!=i)return i;let n=null!=(t=e.fingerprint)?t:u();return null!=n?(0,s.s)(n):null}function X(){return 0!==Y.length&&(null!=i?null!=r:null!=u())}function J(e){let{shouldFlushOnNextTick:t=!1}=e;null==W&&X()&&(W=t?setTimeout($,0):z($,{timeout:T}))}function $(){if(W=null,!X())return Promise.resolve();let e=Y.slice();Y=[],D=F(D);let t=e.length;x=Math.min(x,t),L=Math.max(L,t),j=F(j,t);let n=ee(e);return n.then(()=>{e.forEach(e=>{var t;null==(t=e.resolve)||t.call(e)}),N=F(N)},t=>{Y.unshift(...e),P=F(P);let{message:n}=t.body||t;console.warn(\"[AnalyticsTrackingStore] Track:\",n)}),n}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,n=Date.now(),i=e.map(e=>h(p({},e),{properties:h(p({},e.properties),{client_send_timestamp:n})})),a={};return k||(G=(0,o.Z)(),a[m]=G,k=!0),c.tn.post({url:t,headers:a,body:{token:r,events:i},retries:3,rejectWithError:!1}).then(e=>{if(a[m]){var t,n;U=null!=(n=null==e||null==(t=e.headers)?void 0:t[m])?n:null}return e})}function et(){let e={type:d.cN.CLIENT_TELEMETRY,properties:{client_track_timestamp:Date.now(),rpc_success_count:N,rpc_failure_count:P,first_seen_event_sequence_number:w,last_seen_event_sequence_number:C,telemetry_period_start_timestamp:R,telemetry_period_end_timestamp:Date.now(),event_queue_rejection_count:A,event_queue_batch_count:D,event_queue_batch_min_size:x===Number.MAX_SAFE_INTEGER?0:x,event_queue_batch_max_size:L,event_queue_batch_avg_size:D>0?j/D:0,science_request_id:G,science_response:U,launch_signature:q()}};return Z(),ee([e],d.tx.CLIENT_TELEMETRY)}function en(){if(null==M)return!1;switch(M.type){case\"timeout\":clearTimeout(M.id);break;case\"interval\":clearInterval(M.id);break;default:M.type}return M=null,!0}function er(){if(null!=M)return;let e=()=>{let t=.1*v;M={type:\"timeout\",id:setTimeout(()=>{et(),e()},Math.max(v+(Math.floor(Math.random()*t*2)-t),S))}};M={type:\"timeout\",id:setTimeout(()=>{et(),e()},Math.floor(Math.random()*(I-S)+S))}}function ei(){if(!en())return}T=null!=y?y:g,H.handleConnectionOpen=function(e){let{analyticsToken:t,user:n}=e;return null!=t&&(r=t),null!=n.id&&(i=n.id),er(),J({shouldFlushOnNextTick:!1}),!1},H.handleConnectionClosed=function(){return $(),ei(),r=null,i=null,!1},H.handleFingerprint=function(){return $(),!1},H.handleTrack=function(e){let{event:t,properties:n,flush:r,fingerprint:i,resolve:a}=e;return _().then(e=>{let{sessionId:o}=e,s={type:t,fingerprint:i,properties:p({client_track_timestamp:Date.now(),client_heartbeat_session_id:o,event_sequence_number:++C},n),resolve:a},l=Q(s);if(null!=l&&(s.properties.client_uuid=V.generate(l)),Y.push(s),Y.length>E){let e=Y.length-E;A=F(A,e),Y=Y.slice(-E)}r?J({shouldFlushOnNextTick:!0}):J({shouldFlushOnNextTick:!1})}),!1};class ea extends(t=l.ZP.Store){initialize(){null!=O&&this.waitFor(...O)}constructor(...e){super(...e),f(this,\"submitEventsImmediately\",ee)}}return f(ea,\"displayName\",\"AnalyticsTrackingStore\"),new ea(n,a)}"},{"code":"function i(e){try{return r.from(JSON.stringify(e)).toString(\"base64\")}catch(e){return null}}"},{"code":"function M(e){r=h({},r,e),i=(0,p.Z)(r)}"},{"code":"function D(e){let t={};return R.forEach(n=>{let r=v(e,n);r.length>0&&(t[n]=r)}),t}"},{"code":"function C(){let{userAgent:e}=window.navigator;if(/(BlackBerry|PlayBook|BB10)/i.test(e))return\"BlackBerry\";if(/Windows Phone/i.test(e))return\"Windows Phone\";if(/Android/.test(e))return\"Android\";if(/iPhone/.test(e))return\"iPhone\";if(/iPad/.test(e))return\"iPad\";else return\"\"}"},{"code":"function O(){let{userAgent:e}=window.navigator;if(/Windows/i.test(e))return/Phone/.test(e)?\"Windows Mobile\":\"Windows\";if(/(iPhone|iPad|iPod)/.test(e))return\"iOS\";if(/Android/.test(e))return\"Android\";if(/(BlackBerry|PlayBook|BB10)/i.test(e))return\"BlackBerry\";if(/Mac/i.test(e))return null!=window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>2?\"iOS\":\"Mac OS X\";else if(/Linux/i.test(e))return\"Linux\";else return\"\"}"},{"code":"function k(){return r}"},{"code":"function U(){return i}"},{"code":"function h(e){return null!=p[e]&&p[e]>Date.now()}"},{"code":"e=>{let{analyticEventConfigs:t,dispatcher:r,TRACK_ACTION_NAME:a}=e,l=(0,s.$)(r,a);return function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=n.g.isServerRendering&&!0===n.g.isServerRendering)return Promise.resolve();let s=null!=r?r:{},c=t[e];if(\"function\"==typeof c){var u;c=null!=(u=c(s))?u:null}if(null!=c)if(\"throttlePeriod\"in c){let t=[e,...c.throttleKeys(s)].join(\"_\");if(h(t)||\"number\"==typeof c.throttlePercent&&Math.random()>c.throttlePercent)return Promise.resolve();if(c.deduplicate){let e=_[t];if(i()(e,s))return Promise.resolve();_[t]=s}p[t]=Date.now()+c.throttlePeriod}else if(\"throttlePercent\"in c){if(Math.random()>c.throttlePercent)return Promise.resolve()}else o()(!1,\"Unsupported analytics event config: \".concat(c));return l(e,r,a)}}"}]